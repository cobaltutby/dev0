webpackJsonp([1],{1011:function(e,t,n){"use strict";var r=n(209),a=n(1),o=n(456);a.enableProdMode(),document.write("<title>Server App</title>"),r.platformBrowserDynamic().bootstrapModule(o.AppModule)},107:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=n(1),i=function(){function StateParamsService(){}return StateParamsService=r([o.Injectable(),a("design:paramtypes",[])],StateParamsService)}();t.StateParamsService=i},108:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=n(1),i=n(55),s=n(75),l=n(27),c=n(32),p=function(){function TrialService(e,t,n){this.state=e,this.ppService=t,this.designData=n,this.trialConfig=new c.CPanelData}return TrialService.prototype.getExperimentURL=function(){var e="https://"+this.ppService.ppServer+"/ekb/ExperimentView.aspx?ExperimentId="+this.trialConfig.experiment_id;return e},TrialService.prototype.getNotebookURL=function(){var e="https://notebook-unilever-dev.bioviaonline.com/notebook/experiment/"+this.trialConfig.trial_name;return e},TrialService.prototype.loadAllData=function(e){console.log("loadAllData"),"create"!=e&&(this.state.current,this.designData.gotData=!1,this.designData.getData(this.trialConfig.trial_name),this.gotAllData=!0)},TrialService=r([o.Injectable(),a("design:paramtypes",[l.StateService,i.HTTPService,s.DesignDataService])],TrialService)}();t.TrialService=p},115:function(e,t,n){"use strict";function dragDropServiceFactory(){return new s}function dragDropSortableServiceFactory(e){return new l(e)}var r=n(1),a=n(96),o=n(285);n.d(t,"a",function(){return i}),t.b=dragDropServiceFactory,n.d(t,"c",function(){return s}),t.d=dragDropSortableServiceFactory,n.d(t,"e",function(){return l});var i=function(){function DragDropData(){}return DragDropData}(),s=function(){function DragDropService(){this.allowedDropZones=[]}return DragDropService.decorators=[{type:r.Injectable}],DragDropService.ctorParameters=function(){return[]},DragDropService}(),l=function(){function DragDropSortableService(e){this._config=e}return Object.defineProperty(DragDropSortableService.prototype,"elem",{get:function(){return this._elem},enumerable:!0,configurable:!0}),DragDropSortableService.prototype.markSortable=function(e){n.i(o.a)(this._elem)&&this._elem.classList.remove(this._config.onSortableDragClass),n.i(o.a)(e)&&(this._elem=e,this._elem.classList.add(this._config.onSortableDragClass))},DragDropSortableService.decorators=[{type:r.Injectable}],DragDropSortableService.ctorParameters=function(){return[{type:a.c}]},DragDropSortableService}()},199:function(e,t,n){"use strict";var r=n(1),a=n(96),o=n(115),i=n(285);n.d(t,"a",function(){return s});var s=function(){function AbstractComponent(e,t,r,a){var o=this;this._dragDropService=t,this._config=r,this._cdr=a,this._dragEnabled=!1,this.dropEnabled=!1,this.dropZones=[],this.cloneItem=!1,this._elem=e.nativeElement,this._elem.ondragenter=function(e){o._onDragEnter(e)},this._elem.ondragover=function(e){return o._onDragOver(e),null!=e.dataTransfer&&(e.dataTransfer.dropEffect=o._config.dropEffect.name),!1},this._elem.ondragleave=function(e){o._onDragLeave(e)},this._elem.ondrop=function(e){o._onDrop(e)},this._elem.ondragstart=function(e){if(o._onDragStart(e),null!=e.dataTransfer){if(e.dataTransfer.setData("text",""),e.dataTransfer.effectAllowed=o.effectAllowed||o._config.dragEffect.name,n.i(i.a)(o.dragImage))if(n.i(i.b)(o.dragImage))e.dataTransfer.setDragImage(n.i(i.c)(o.dragImage));else if(n.i(i.d)(o.dragImage))e.dataTransfer.setDragImage(n.i(i.e)(o.dragImage));else{var t=o.dragImage;e.dataTransfer.setDragImage(t.imageElement,t.x_offset,t.y_offset)}else if(n.i(i.a)(o._config.dragImage)){var r=o._config.dragImage;e.dataTransfer.setDragImage(r.imageElement,r.x_offset,r.y_offset)}else o.cloneItem&&(o._dragHelper=o._elem.cloneNode(!0),o._dragHelper.classList.add("dnd-drag-item"),o._dragHelper.style.position="absolute",o._dragHelper.style.top="0px",o._dragHelper.style.left="-1000px",o._elem.parentElement.appendChild(o._dragHelper),e.dataTransfer.setDragImage(o._dragHelper,e.offsetX,e.offsetY));o._dragEnabled?o._elem.style.cursor=o.effectCursor?o.effectCursor:o._config.dragCursor:o._elem.style.cursor=o._defaultCursor}},this._elem.ondragend=function(e){o._elem.parentElement&&o._dragHelper&&o._elem.parentElement.removeChild(o._dragHelper),o._onDragEnd(e),o._elem.style.cursor=o._defaultCursor}}return Object.defineProperty(AbstractComponent.prototype,"dragEnabled",{get:function(){return this._dragEnabled},set:function(e){this._dragEnabled=!!e,this._elem.draggable=this._dragEnabled},enumerable:!0,configurable:!0}),AbstractComponent.prototype.detectChanges=function(){var e=this;setTimeout(function(){e._cdr.detectChanges()},250)},AbstractComponent.prototype._onDragEnter=function(e){this._isDropAllowed&&this._onDragEnterCallback(e)},AbstractComponent.prototype._onDragOver=function(e){this._isDropAllowed&&(e.preventDefault&&e.preventDefault(),this._onDragOverCallback(e))},AbstractComponent.prototype._onDragLeave=function(e){this._isDropAllowed&&this._onDragLeaveCallback(e)},AbstractComponent.prototype._onDrop=function(e){this._isDropAllowed&&(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),this._onDropCallback(e),this.detectChanges())},Object.defineProperty(AbstractComponent.prototype,"_isDropAllowed",{get:function(){if(this._dragDropService.isDragged&&this.dropEnabled){if(this.allowDrop)return this.allowDrop(this._dragDropService.dragData);if(0===this.dropZones.length&&0===this._dragDropService.allowedDropZones.length)return!0;for(var e=0;e<this._dragDropService.allowedDropZones.length;e++){var t=this._dragDropService.allowedDropZones[e];if(this.dropZones.indexOf(t)!==-1)return!0}}return!1},enumerable:!0,configurable:!0}),AbstractComponent.prototype._onDragStart=function(e){this._dragEnabled&&(this._dragDropService.allowedDropZones=this.dropZones,this._onDragStartCallback(e))},AbstractComponent.prototype._onDragEnd=function(e){this._dragDropService.allowedDropZones=[],this._onDragEndCallback(e)},AbstractComponent.prototype._onDragEnterCallback=function(e){},AbstractComponent.prototype._onDragOverCallback=function(e){},AbstractComponent.prototype._onDragLeaveCallback=function(e){},AbstractComponent.prototype._onDropCallback=function(e){},AbstractComponent.prototype._onDragStartCallback=function(e){},AbstractComponent.prototype._onDragEndCallback=function(e){},AbstractComponent.decorators=[{type:r.Injectable}],AbstractComponent.ctorParameters=function(){return[{type:r.ElementRef},{type:o.c},{type:a.c},{type:r.ChangeDetectorRef}]},AbstractComponent}()},27:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=n(1),i=n(75),s=n(54),l=n(32),c=n(32),p=function(){function StateService(e,t){this.designData=e,this.experimentSetup=t,this.allTabs=["ParentFormulation","ExperimentType","TestFormulations","ProcessParameters","TestSchedule"],this.activeTab=0,this.selection=new c.Selection,this.current=new l.CurrentFrame}return StateService.prototype.go=function(e,t,n){},StateService.prototype.setTabState=function(e){this.isTabDisabled(e)||(this.activeTab=e)},StateService.prototype.currentPageBlocked=function(){var e=!0;switch(this.allTabs[this.activeTab]){case"ParentFormulation":e=!("undefined"!=typeof this.designData.parentFormulation&&this.designData.parentFormulation.gotData);break;case"ExperimentType":e=!this.experimentSetup.experimentType.selected.gotData;break;case"TestFormulations":e=!this.experimentSetup.experimentType.gotData;break;case"ProcessParameters":e=!1;break;case"TestSchedule":e=!1}return e},StateService.prototype.nextState=function(){this.setTabState(this.activeTab+1)},StateService.prototype.prevState=function(){this.setTabState(this.activeTab-1)},StateService.prototype.isTabDisabled=function(e){return!(e<=this.activeTab)&&(e===this.activeTab+1?this.currentPageBlocked():e>this.activeTab+1||("undefined"==typeof this.experimentSetup.experimentType||this.experimentSetup.experimentType.gotData!==!0))},StateService.prototype.nextButtonClass=function(){return this.currentPageBlocked()?"btn btn-default disabled":"btn btn-primary active"},StateService.prototype.prevButtonClass=function(){return this.activeTab>0?"btn btn-primary active":"btn btn-default disabled"},StateService.prototype.isWizardStateVisible=function(e){return e===this.activeTab},StateService=r([o.Injectable(),a("design:paramtypes",[i.DesignDataService,s.ExperimentSetupService])],StateService)}();t.StateService=p},285:function(e,t,n){"use strict";function isString(e){return"string"==typeof e}function isPresent(e){return void 0!==e&&null!==e}function isFunction(e){return"function"==typeof e}function createImage(e){var t=new HTMLImageElement;return t.src=e,t}function callFun(e){return e()}t.b=isString,t.a=isPresent,t.d=isFunction,t.c=createImage,t.e=callFun},32:function(e,t,n){"use strict";var r=function(){function ExperimentJSON(){}return ExperimentJSON}();t.ExperimentJSON=r;var a=function(){function ExperimentInfo(){this.totalQuantity=new P}return ExperimentInfo}();t.ExperimentInfo=a;var o=function(){function ReadOnly(){}return ReadOnly}();t.ReadOnly=o;var i=function(){function ExperimentProcess(){}return ExperimentProcess}();t.ExperimentProcess=i;var s=function(){function TestSchedule(){}return TestSchedule}();t.TestSchedule=s;var l=function(){function Weeks(){}return Weeks}();t.Weeks=l;var c=function(){function Week(){this.doTest=!1}return Week}();t.Week=c;var p=function(){function Test(){}return Test}();t.Test=p;var u=function(){function Temperature(){}return Temperature}();t.Temperature=u;var d=function(){function ParentFormulation(){this.gotData=!1,this.data=new h}return ParentFormulation}();t.ParentFormulation=d;var h=function(){function ParentFormulationData(){this.formulation=[],this.gotData=!1}return ParentFormulationData}();t.ParentFormulationData=h;var f=function(){function Formulation(){}return Formulation}();t.Formulation=f;var m=function(){function ExperimentType(){this.selected=new v}return ExperimentType}();t.ExperimentType=m;var g=function(){function ExperimentTypeData(){}return ExperimentTypeData}();t.ExperimentTypeData=g;var b=function(){function Experiment(){}return Experiment}();t.Experiment=b;var v=function(){function SelectedExperiment(){}return SelectedExperiment}();t.SelectedExperiment=v;var y=function(){function Selected(){}return Selected}();t.Selected=y;var S=function(){function DesignStep(){this.name="",this.id=0,this.finished=!1,this.prevStepFinished=!1}return DesignStep}();t.DesignStep=S;var D=function(){function CPanelData(){}return CPanelData}();t.CPanelData=D;var _=function(){function CalculatedFormulationsType(){}return CalculatedFormulationsType}();t.CalculatedFormulationsType=_;var P=function(){function TotalQuantity(){}return TotalQuantity}();t.TotalQuantity=P;var T=function(){function CalculatedFormulation(){}return CalculatedFormulation}();t.CalculatedFormulation=T;var C=function(){function AvailableTests(){}return AvailableTests}();t.AvailableTests=C;var x=function(){function ProcessData(){}return ProcessData}();t.ProcessData=x;var w=function(){function Process(){}return Process}();t.Process=w;var k=function(){function DataService(){this.gotData=!1,this.parentFormulation=new d,this.experimentType=new m,this.calculatedFormulations=new _,this.experimentInfo=new a}return DataService}();t.DataService=k;var F=function(){function Selection(){this.process=new w}return Selection}();t.Selection=F;var R=function(){function UserData(){}return UserData}();t.UserData=R;var E=function(){function CurrentFrame(){}return CurrentFrame}();t.CurrentFrame=E;var O=function(){function LocalStorage(){}return LocalStorage}();t.LocalStorage=O;var j=function(){function FlowMaterial(){}return FlowMaterial}();t.FlowMaterial=j;var H=function(){function Column(){this.type="numeric",this.editor="numeric",this.format="0.0[0000000000]",this.readOnly=!0,this.width=65}return Column}();t.Column=H;var A=function(){function ParentFormulationHOTSettings(){}return ParentFormulationHOTSettings}();t.ParentFormulationHOTSettings=A;var I=function(){function FormulationData(){this.mainBatchFormulation=new L,this.holeFillFormulation=new M}return FormulationData}();t.FormulationData=I;var L=function(){function BatchFormulation(){this.data=[]}return BatchFormulation}();t.BatchFormulation=L;var M=function(){function FillFormulation(){this.data=[]}return FillFormulation}();t.FillFormulation=M;var W=function(){function FormulationDataType(){}return FormulationDataType}();t.FormulationDataType=W;var N=function(){function ProcessArray(){}return ProcessArray}();t.ProcessArray=N;var B=function(){function ColumnHeaders(){}return ColumnHeaders}();t.ColumnHeaders=B;var G=function(){function FormulationInfo(){}return FormulationInfo}();t.FormulationInfo=G;var q=function(){function FormulationResult(){}return FormulationResult}();t.FormulationResult=q;var V=function(){function StabilitySelection(){}return StabilitySelection}();t.StabilitySelection=V;var U=function(){function StabilityOptions(){}return StabilityOptions}();t.StabilityOptions=U;var z=function(){function StabilityParams(){}return StabilityParams}();t.StabilityParams=z;var Z=function(){function CellProperties(){}return CellProperties}();t.CellProperties=Z;var Q=function(){function StabilityThisData(){}return StabilityThisData}();t.StabilityThisData=Q;var J=function(){function ThisWeekPlotData(){}return ThisWeekPlotData}();t.ThisWeekPlotData=J;var $=function(){function Layout(){}return Layout}();t.Layout=$;var K=function(){function Title(){}return Title}();t.Title=K;var Y=function(){function Stability(){}return Stability}();t.Stability=Y;var X=function(){function StabilityData(){}return StabilityData}();t.StabilityData=X;var ee=function(){function SampleWeek(){}return SampleWeek}();t.SampleWeek=ee},386:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=n(1),i=n(83),s=n(74),l=n(27),c=n(73),p=n(108),u=function(){function DesignComponent(e,t,n,r,a){this.app=e,this.state=t,this.design=n,this.route=r,this.trialService=a,this.DesignSteps=["Parent formulation","Experiment type","Test formulations","Process parameters","Test shedule"],this.design.loadexperimentType(),this.design.loadProcessParameters(),this.design.loadDefaultTestSchedule(),this.design.loadAvailableTests(),this.design.loadExistingExperiment()}return DesignComponent.prototype.ngOnInit=function(){var e=this;this.state.current.name="design",this.route.params.subscribe(function(t){e.trialService.trialConfig.trial_name=t.trialname,"undefined"!=e.trialService.trialConfig.trial_name&&(e.app.selection.project_name=e.trialService.trialConfig.project_name,e.app.selection.subproject_name=e.trialService.trialConfig.subproject_name,e.app.selection.trial_name=e.trialService.trialConfig.trial_name)})},DesignComponent=r([o.Component({moduleId:"module.id",selector:"my-design",template:n(737),styles:[n(747)]}),a("design:paramtypes",[c.AppService,l.StateService,s.DesignService,i.ActivatedRoute,p.TrialService])],DesignComponent)}();t.DesignComponent=u},387:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=n(1),i=n(83),s=n(27),l=n(73),c=n(108),p=n(389),u=function(){function FormulationComponent(e,t,n,r,a){this.app=e,this.state=t,this.route=n,this.trialService=r,this.formulation=a}return FormulationComponent.prototype.ngOnInit=function(){this.formulation.loadFormulationView()},FormulationComponent=r([o.Component({selector:"my-formulation",template:n(743)}),a("design:paramtypes",[l.AppService,s.StateService,i.ActivatedRoute,c.TrialService,p.FormulationService])],FormulationComponent)}();t.FormulationComponent=u},388:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=n(1),i=n(27),s=n(390),l=function(){function StabilityComponent(e,t){this.state=e,this.stability=t,this.showPlots=!1}return StabilityComponent.prototype.ngOnInit=function(){for(var e in this.stability.tests)this.stability.tests[e].divThis=document.getElementById("stability-plots-this-"+this.stability.tests[e].div),this.stability.tests[e].divAll=document.getElementById("stability-plots-all-"+this.stability.tests[e].div);this.stability.stabilityHotDiv=document.getElementById("stability-grid"),this.stability.stabilityPlotDivAll=document.getElementById("stability-plots-all"),this.stability.stabilityPlotDivThis=document.getElementById("stability-plots-this-pH"),this.stability.loadStabilityView()},StabilityComponent=r([o.Component({selector:"my-stability",template:n(745)}),a("design:paramtypes",[i.StateService,s.StabilityService])],StabilityComponent)}();t.StabilityComponent=l},389:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=n(1),i=n(83),s=n(74),l=n(54),c=n(27),p=n(107),u=n(55),d=n(91),h=n(73),f=n(32),m=function(){function FormulationService(e,t,n,r,a,o,i,s){this.app=e,this.state=t,this.stateParams=n,this.ppService=r,this.configService=a,this.design=o,this.experimentSetup=i,this.router=s,this.gotData=!1,this.formulationAllDiv=document.getElementById("formulation-all"),this.processHotDiv=document.getElementById("process-formulation-plot"),this.parameterNames=[],this.executionMode="manual",this.formulationData=new f.FormulationData,Handsontable.renderers.registerRenderer("targetIngredientRenderer",this.targetIngredientRenderer),Handsontable.renderers.registerRenderer("plannedValueRenderer",this.plannedValueRenderer),Handsontable.renderers.registerRenderer("actualValueRenderer",this.actualValueRenderer),Handsontable.renderers.registerRenderer("firstColRenderer",this.firstColRenderer)}return FormulationService.prototype.plannedValueRenderer=function(e,t,n,r,a,o,i){Handsontable.renderers.TextRenderer.apply(this,arguments);var s=a,l=s.replace("planned","actual"),c="#CCE0F1",p="#BBCFE0";e.getSourceData()[n].ingredient&&(e.getSourceData()[n].ingredient&&e.getSourceData()[n].ingredient.match(/ing.*/)&&(c="#F4F6F9",p="#E3E5E8"),e.getSourceData()[n][s]==e.getSourceData()[n][l]?t.style.background=c:""===e.getSourceData()[n][l]||0===e.getSourceData()[n][l]?t.style.background=c:o!=e.getSourceData()[n][l]&&(t.style.background=p))},FormulationService.prototype.targetIngredientRenderer=function(e,t,n,r,a,o,i){Handsontable.renderers.TextRenderer.apply(this,arguments),t.style.fontWeight="bold",t.style.background="#CEC"},FormulationService.prototype.actualValueRenderer=function(e,t,n,r,a,o,i){Handsontable.renderers.TextRenderer.apply(this,arguments);var s=a,l=s.replace("actual","planned"),c="#CCE0F1",p="#BBCFE0";e.getSourceData()[n].ingredient&&(e.getSourceData()[n].ingredient&&e.getSourceData()[n].ingredient.match(/ing.*/)&&(c="#F4F6F9",p="#E3E5E8"),e.getSourceData()[n][l]==e.getSourceData()[n][s]?t.style.background=c:""!==o&&0!==o&&e.getSourceData()[n][l]!=o&&(t.style.background=p))},FormulationService.prototype.firstColRenderer=function(e,t,n,r,a,o,i){Handsontable.renderers.TextRenderer.apply(this,arguments),e.getSourceData()[n].ingredient&&(e.getSourceData()[n].ingredient&&e.getSourceData()[n].ingredient.match(/ing.*/)?t.style.background="#F4F6F9":t.style.background="#CCE0F1")},FormulationService.prototype.switchToStability=function(){},FormulationService.prototype.loadFormulationView=function(){var e=this;if(this.formulationData.gotData)this.setupView();else{var t={TrialName:this.app.selection.trial_name};this.ppService.runProtocolGet7(this.configService.formulationDataProtocol,t).subscribe(function(t){var n=t;e.formulationData.data=n,e.formulationData.gotData=!0,e.formulationData.isDoseResponse=!1;for(var r=0;r<n.processData.length;r++)if(n.processData[r].process_step.match(/.*aliquot.*/)){e.formulationData.isDoseResponse=!0;break}if(e.formulationData.isDoseResponse){e.formulationData.mainBatchFormulation.data=[],e.formulationData.holeFillFormulation.data=[],e.formulationData.mainBatchFormulation=e.formulationData.mainBatchFormulation,e.formulationData.holeFillFormulation=e.formulationData.holeFillFormulation;for(var a=!0,r=0;r<n.processData.length;r++)a?(e.formulationData.mainBatchFormulation.data.push(n.processData[r]),n.processData[r].process_step.match(/.*aliquot.*/)&&(a=!1)):e.formulationData.holeFillFormulation.data.push(n.processData[r])}e.setupView()},function(e){console.log(e)})}},FormulationService.prototype.setupView=function(){this.processData=this.formulationData.data.processData,this.columnHeaders=this.formulationData.data.columnHeaders,this.formulationData.isDoseResponse&&(this.mainBatchFormulation=this.formulationData.mainBatchFormulation.data,this.holeFillFormulation=this.formulationData.holeFillFormulation.data),this.formulationData.isDoseResponse?(this.createDoseResponseHOT(),this.createHoleFillHOT()):this.createNormalProcessHOT()},FormulationService.prototype.printGrid=function(){this.printDiv("print-area")},FormulationService.prototype.printDiv=function(e){this.app.printDiv(e)},FormulationService.prototype.copyPlannedToActual=function(){for(var e=0;e<this.formulationData.data.processData.length;e++)for(var t in this.formulationData.data.processData[e])if(t.match(/.*planned/)){var n=t.replace("planned","actual");""===this.formulationData.data.processData[e][n]&&(this.formulationData.data.processData[e][n]=this.formulationData.data.processData[e][t])}"undefined"!=typeof this.processHot&&null!==this.processHot&&this.processHot.render(),"undefined"!=typeof this.holeFillHot&&null!==this.holeFillHot&&this.holeFillHot.render()},FormulationService.prototype.saveData=function(){var e=this,t=this.formulationData.data.processData,n={TrialName:this.app.selection.trial_name,_bodyParam:"FormData"};this.ppService.runProtocolPost1(this.configService.saveFormulationData,n,t).map(function(t){return console.log("Now create stability steps"),e.ppService.runProtocolGet1(e.configService.createStabilitySteps,n).subscribe(function(e){console.log(e)},function(e){console.log(e)}),t})},FormulationService.prototype.clearActual=function(){for(var e=0;e<this.formulationData.data.processData.length;e++)for(var t in this.formulationData.data.processData[e])t.match(/.*actual/)&&(this.formulationData.data.processData[e][t]="");"undefined"!=typeof this.processHot&&null!==this.processHot&&this.processHot.render(),"undefined"!=typeof this.holeFillHot&&null!==this.holeFillHot&&this.holeFillHot.render()},FormulationService.prototype.getPDF=function(){var e={TrialName:this.app.selection.trial_name,_bodyParam:"FormData"},t=this.formulationData;this.ppService.runProtocolPost(this.configService.pdfBatchSheet,e,t).subscribe(function(e){window.open("https://experiment-unilever-dev.bioviaonline.com:9943/LabAutomation/BatchSheet","_blank")},function(e){console.log(e)})},FormulationService.prototype.upload=function(e){console.log(e)},FormulationService.prototype.uploadAndRun=function(e){console.log(e)},FormulationService.prototype.getData=function(e){var t=this,n={TrialName:e};this.ppService.runProtocolGet8(this.configService.formulationProtocol,n).subscribe(function(e){var n=e;t.data=n,t.gotData=!0},function(e){console.log(e)})},FormulationService.prototype.createDoseResponseHOT=function(){var e=[],t=[];e.push(" "),e.push("Material code"),e.push("RM used & Lot No."),e.push("% activity of RM"),e.push("Unit of measure");var n={data:"ingredient",readOnly:!0,width:300};t.push(n),t.push({data:"material_code",readOnly:!0,width:200}),t.push({data:"rm_used_lot_no",width:200}),t.push({data:"percent_activity",readOnly:!0,width:200}),t.push({data:"unit_of_measure",readOnly:!0,width:200});var r=!1,a=!1,o=!1;for(var i in this.formulationData.data.columnHeaders[0].columns){var s=this.formulationData.data.columnHeaders[0].columns[i];if(r&&a&&o)break;if(" "==s){var l=void 0;l={data:s,width:160,type:"string",readOnly:!1}}if(s.match(/.*-planned.*/)||s.match(/.*-actual.*/)||s.match(/.*-percent.*/)){var l=void 0;l={data:s,width:160,type:"numeric",readOnly:!1},s.match(/.*planned.*/)&&!a?(e.push("Planned"),l.readOnly=!0,a=!0,l.format="0.0[00000000]",t.push(l)):s.match(/.*percent.*/)&&!r?(l.readOnly=!0,e.push("Percent"),r=!0,l.format="0.0[00000000]",t.push(l)):s.match(/.*actual.*/)&&!o&&(l.editor="numeric",e.push("Actual"),o=!0,l.format="0.0[00000000]",t.push(l))}}var c=[];for(var p in this.formulationData.mainBatchFormulation.data)this.formulationData.mainBatchFormulation.data[p]&&this.formulationData.mainBatchFormulation.data[p].process_step&&this.formulationData.mainBatchFormulation.data[p].process_step.match(/^ing/)&&c.push(p);this.formulationData.mainBatchFormulation.data.push({}),this.formulationData.mainBatchFormulation.data.push({}),this.processHotDiv=document.getElementById("main-batch-formulation-table");var u={data:this.formulationData.mainBatchFormulation.data,colHeaders:e,headerTooltips:{rows:!0,columns:!0},manualColumnResize:!0,afterChange:function(e,t){},columns:t,cells:function(e,t,n){var r;return r={renderer:""},n.match(/.*planned/)||n.match(/.*percent/)?r.renderer="plannedValueRenderer":n.match(/.*actual/)?r.renderer="actualValueRenderer":r.renderer="firstColRenderer",r},columnSummary:[{destinationColumn:5,destinationRow:0,reversedRowCoords:!0,type:"sum",ranges:c,forceNumeric:!0},{destinationColumn:6,destinationRow:0,reversedRowCoords:!0,type:"sum",ranges:c,forceNumeric:!0},{destinationColumn:7,destinationRow:0,reversedRowCoords:!0,type:"sum",ranges:c,forceNumeric:!0}]};this.processHot=new Handsontable(this.processHotDiv,u),this.processHot.render()},FormulationService.prototype.createHoleFillHOT=function(){console.log("createHoleFillHOT");var e=[],t=[];e.push(" "),e.push("Material code"),e.push("RM used & Lot No."),e.push("% activity of RM"),e.push("Unit of measure");var n={data:"ingredient",readOnly:!0};t.push(n),t.push({data:"material_code",readOnly:!0}),t.push({data:"rm_used_lot_no"}),t.push({data:"percent_activity",readOnly:!0}),t.push({data:"unit_of_measure",readOnly:!0});var r=!1,a=!1,o=!1;for(var i in this.formulationData.data.columnHeaders[0].columns){var s=this.formulationData.data.columnHeaders[0].columns[i];if(s.match(/.*-planned.*/)||s.match(/.*-actual.*/)||s.match(/.*-percent.*/)){var l=void 0;l={data:s,type:"numeric"},s.match(/.*planned.*/)?(e.push("Planned"),l.readOnly=!0,a=!0,l.format="0.0[00000000]",t.push(l)):s.match(/.*percent.*/)?(l.readOnly=!0,e.push("Percent"),r=!0,l.format="0.0[00000000]",t.push(l)):s.match(/.*actual.*/)&&(l.editor="numeric",e.push("Actual"),o=!0,l.format="0.0[00000000]",t.push(l))}}var c=[],p=[],u=[];p.push(" "),u.push(" "),p.push("Material code"),p.push("RM used & Lot No."),p.push("% activity of RM"),p.push("Unit of measure"),u.push(" "),u.push(" "),u.push(" "),u.push(" ");for(var d=0;d<this.columnHeaders[0].columns.length;d++){var h=void 0;h=this.columnHeaders[0].columns[d].match(/(.*)-(.*)/),"undefined"!=typeof h&&null!==h&&("percent"===h[2]&&p.push({label:this.capitalizeFirstLetter(h[1]),colspan:2}),u.push(this.capitalizeFirstLetter(h[2])))}c.push(p),c.push(u),this.holeFillHotDiv=document.getElementById("hole-fill-formulation-table");var f={data:this.formulationData.holeFillFormulation.data,nestedHeaders:c,contextMenu:!0,afterChange:function(e,t){},columns:t,cells:function(e,t,n){var r;return r={renderer:""},n.match(/.*planned/)||n.match(/.*percent/)?r.renderer="plannedValueRenderer":n.match(/.*actual/)?r.renderer="actualValueRenderer":r.renderer="firstColRenderer",r}};console.log("hotSettings"),console.dir(f),this.holeFillHot=new Handsontable(this.holeFillHotDiv,f)},FormulationService.prototype.createNormalProcessHOT=function(){var e=[],t=[];e.push(" ");var n={data:"ingredient",readOnly:!0};t.push(n),t.push({data:"materialcode",readOnly:!0}),t.push({data:"rm_used_lot_no"}),t.push({data:"percentactive",readOnly:!0}),t.push({data:"unit_of_measure",readOnly:!0});var r=[],a=[];for(var o in this.processData)if(this.processData[o]&&this.processData[o].process_step&&this.processData[o].process_step.match(/^ing/)){var i=[];i.push(parseInt(o)),a.push(i)}for(var s=0;s<this.columnHeaders[0].columns.length;s++)if(this.columnHeaders[0].columns[s].match(/.*-planned.*/)||this.columnHeaders[0].columns[s].match(/.*-percent.*/)||this.columnHeaders[0].columns[s].match(/.*-actual.*/)){e.push(this.columnHeaders[0].columns[s]);var l=void 0;l={data:this.columnHeaders[0].columns[s],type:"numeric"},this.columnHeaders[0].columns[s].match(/.*-planned.*/)||this.columnHeaders[0].columns[s].match(/.*-percent.*/)?l.readOnly=!0:l.editor="numeric",l.format="0.0[00000000]",t.push(l),r.push({destinationColumn:4+s,destinationRow:0,reversedRowCoords:!0,type:"sum",ranges:a,forceNumeric:!0})}var c=[],p=[],u=[];p.push(" "),u.push(" "),p.push("Material code"),p.push("RM used & Lot No."),p.push("% activity of RM"),p.push("Unit of measure"),u.push(" "),u.push(" "),u.push(" "),u.push(" "),console.log("this.columnHeaders[0]"),console.dir(this.columnHeaders[0]);for(var s=0;s<this.columnHeaders[0].columns.length;s++){var d=this.columnHeaders[0].columns[s].match(/(.*)-(.*)/);console.log("myMatch!!"),console.dir(d),"undefined"!=typeof d&&null!==d?("percent"===d[2]&&(console.log("***topLine.push***"),
p.push({label:this.capitalizeFirstLetter(d[1]),colspan:2})),"percent"!==d[2]&&"planned"!==d[2]&&"actual"!==d[2]||u.push(this.capitalizeFirstLetter(d[2]))):console.log("**************continue*************")}console.log("top line"),console.dir(p),console.log("secondLine"),console.dir(u),c.push(p),c.push(u),this.processData.push({}),this.processData.push({}),this.processHotDiv=document.getElementById("process-formulation-table");var h={data:this.processData,nestedHeaders:c,columns:t,columnSummary:r,cells:function(e,t,n){var r;return r={renderer:""},"string"!=typeof n?r:(n.match(/.*planned/)||n.match(/.*percent/)?r.renderer="plannedValueRenderer":n.match(/.*actual/)?r.renderer="actualValueRenderer":r.renderer="firstColRenderer",r)}};console.log("hotSettings!!!"),console.dir(h),this.processHotDiv.innerHTML="",this.processHot=new Handsontable(this.processHotDiv,h)},FormulationService.prototype.capitalizeFirstLetter=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},FormulationService=r([o.Injectable(),a("design:paramtypes",[h.AppService,c.StateService,p.StateParamsService,u.HTTPService,d.ConfigService,s.DesignService,l.ExperimentSetupService,i.Router])],FormulationService)}();t.FormulationService=m},390:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=n(1),i=n(55),s=n(73),l=n(91),c=n(108),p=n(107),u=n(32),d=function(){function StabilityService(e,t,n,r,a){this.app=e,this.ppService=t,this.configService=n,this.trialService=r,this.stateParams=a,this.gotData=!1,this.stabilityHotDiv=document.getElementById("stability-grid"),this.stabilityPlotDivAll=document.getElementById("stability-plots-all"),this.stabilityPlotDivThis=document.getElementById("stability-plots-this-pH"),this.executionMode="manual",this.changesMade=!1,this.showPlots=!1,this.showPlotsState="Show Plots",this.tests={pH:{title:"pH",div:"pH"},visc2:{title:"Viscosity @ 2/s",div:"visc2"},visc21:{title:"Viscosity @ 21/s",div:"visc21"},visc106:{title:"Viscosity @ 106/s",div:"visc106"}},this.completeData={},this.selection={testWeek:"1",plotStyle:"All weeks"},Handsontable.renderers.registerRenderer("appearanceRenderer",this.appearanceRenderer),this.stabilityData=new u.Stability,this.selection.plotStyle="All weeks",this.selection.testWeek="Week1",this.options=new u.StabilityOptions,this.stabilityData=new u.Stability,this.selection=new u.StabilitySelection,this.options=new u.StabilityOptions}return StabilityService.prototype.getData=function(e){},StabilityService.prototype.loadStabilityView=function(){var e=this;if(this.stabilityData.gotData)this.setupView();else{var t={TrialName:this.app.selection.trial_name};this.ppService.runProtocolGetStabilityView(this.configService.stabilitySetupProtocol,t).then(function(n){var r=n;e.stabilityData.gotData=!0,e.stabilityData.data=r,e.selection.testWeek=r.setup.testWeeks[0],e.ppService.runProtocolGetEnteredStabilityData(e.configService.getEnteredStabilityDaya,t).then(function(t){var n=t;"undefined"!=typeof n&&(e.stabilityData.enteredData=n[0]),e.setupView()}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})}},StabilityService.prototype.setupView=function(){this.options.testWeeks=this.stabilityData.data.setup.testWeeks,this.options.plotStyles=["Selected week","All weeks"],this.plotStyle=this.options.plotStyles[1],this.createStabGrid(this.selection.testWeek)},StabilityService.prototype.getThisData=function(e){void 0===this.stabilityData.enteredData&&(this.stabilityData.enteredData=[]);var t=this.stabilityData.data.samples["Week"+e],n=[];for(var r in t)for(var a in t[r].test){var o=!0,i=t[r].test[a].test;for(var s in n)n[s]===i&&(o=!1);o&&n.push(i)}void 0===this.stabilityData.enteredData["Week"+e]&&(this.stabilityData.enteredData["Week"+e]={});for(var s in this.stabilityData.enteredData){this.stabilityData.enteredData[s];for(var r in t)for(var a in n){void 0===this.stabilityData.enteredData["Week"+e][n[a]]&&(this.stabilityData.enteredData["Week"+e][n[a]]={});for(var l in t[r].temperature)"undefined"==typeof this.stabilityData.enteredData["Week"+e][n[a]][r+"=="+t[r].temperature[l].temperature]&&(this.stabilityData.enteredData["Week"+e][n[a]][r+"=="+t[r].temperature[l].temperature]="")}}},StabilityService.prototype.appearanceRenderer=function(e,t,n,r,a,o,i){Handsontable.AutocompleteCell.renderer.apply(this,arguments),"Red"===o?t.style.background="red":"Fail - Amber"===o||"Pass - Amber"===o?t.style.background="orange":"Green"===o&&(t.style.background="green")},StabilityService.prototype.createStabGrid=function(e){var t=this;this.getThisData(e);var n=[],r=[],a=[];for(var o in this.stabilityData.enteredData["Week"+e])for(var i in this.stabilityData.enteredData["Week"+e][o]){var s=!0;for(var l in n)i===n[l]&&(s=!1);s&&(n.push(i),r.push({data:i}),a.push("55"))}var c=[],p=[],d=[];for(var h in this.stabilityData.data.samples["Week"+e]){var f=this.stabilityData.data.samples["Week"+e][h],m=0;for(var g in f.temperature)p.push(f.temperature[g].temperature),m+=1;c.push({label:h,colspan:m})}d.push(c),d.push(p);var b=[],v=[],y=["Appearance","Viscosity @ 2/s","Viscosity @ 21/s","Viscosity @ 106/s","pH"];for(var S in y)b.push(this.stabilityData.enteredData["Week"+e][y[S]]),v.push(y[S]);"undefined"==typeof this.stabilityHot?this.stabilityHot=new Handsontable(this.stabilityHotDiv,{data:b,colHeaders:n,nestedHeaders:d,rowHeaders:v,colWidths:a,rowHeaderWidth:120,afterChange:function(e,n){"loadData"!==n&&(t.loadStabilityPlots(),t.changesMade=!0)},cells:function(e,t,n){var r;return r=new u.CellProperties,"Appearance"===v[e]&&(r.type="dropdown",r.source=["Red","Fail - Amber","Pass - Amber","Green"],r.renderer="appearanceRenderer"),r}}):this.stabilityHot.updateSettings({nestedHeaders:d,data:b,columns:r}),this.loadStabilityPlots()},StabilityService.prototype.loadStabilityPlots=function(){if("undefined"!=typeof this.stabilityData){var e=[];for(var t in this.stabilityData.data.samples)for(var n in this.tests){var r=[];for(var a in this.stabilityData.data.samples[t]){var o=void 0;if(o=this.getThisWeekPlotData(this.selection.testWeek,n,a),"undefined"!=typeof o){var i={x:o.x,y:o.y,name:a,xaxis:"x1",yaxis:"y1"};r.push(i)}}e[n]=r}var s=[];for(var n in this.tests){var l=void 0;l=new u.Layout,l.title=this.tests[n].title,l.height=500,l.width=800,"pH"===this.tests[n].title?l.yaxis={title:"pH"}:l.yaxis={title:"Viscosity (cP)"},"Selected week"===this.plotStyle&&(console.log("Selected week"),l.xaxis={title:"Storage temperature"},Plotly.newPlot(this.tests[n].divThis,e[n],l,{modeBarButtonsToRemove:["sendDataToCloud"],displaylogo:!1,doubleClick:"reset+autosize"})),"All weeks"===this.plotStyle&&(console.log("All weeks"),l.xaxis={title:"Test week"},Plotly.newPlot(this.tests[n].divAll,s[n],l,{modeBarButtonsToRemove:["sendDataToCloud"],displaylogo:!1,doubleClick:"reset+autosize"}),console.log("bye"))}}},StabilityService.prototype.getThisWeekPlotData=function(e,t,n){var r,a=this.tests[t].title;r=new u.ThisWeekPlotData;var o=[],i=[],s=[];if("undefined"!=typeof this.stabilityData.enteredData["Week"+e]&&"undefined"!=typeof this.stabilityData.enteredData["Week"+e][a]){for(var l in this.stabilityData.enteredData["Week"+e][a])if(0===l.lastIndexOf(n)){var c=void 0;c=new u.StabilityThisData,c.x=l.substring(l.lastIndexOf("=")+1),"RT"===c.x&&(c.x="21"),c.y=this.stabilityData.enteredData["Week"+e][a][l],o.push(c)}o.sort(function(e,t){return+e.x>+t.x?1:+e.x<+t.x?-1:0});for(var p in o)i.push(o[p].x),s.push(o[p].y);return r.x=i,r.y=s,r}},StabilityService.prototype.MoveDateTime=function(e){for(var t=-1,n=0;n<this.options.testWeeks.length;n++)this.options.testWeeks[n]===this.selection.testWeek&&(t=n);t>=0&&(t+=e),t>=0&&t<this.options.testWeeks.length&&(this.selection.testWeek=this.options.testWeeks[t]),this.loadStabilityPlots()},StabilityService.prototype.NewTestWeek=function(){var e=!1,t=this.newTestWeek;for(var n in this.options.testWeeks)this.options.testWeeks[n]==t&&(e=!0);e&&alert("Week already exists")},StabilityService.prototype.printGrid=function(){this.app.printDiv("stability-grid")},StabilityService.prototype.createNestedHeaders=function(){for(var e,t=0;t<this.selection.tests.length;t++)e.push({label:this.selection.tests[t],colspan:this.selection.temperatures.length});for(var n,r=0;r<this.selection.tests.length;r++)for(var t=0;t<this.selection.temperatures.length;t++)n.push(this.selection.temperatures[t]);var a=[e,n];return a},StabilityService.prototype.getAllWeeksPlotData=function(e,t){var n=this.tests[e].title;if("undefined"!=typeof this.stabilityData){var r={};for(var a in this.stabilityData.data.samples)for(var o in this.stabilityData.enteredData[a])if(o===n)for(var i in this.stabilityData.enteredData[a][o])if(0===i.indexOf(t)){"undefined"==typeof r[i]&&(r[i]=[]);var s=this.stabilityData.enteredData[a][o][i];r[i].push({week:a,value:s})}return r}},StabilityService.prototype.saveDataToEKB=function(){var e={TrialName:this.app.selection.trial_name,_bodyParam:"FormData"},t=this.stabilityData.enteredData;"undefined"!=typeof t&&null!==t&&this.ppService.runProtocolPost1(this.configService.saveStabilityToExperimentProtocol,e,t).subscribe(function(e){},function(e){return console.log(e)})},StabilityService.prototype.changeMode=function(){console.log("changeMode"),"manual"==this.executionMode?this.executionMode="auto":this.executionMode="manual"},StabilityService.prototype.showhidePlots=function(){console.log("showhidePlots"),this.showPlots=!this.showPlots,this.showPlots?this.showPlotsState="Hide Plots":this.showPlotsState="Show Plots"},StabilityService=r([o.Injectable(),a("design:paramtypes",[s.AppService,i.HTTPService,l.ConfigService,c.TrialService,p.StateParamsService])],StabilityService)}();t.StabilityService=d},421:function(e,t,n){"use strict";var r=n(1),a=n(199),o=n(96),i=n(115);n.d(t,"a",function(){return l});var s=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},l=function(e){function DraggableComponent(t,n,a,o){e.call(this,t,n,a,o),this.onDragStart=new r.EventEmitter,this.onDragEnd=new r.EventEmitter,this.onDragSuccessCallback=new r.EventEmitter,this._defaultCursor=this._elem.style.cursor,this.dragEnabled=!0}return s(DraggableComponent,e),Object.defineProperty(DraggableComponent.prototype,"draggable",{set:function(e){this.dragEnabled=!!e},enumerable:!0,configurable:!0}),Object.defineProperty(DraggableComponent.prototype,"dropzones",{set:function(e){this.dropZones=e},enumerable:!0,configurable:!0}),Object.defineProperty(DraggableComponent.prototype,"effectallowed",{set:function(e){this.effectAllowed=e},enumerable:!0,configurable:!0}),Object.defineProperty(DraggableComponent.prototype,"effectcursor",{set:function(e){this.effectCursor=e},enumerable:!0,configurable:!0}),DraggableComponent.prototype._onDragStartCallback=function(e){this._dragDropService.isDragged=!0,this._dragDropService.dragData=this.dragData,this._dragDropService.onDragSuccessCallback=this.onDragSuccessCallback,this._elem.classList.add(this._config.onDragStartClass),this.onDragStart.emit({dragData:this.dragData,mouseEvent:e})},DraggableComponent.prototype._onDragEndCallback=function(e){this._dragDropService.isDragged=!1,this._dragDropService.dragData=null,this._dragDropService.onDragSuccessCallback=null,this._elem.classList.remove(this._config.onDragStartClass),this.onDragEnd.emit({dragData:this.dragData,mouseEvent:e})},DraggableComponent.decorators=[{type:r.Directive,args:[{selector:"[dnd-draggable]"}]}],DraggableComponent.ctorParameters=function(){return[{type:r.ElementRef},{type:i.c},{type:o.c},{type:r.ChangeDetectorRef}]},DraggableComponent.propDecorators={draggable:[{type:r.Input,args:["dragEnabled"]}],onDragStart:[{type:r.Output}],onDragEnd:[{type:r.Output}],dragData:[{type:r.Input}],onDragSuccessCallback:[{type:r.Output,args:["onDragSuccess"]}],dropzones:[{type:r.Input,args:["dropZones"]}],effectallowed:[{type:r.Input,args:["effectAllowed"]}],effectcursor:[{type:r.Input,args:["effectCursor"]}],dragImage:[{type:r.Input}],cloneItem:[{type:r.Input}]},DraggableComponent}(a.a)},422:function(e,t,n){"use strict";var r=n(1),a=n(199),o=n(96),i=n(115);n.d(t,"a",function(){return l});var s=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},l=function(e){function DroppableComponent(t,n,a,o){e.call(this,t,n,a,o),this.onDropSuccess=new r.EventEmitter,this.onDragEnter=new r.EventEmitter,this.onDragOver=new r.EventEmitter,this.onDragLeave=new r.EventEmitter,this.dropEnabled=!0}return s(DroppableComponent,e),Object.defineProperty(DroppableComponent.prototype,"droppable",{set:function(e){this.dropEnabled=!!e},enumerable:!0,configurable:!0}),Object.defineProperty(DroppableComponent.prototype,"allowdrop",{set:function(e){this.allowDrop=e},enumerable:!0,configurable:!0}),Object.defineProperty(DroppableComponent.prototype,"dropzones",{set:function(e){this.dropZones=e},enumerable:!0,configurable:!0}),Object.defineProperty(DroppableComponent.prototype,"effectallowed",{set:function(e){this.effectAllowed=e},enumerable:!0,configurable:!0}),Object.defineProperty(DroppableComponent.prototype,"effectcursor",{set:function(e){this.effectCursor=e},enumerable:!0,configurable:!0}),DroppableComponent.prototype._onDragEnterCallback=function(e){this._dragDropService.isDragged&&(this._elem.classList.add(this._config.onDragEnterClass),this.onDragEnter.emit({dragData:this._dragDropService.dragData,mouseEvent:e}))},DroppableComponent.prototype._onDragOverCallback=function(e){this._dragDropService.isDragged&&(this._elem.classList.add(this._config.onDragOverClass),this.onDragOver.emit({dragData:this._dragDropService.dragData,mouseEvent:e}))},DroppableComponent.prototype._onDragLeaveCallback=function(e){this._dragDropService.isDragged&&(this._elem.classList.remove(this._config.onDragOverClass),this._elem.classList.remove(this._config.onDragEnterClass),this.onDragLeave.emit({dragData:this._dragDropService.dragData,mouseEvent:e}))},DroppableComponent.prototype._onDropCallback=function(e){this._dragDropService.isDragged&&(this.onDropSuccess.emit({dragData:this._dragDropService.dragData,mouseEvent:e}),this._dragDropService.onDragSuccessCallback&&this._dragDropService.onDragSuccessCallback.emit({dragData:this._dragDropService.dragData,mouseEvent:e}),this._elem.classList.remove(this._config.onDragOverClass),this._elem.classList.remove(this._config.onDragEnterClass))},DroppableComponent.decorators=[{type:r.Directive,args:[{selector:"[dnd-droppable]"}]}],DroppableComponent.ctorParameters=function(){return[{type:r.ElementRef},{type:i.c},{type:o.c},{type:r.ChangeDetectorRef}]},DroppableComponent.propDecorators={droppable:[{type:r.Input,args:["dropEnabled"]}],onDropSuccess:[{type:r.Output}],onDragEnter:[{type:r.Output}],onDragOver:[{type:r.Output}],onDragLeave:[{type:r.Output}],allowdrop:[{type:r.Input,args:["allowDrop"]}],dropzones:[{type:r.Input,args:["dropZones"]}],effectallowed:[{type:r.Input,args:["effectAllowed"]}],effectcursor:[{type:r.Input,args:["effectCursor"]}]},DroppableComponent}(a.a)},423:function(e,t,n){"use strict";var r=n(1),a=n(199),o=n(96),i=n(115);n.d(t,"a",function(){return l}),n.d(t,"b",function(){return c});var s=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},l=function(e){function SortableContainer(t,n,r,a,o){e.call(this,t,n,r,a),this._sortableDataService=o,this._sortableData=[],this.dragEnabled=!1}return s(SortableContainer,e),Object.defineProperty(SortableContainer.prototype,"draggable",{set:function(e){this.dragEnabled=!!e},enumerable:!0,configurable:!0}),Object.defineProperty(SortableContainer.prototype,"sortableData",{get:function(){return this._sortableData},set:function(e){this._sortableData=e,this.dropEnabled=!!this._sortableData},enumerable:!0,configurable:!0}),Object.defineProperty(SortableContainer.prototype,"dropzones",{set:function(e){this.dropZones=e},enumerable:!0,configurable:!0}),SortableContainer.prototype._onDragEnterCallback=function(e){if(this._sortableDataService.isDragged){var t=this._sortableDataService.sortableContainer._sortableData[this._sortableDataService.index];this._sortableData.indexOf(t)===-1&&(this._sortableDataService.sortableContainer._sortableData.splice(this._sortableDataService.index,1),0===this._sortableDataService.sortableContainer._sortableData.length&&(this._sortableDataService.sortableContainer.dropEnabled=!0),this._sortableData.unshift(t),this._sortableDataService.sortableContainer=this,this._sortableDataService.index=0),this.detectChanges()}},SortableContainer.decorators=[{type:r.Directive,args:[{selector:"[dnd-sortable-container]"}]}],SortableContainer.ctorParameters=function(){return[{type:r.ElementRef},{type:i.c},{type:o.c},{type:r.ChangeDetectorRef},{type:i.e}]},SortableContainer.propDecorators={draggable:[{type:r.Input,args:["dragEnabled"]}],sortableData:[{type:r.Input}],dropzones:[{type:r.Input,args:["dropZones"]}]},SortableContainer}(a.a),c=function(e){function SortableComponent(t,n,a,o,i,s){e.call(this,t,n,a,s),this._sortableContainer=o,this._sortableDataService=i,this.onDragSuccessCallback=new r.EventEmitter,this.onDragStartCallback=new r.EventEmitter,this.onDragOverCallback=new r.EventEmitter,this.onDragEndCallback=new r.EventEmitter,this.onDropSuccessCallback=new r.EventEmitter,this.dropZones=this._sortableContainer.dropZones,this.dragEnabled=!0,this.dropEnabled=!0}return s(SortableComponent,e),Object.defineProperty(SortableComponent.prototype,"draggable",{set:function(e){this.dragEnabled=!!e},enumerable:!0,configurable:!0}),Object.defineProperty(SortableComponent.prototype,"droppable",{set:function(e){this.dropEnabled=!!e},enumerable:!0,configurable:!0}),Object.defineProperty(SortableComponent.prototype,"effectallowed",{set:function(e){this.effectAllowed=e},enumerable:!0,configurable:!0}),Object.defineProperty(SortableComponent.prototype,"effectcursor",{set:function(e){this.effectCursor=e},enumerable:!0,configurable:!0}),SortableComponent.prototype._onDragStartCallback=function(e){this._sortableDataService.isDragged=!0,this._sortableDataService.sortableContainer=this._sortableContainer,this._sortableDataService.index=this.index,this._sortableDataService.markSortable(this._elem),this._dragDropService.isDragged=!0,this._dragDropService.dragData=this.dragData,this._dragDropService.onDragSuccessCallback=this.onDragSuccessCallback,this.onDragStartCallback.emit(this._dragDropService.dragData)},SortableComponent.prototype._onDragOverCallback=function(e){this._sortableDataService.isDragged&&this._elem!==this._sortableDataService.elem&&(this._sortableDataService.sortableContainer=this._sortableContainer,this._sortableDataService.index=this.index,this._sortableDataService.markSortable(this._elem),this.onDragOverCallback.emit(this._dragDropService.dragData))},SortableComponent.prototype._onDragEndCallback=function(e){this._sortableDataService.isDragged=!1,this._sortableDataService.sortableContainer=null,this._sortableDataService.index=null,this._sortableDataService.markSortable(null),this._dragDropService.isDragged=!1,this._dragDropService.dragData=null,this._dragDropService.onDragSuccessCallback=null,this.onDragEndCallback.emit(this._dragDropService.dragData)},SortableComponent.prototype._onDragEnterCallback=function(e){if(this._sortableDataService.isDragged&&(this._sortableDataService.markSortable(this._elem),this.index!==this._sortableDataService.index||this._sortableDataService.sortableContainer.sortableData!==this._sortableContainer.sortableData)){var t=this._sortableDataService.sortableContainer.sortableData[this._sortableDataService.index];this._sortableDataService.sortableContainer.sortableData.splice(this._sortableDataService.index,1),0===this._sortableDataService.sortableContainer.sortableData.length&&(this._sortableDataService.sortableContainer.dropEnabled=!0),this._sortableContainer.sortableData.splice(this.index,0,t),this._sortableContainer.dropEnabled&&(this._sortableContainer.dropEnabled=!1),this._sortableDataService.sortableContainer=this._sortableContainer,this._sortableDataService.index=this.index}},SortableComponent.prototype._onDropCallback=function(e){this._sortableDataService.isDragged&&(this.onDropSuccessCallback.emit(this._dragDropService.dragData),this._dragDropService.onDragSuccessCallback&&this._dragDropService.onDragSuccessCallback.emit(this._dragDropService.dragData),this._sortableContainer.detectChanges())},SortableComponent.decorators=[{type:r.Directive,args:[{selector:"[dnd-sortable]"}]}],SortableComponent.ctorParameters=function(){return[{type:r.ElementRef},{type:i.c},{type:o.c},{type:l},{type:i.e},{type:r.ChangeDetectorRef}]},SortableComponent.propDecorators={index:[{type:r.Input,args:["sortableIndex"]}],draggable:[{type:r.Input,args:["dragEnabled"]}],droppable:[{type:r.Input,args:["dropEnabled"]}],dragData:[{type:r.Input}],effectallowed:[{type:r.Input,args:["effectAllowed"]}],effectcursor:[{type:r.Input,args:["effectCursor"]}],onDragSuccessCallback:[{type:r.Output,args:["onDragSuccess"]}],onDragStartCallback:[{type:r.Output,args:["onDragStart"]}],onDragOverCallback:[{type:r.Output,args:["onDragOver"]}],onDragEndCallback:[{type:r.Output,args:["onDragEnd"]}],onDropSuccessCallback:[{type:r.Output,args:["onDropSuccess"]}]},SortableComponent}(a.a)},456:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=n(1),i=n(120),s=n(300),l=n(208),c=n(573),p=n(579),u=n(386),d=n(575),h=n(574),f=n(577),m=n(576),g=n(578),b=n(387),v=n(388),y=n(581),S=n(580),D=n(582),_=n(746),P=function(){function AppModule(){}return AppModule=r([o.NgModule({imports:[i.BrowserModule,s.FormsModule,l.HttpModule,D.AppRoutingModule,_.DndModule.forRoot()],declarations:[c.AppComponent,p.HeaderComponent,u.DesignComponent,b.FormulationComponent,d.ParentFormulationComponent,h.ExperimentType,f.TestFormulations,m.ProcessParameters,g.TestShedule,v.StabilityComponent,y.UniquePipe,S.ContainPipe],providers:[],bootstrap:[c.AppComponent]}),a("design:paramtypes",[])],AppModule)}();t.AppModule=P},54:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},a=this&&this.__decorate||function(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(1),s=n(32),l=function(e){function ExperimentSetupService(){e.call(this)}return r(ExperimentSetupService,e),ExperimentSetupService=a([i.Injectable(),o("design:paramtypes",[])],ExperimentSetupService)}(s.DataService);t.ExperimentSetupService=l},55:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=n(1),i=n(208),s=n(0);n(427),n(428);var l=function(){function HTTPService(e){this.http=e,this.ppServer="srv-ict-14652.scnsoft.com",this.port=9944,this.sslPort=9943,this.tmpProtocolPath="LabAutomation/LaundryLiquids/design/ControlPanel",this.tmpUrl="https://"+this.ppServer+":"+this.sslPort+"/protocols/"+this.tmpProtocolPath}return HTTPService.prototype.runProtocolGet=function(e,t){console.dir(t);var n="http://"+this.ppServer+":"+this.port+"/protocols/"+e,r=new i.URLSearchParams;for(var a in t)r.set(a,t[a]);return this.http.get(n,{search:r}).map(this.extract).catch(this.handleError)},HTTPService.prototype.runProtocolGet0=function(e,t){return console.log("runProtocolGet0"),this.http.get("assets/json/ControlPanel.json").map(this.extract).catch(this.handleError)},HTTPService.prototype.runProtocolGetDesignData=function(e,t){return console.log("runProtocolGetDesignData"),this.http.get("assets/json/protocol.responce.json").map(this.extract).catch(this.handleError)},HTTPService.prototype.runProtocolGet1=function(e,t){return console.log("runProtocolGet1"),this.http.get("assets/json/protocol.responce.json").map(this.extract).catch(this.handleError)},HTTPService.prototype.runProtocolGet2=function(e,t){return console.log("runProtocolGet2"),this.http.get("assets/json/experimentType.json").map(this.extract).catch(this.handleError)},HTTPService.prototype.runProtocolGet3=function(e,t){return console.log("runProtocolGet3"),this.http.get("assets/json/processparameters.json").map(this.extract).catch(this.handleError)},HTTPService.prototype.runProtocolGet4=function(e,t){return console.log("runProtocolGet4"),this.http.get("assets/json/avaliabletests.json").map(this.extract).catch(this.handleError)},HTTPService.prototype.runProtocolGet5=function(e,t){return console.log("runProtocolGet5"),this.http.get("assets/json/experiment2json.json").map(this.extract).catch(this.handleError)},HTTPService.prototype.runProtocolGet6=function(e,t){return console.log("runProtocolGet6"),this.http.get("assets/json/testshedule.json").map(this.extract).catch(this.handleError)},HTTPService.prototype.runProtocolGet7=function(e,t){return console.log("runProtocolGet7"),this.http.get("assets/json/formulationdata.json").map(this.extract).catch(this.handleError)},HTTPService.prototype.runProtocolGet8=function(e,t){return console.log("runProtocolGet8"),this.http.get("assets/json/formulationdata.json").map(this.extract).catch(this.handleError)},HTTPService.prototype.runProtocolGetStabilityView=function(e,t){return this.http.get("assets/json/stabilitySetupProtocol.json").toPromise().then(this.extract)},HTTPService.prototype.runProtocolGetEnteredStabilityData=function(e,t){return this.http.get("assets/json/getEnteredStabilityData.json").toPromise().then(function(e){return e.json()})},HTTPService.prototype.runProtocolGetStabilityData=function(e,t){return console.log("runProtocolGetStabilityDaya"),this.http.get("assets/json/StabilityData.json").map(this.extract2).catch(this.handleError)},HTTPService.prototype.runProtocolPost=function(e,t,n){console.log("runProtocolPost"),console.log("data"),console.dir(n),console.log("params"),console.dir(t);var r=new i.URLSearchParams;for(var a in t)r.set(a,t[a]);return this.http.post("http://"+this.ppServer+":"+this.port+"/auth/launchjob?_protocol=Protocols/"+e,n,{search:r}).map(this.extract).catch(this.handleError)},HTTPService.prototype.runProtocolPost1=function(e,t,n){return console.log("runProtocolPost1"),this.http.get("assets/json/allformulations.json").map(this.extract).catch(this.handleError)},HTTPService.prototype.extract=function(e){var t=e.json();return t||{}},HTTPService.prototype.extract1=function(e){var t=e.json();return console.dir(t),t||{}},HTTPService.prototype.extract2=function(e){var t=e.json();return t||{}},HTTPService.prototype.extractData=function(e){var t=e.json().data;return console.log(t),t||{}},HTTPService.prototype.handleError=function(e){var t;if(e instanceof i.Response){var n=e.json()||"",r=n.error||JSON.stringify(n);t=e.status+" - "+(e.statusText||"")+" "+r}else t=e.message?e.message:e.toString();return console.error(t),s.Observable.throw(t)},HTTPService.prototype.getPPUser=function(){return this.http.get("assets/json/currentuser.xml").map(this.extract).catch(this.handleError)},HTTPService.prototype.fileUpload=function(e){var t=new FormData;return t.append("uploadFile",e,e.name),this.http.post("http://"+this.ppServer+":"+this.port+"/jobs/",t).map(function(e){var t=e.json();return t}).catch(function(e){return s.Observable.throw(e)})},HTTPService=r([o.Injectable(),a("design:paramtypes",[i.Http])],HTTPService)}();t.HTTPService=l},573:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=n(1),i=n(83);n(734),n(733),n(735);var s=n(27),l=n(107),c=n(55),p=n(91),u=n(75),d=n(54),h=n(108),f=n(73),m=n(74),g=n(389),b=n(390),v=function(){function AppComponent(e,t,n,r,a,o,i,s,l,c){this.router=e,this.trialService=t,this.app=n,this.state=r,this.stateParams=a,this.ppService=o,this.configService=i,this.design=s,this.experimentSetup=l,this.designData=c,this.app.workFlowType="",this.app.header=this.configService.appTitle,this.app.getPPUser()}return AppComponent.prototype.navigate=function(e){"design"==e&&(this.state.current.name=e,this.app.selection.trial_name?this.router.navigate(["/design",this.app.selection.trial_name]):alert("Trial is not selected")),"formulation"==e&&(this.state.current.name=e,this.router.navigate(["/formulation"])),"stability"==e&&(this.state.current.name=e,this.router.navigate(["/stability"]))},AppComponent=r([o.Component({selector:"my-app",template:n(736),styles:[],providers:[l.StateParamsService,s.StateService,c.HTTPService,p.ConfigService,d.ExperimentSetupService,h.TrialService,f.AppService,m.DesignService,u.DesignDataService,g.FormulationService,b.StabilityService]}),a("design:paramtypes",[i.Router,h.TrialService,f.AppService,s.StateService,l.StateParamsService,c.HTTPService,p.ConfigService,m.DesignService,d.ExperimentSetupService,u.DesignDataService])],AppComponent)}();t.AppComponent=v},574:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=n(1),i=n(54),s=n(74),l=n(27),c=n(75),p=function(){function ExperimentType(e,t,n,r){this.state=e,this.design=t,this.designData=n,this.experimentSetup=r}return ExperimentType.prototype.changeType=function(){for(var e=0,t=this.experimentSetup.experimentType.data.experimentType;e<t.length;e++){var n=t[e];n.Type[0]===this.type&&(this.experimentSetup.experimentType.selected.Type=n.Type,this.experimentSetup.experimentType.selected.number=n.number,
this.experimentSetup.experimentType.selected.list=n.list,this.experimentSetup.experimentType.selected.ing=n.ing)}this.experimentSetup.experimentType.selected.gotData=!0},ExperimentType=r([o.Component({moduleId:"module.id",selector:"my-experimenttype",template:n(738)}),a("design:paramtypes",[l.StateService,s.DesignService,c.DesignDataService,i.ExperimentSetupService])],ExperimentType)}();t.ExperimentType=p},575:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=n(1),i=n(73),s=n(27),l=n(107),c=n(55),p=n(91),u=n(54),d=n(74),h=n(75),f=function(){function ParentFormulationComponent(e,t,n,r,a,o,i,s){this.app=e,this.state=t,this.stateParams=n,this.ppService=r,this.configService=a,this.experimentSetup=o,this.design=i,this.designData=s}return ParentFormulationComponent.prototype.ngOnInit=function(){console.log("ParentFormulationComponent ngOnInit"),this.design.parentFormulationHOTDiv=document.getElementById("parentFormulationHOT"),this.designData.parentFormulation.gotData&&this.design.setUpParentFormulationHOT()},ParentFormulationComponent.prototype.uploadThenRunProtocol=function(e){var t=this,n=e.dataTransfer.files;if(n.length>0){var r=n[0];this.ppService.fileUpload(r).subscribe(function(e){var n=e.data.value;console.log("success"),t.loadParentFormulation(n)},function(e){console.log("error"),console.dir(e);var t=e._body;console.log(t)})}},ParentFormulationComponent.prototype.loadParentFormulation=function(e){var t=this,n={};n=null!=e?{_jobid:e,TrialName:this.app.selection.trial_name}:{TrialName:this.app.selection.trial_name},this.ppService.runProtocolGet(this.configService.parentFormulationProtocol,n).subscribe(function(e){var n=e;t.designData.parentFormulation.data=n,t.experimentSetup.parentFormulation.data=t.designData.parentFormulation.data,t.designData.parentFormulation.gotData=!0,t.experimentSetup.parentFormulation.gotData=t.designData.parentFormulation.gotData,t.experimentSetup.processData=n.formulation,t.design.setUpParentFormulationHOT()},function(e){return console.log(e)})},ParentFormulationComponent=r([o.Component({selector:"my-parentformulation",template:n(739)}),a("design:paramtypes",[i.AppService,s.StateService,l.StateParamsService,c.HTTPService,p.ConfigService,u.ExperimentSetupService,d.DesignService,h.DesignDataService])],ParentFormulationComponent)}();t.ParentFormulationComponent=f},576:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=n(1),i=n(54),s=n(27),l=n(74),c=n(32),p=function(){function ProcessParameters(e,t,n){this.design=e,this.state=t,this.experimentSetup=n,this.selection=new c.Process}return ProcessParameters.prototype.ngOnInit=function(){},ProcessParameters.prototype.Info=function(){console.dir(this.experimentSetup)},ProcessParameters=r([o.Component({moduleId:"module.id",selector:"my-processparameters",template:n(740),providers:[]}),a("design:paramtypes",[l.DesignService,s.StateService,i.ExperimentSetupService])],ProcessParameters)}();t.ProcessParameters=p},577:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=n(1),i=n(54),s=n(27),l=n(74),c=function(){function TestFormulations(e,t,n){this.design=e,this.state=t,this.experimentSetup=n}return TestFormulations.prototype.ngOnInit=function(){this.design.submitExpTypeForm()},TestFormulations=r([o.Component({moduleId:"module.id",selector:"my-testformulations",template:n(741)}),a("design:paramtypes",[l.DesignService,s.StateService,i.ExperimentSetupService])],TestFormulations)}();t.TestFormulations=c},578:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=n(1),i=n(54),s=n(27),l=n(74),c=function(){function TestShedule(e,t,n){this.design=e,this.state=t,this.experimentSetup=n}return TestShedule.prototype.ngOnInit=function(){},TestShedule=r([o.Component({moduleId:"module.id",selector:"my-testshedule",template:n(742)}),a("design:paramtypes",[l.DesignService,s.StateService,i.ExperimentSetupService])],TestShedule)}();t.TestShedule=c},579:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=n(1),i=n(55),s=n(73),l=n(108),c=n(27),p=n(75),u=function(){function HeaderComponent(e,t,n,r,a){this.designData=e,this.ppService=t,this.app=n,this.trialService=r,this.state=a}return HeaderComponent.prototype.ngOnInit=function(){null!=this.trialService.trialConfig.trial_name&&(this.app.selection.project_name=this.trialService.trialConfig.project_name,this.app.selection.subproject_name=this.trialService.trialConfig.subproject_name,this.app.selection.trial_name=this.trialService.trialConfig.trial_name)},HeaderComponent=r([o.Component({moduleId:"module.id",selector:"my-header",template:n(744)}),a("design:paramtypes",[p.DesignDataService,i.HTTPService,s.AppService,l.TrialService,c.StateService])],HeaderComponent)}();t.HeaderComponent=u},580:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=n(1),i=function(){function ContainPipe(){}return ContainPipe.prototype.transform=function(e,t,n){if("undefined"!=typeof n&&"undefined"!=typeof t&&Array.isArray(e)){for(var r=[],a=0,o=e;a<o.length;a++){var i=o[a];"object"==typeof i&&"string"==typeof t&&"string"==typeof n&&i[t]===n&&r.push(i)}return r}},ContainPipe=r([o.Pipe({name:"contain"}),a("design:paramtypes",[])],ContainPipe)}();t.ContainPipe=i},581:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=n(1),i=function(){function UniquePipe(){}return UniquePipe.prototype.transform=function(e,t){if(0==t)return e;if(void 0!==typeof t&&Array.isArray(e)){var n=[];n[0]=e[0];for(var r=function(e){return"object"==typeof e&&"string"==typeof t?e[t]:e},a=0,o=e;a<o.length;a++){for(var i=o[a],s=!1,l=0;l<n.length;l++)if(r(n[l])===r(i)){s=!0;break}s||n.push(i)}return n}},UniquePipe=r([o.Pipe({name:"unique"}),a("design:paramtypes",[])],UniquePipe)}();t.UniquePipe=i},582:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=n(1),i=n(83),s=n(386),l=n(387),c=n(388),p=[{path:"design/:trialname",component:s.DesignComponent},{path:"formulation",component:l.FormulationComponent},{path:"stability",component:c.StabilityComponent},{path:"**",redirectTo:""}],u=function(){function AppRoutingModule(){}return AppRoutingModule=r([o.NgModule({imports:[i.RouterModule.forRoot(p)],exports:[i.RouterModule]}),a("design:paramtypes",[])],AppRoutingModule)}();t.AppRoutingModule=u},73:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=n(1),i=n(27),s=n(107),l=n(55),c=n(91),p=n(108),u=n(75),d=n(32),h=n(32),f=function(){function AppService(e,t,n,r,a,o){this.state=e,this.stateParams=t,this.ppService=n,this.configService=r,this.trialService=a,this.designData=o,this.selected=new h.CPanelData,this.selection=new d.Selection,this.header=this.configService.appTitle}return AppService.prototype.launchExperiment=function(){var e=this.trialService.getExperimentURL();window.open(e,"experiment")},AppService.prototype.inIframe=function(){try{return window.self!==window.top||"create"==this.state.current.name}catch(e){return!0}},AppService.prototype.duplicateView=function(){window.open(window.location.href,"_blank")},AppService.prototype.hideHeader=function(){this.showHeader=!this.showHeader},AppService.prototype.trialIsNotSelected=function(){return!this.trialService.gotAllData},AppService.prototype.linkClass=function(e){return this.state.current.name==e?"btn active":"btn"},AppService.prototype.changeTrial=function(){console.log("changeTrial"),this.loadTrial()},AppService.prototype.forceSSL=function(){"https:"!==window.location.protocol&&(window.location.href="https://"+this.ppService.ppServer+":"+this.ppService.sslPort+"/LabAutomation/")},AppService.prototype.getPPUser=function(){this.userName="pnekhaichuk",this.loadTrialData()},AppService.prototype.logout=function(){window.location.replace("https://"+window.location.hostname+":9943/security/sessions/logout?&redir="+window.location.href)},AppService.prototype.loadTrialData=function(){var e=this;console.log("loadTrialData"),this.ppService.runProtocolGet(this.configService.controlPanelProtocol).subscribe(function(t){console.log("newdata"),console.dir(t);var n=t;e.CPanelData=n,null!=e.selection.trial_name?(e.setSelection(e.selection.trial_name),e.loadTrial()):(e.setSelection(e.selection.trial_name),e.loadTrial()),e.showHeader=!e.inIframe(),e.experimentName=e.selection.trial_name},function(t){window.location.replace("https://"+e.ppService.ppServer+":"+e.ppService.sslPort+"/platform/authorize?state=lalogin&redirect_uri="+window.location.href)})},AppService.prototype.setSelection=function(e){if(""==this.selection.trial_name)for(var t=0;t<this.CPanelData.length;t++)this.CPanelData[t].trial_name==e&&(this.selection.project_name=this.CPanelData[t].project_name,this.selection.subproject_name=this.CPanelData[t].subproject_name,this.selection.trial_name=this.CPanelData[t].trial_name);else for(var t=0;t<this.CPanelData.length;t++)this.CPanelData[t].trial_name==this.selection.trial_name&&(this.selection.project_name=this.CPanelData[t].project_name,this.selection.subproject_name=this.CPanelData[t].subproject_name,this.selection.trial_name=this.CPanelData[t].trial_name)},AppService.prototype.loadTrial=function(){for(var e=0;e<this.CPanelData.length;e++)this.CPanelData[e].trial_name==this.selection.trial_name&&(this.trialService.trialConfig=this.CPanelData[e]);null!=this.trialService.trialConfig.trial_name&&this.trialService.loadAllData(this.state.current.name)},AppService.prototype.printDiv=function(e){if(console.log("printDiv"),"undefined"!=typeof e){var t=document.getElementById(e).innerHTML,n=(document.body.innerHTML,window.open("","_blank","width=600,height=600,scrollbars=no,menubar=no,toolbar=no,location=no,status=no,titlebar=no"));if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1)n.window.focus(),n.document.write('<!DOCTYPE html><html><head><link rel="stylesheet" href="../app/handsontable.full.min.css" /><link rel="stylesheet" href="../app/laStyles.css" /><link rel="stylesheet" href="../app/bootstrap.css"/><link rel="stylesheet" href="../app/angular-ui-tree.min.css"/></head><body onload="window.print()"><div>'+t+"</div></html>"),n.onbeforeunload=function(e){return n.close(),".\n"},n.onabort=function(e){n.document.close(),n.close()};else{var r=window.open("","_blank","width=800,height=600");r.document.open(),r.document.write('<html><head><link rel="stylesheet" href="../app/handsontable.full.min.css" /><link rel="stylesheet" href="../app/laStyles.css" /><link rel="stylesheet" href="../app//bootstrap.css"/><link rel="stylesheet" href="../app/angular-ui-tree.min.css"/></head><body onload="window.print()">'+t+"</html>"),r.document.close()}return n.document.close(),!0}},AppService=r([o.Injectable(),a("design:paramtypes",[i.StateService,s.StateParamsService,l.HTTPService,c.ConfigService,p.TrialService,u.DesignDataService])],AppService)}();t.AppService=f},733:function(e,t){},734:function(e,t){},735:function(e,t){},736:function(e,t){e.exports='<my-header></my-header>\r\n\r\n <nav>\r\n    <a \r\n        [ngClass]="app.linkClass(\'design\')" \r\n        routerLinkActive="active" \r\n\r\n        (click)="navigate(\'design\')"\r\n        >\r\n        Design \r\n    </a>\r\n\r\n    <a \r\n        [ngClass]="app.linkClass(\'formulation\')" \r\n\r\n        routerLinkActive="active" \r\n\r\n        (click)="navigate(\'formulation\')"\r\n        >\r\n        Formulation\r\n    </a>\r\n\r\n    <a \r\n        [ngClass]="app.linkClass(\'stability\')"\r\n \r\n        routerLinkActive="active" \r\n        (click)="navigate(\'stability\')"\r\n        >\r\n        Stability\r\n     </a>\r\n</nav>\r\n\r\n<hr>\r\n\r\n<router-outlet></router-outlet>\r\n\r\n\r\n'},737:function(e,t){e.exports='\r\n<div *ngIf="!app.trialIsNotSelected()" style="width: 100%; float: left;" class="pad-top" >\r\n\r\n    <div style="float: left; width: 15%;" class="btn-group">\r\n       \r\n        <button class="button" *ngFor="let step of DesignSteps; let i=index;"\r\n        (click)="state.setTabState(i)" [disabled]="state.isTabDisabled(i)">{{step}}</button>   \r\n\r\n    </div>\r\n\r\n    <div style="float: left; width: 85%;">\r\n        <my-parentformulation   *ngIf="state.activeTab === 0"></my-parentformulation>\r\n        <my-experimenttype      *ngIf="state.activeTab === 1"></my-experimenttype>\r\n        <my-testformulations    *ngIf="state.activeTab === 2"></my-testformulations>\r\n        <my-processparameters   *ngIf="state.activeTab === 3"></my-processparameters>\r\n        <my-testshedule         *ngIf="state.activeTab === 4"></my-testshedule>\r\n    </div>\r\n\r\n</div>\r\n\r\n'},738:function(e,t){e.exports='<div>\r\n    <h2>Experiment type</h2>\r\n\r\n       <!-- [show]="experimentSetup.experimentType.gotData()"-->\r\n         <div >\r\n            <form class="form" *ngIf = "designData.experimentType.gotData">\r\n            <select class="form-control" \r\n                    name="Experiment type" \r\n                    id="experimentTypeelect" \r\n                    required [(ngModel)]="type" \r\n                    (change)="changeType()">\r\n                \r\n                <option *ngFor="let i of experimentSetup.experimentType.data.experimentType">{{i.Type}}</option>\r\n            </select>\r\n            </form>\r\n            <div >\r\n                <div *ngFor="let sellist of experimentSetup.experimentType.selected.list">{{sellist}}<br/>\r\n\r\n                    <select multiple class="form-control" \r\n                            [name]="sellist" \r\n                            [(ngModel)]="experimentSetup.experimentType.selected[list]">\r\n\r\n                        <option *ngFor="let PF of experimentSetup.parentFormulation.data.formulation">{{PF.name}}</option>\r\n\r\n                    </select>\r\n\r\n                </div>\r\n                <div *ngFor="let ing of experimentSetup.experimentType.selected.ing">{{ing}}<br/>\r\n\r\n                    <select class="form-control" \r\n                            [(ngModel)]="experimentSetup.experimentType.selected[ing]" \r\n                            [name]="ing">\r\n\r\n                        <option *ngFor="let PF1 of experimentSetup.parentFormulation.data.formulation" [value]="PF1.name">{{PF1.name}}</option>\r\n                        \r\n                    </select>             \r\n                </div>\r\n\r\n        <!--lower, Upper limits and Increment -->\r\n                <div *ngFor="let num of experimentSetup.experimentType.selected.number">{{num}}<br/>\r\n                    <input type="number" [(ngModel)]="experimentSetup.experimentType.selected[num]" [name]="num" step="0.01">\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <button [ngClass]="state.prevButtonClass()" (click)="state.prevState()">Previous</button>\r\n        <button [ngClass]="state.nextButtonClass()" (click)="state.nextState()">Next</button>\r\n\r\n</div>\r\n\r\n'},739:function(e,t){e.exports='<div  class="drop-box well" \r\n      on-dragenter="$event.stopPropagation(); $event.preventDefault();"                   \r\n      on-dragover="$event.stopPropagation(); $event.preventDefault();"                    \r\n      on-drop="$event.stopPropagation(); $event.preventDefault(); uploadThenRunProtocol($event);">\r\n      Drop file here<br><br><br>\r\n</div>\r\n\r\n<div id="parentFormulationHOT" [hidden]="!designData.parentFormulation.gotData"></div>\r\n\r\n<div><br><br><br>\r\n      <button type="button" [ngClass]="state.nextButtonClass()" (click)="state.nextState()">Next</button>\r\n</div>\r\n'},74:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=n(1),i=n(83),s=n(75),l=n(54),c=n(27),p=n(107),u=n(55),d=n(91),h=n(73),f=n(32),m=n(32),g=function(){function DesignService(e,t,n,r,a,o,i,s){this.router=e,this.app=t,this.state=n,this.stateParams=r,this.ppService=a,this.configService=o,this.designData=i,this.experimentSetup=s,this.allFormulationsData=[],this.updateTestStatus=function(e){e.doTest=!e.doTest},this.saving=!1,this.error=!1,this.newWeek=new f.Week,this.newTemp=new m.Temperature}return DesignService.prototype.loadexperimentType=function(){var e=this,t={TrialName:this.app.selection.trial_name};this.ppService.runProtocolGet(this.configService.experimentTypeProtocol,t).subscribe(function(t){var n=t;e.designData.experimentType.data=n,e.designData.experimentType.gotData=!0},function(e){return console.log("loadexperimentType: "+e)})},DesignService.prototype.loadProcessParameters=function(){var e=this,t={TrialName:this.app.selection.trial_name};this.ppService.runProtocolGet(this.configService.processParametersProtocol,t).subscribe(function(t){var n=t.parameters;e.experimentSetup.processes=n},function(e){return console.log("loadProcessParameters: "+e)})},DesignService.prototype.loadDefaultTestSchedule=function(){var e=this,t={TrialName:this.app.selection.trial_name};this.ppService.runProtocolGet(this.configService.testScheduleProtocol,t).subscribe(function(t){var n=t;e.experimentSetup.testSchedule=n},function(e){return console.log("loadDefaultTestSchedule: "+e)})},DesignService.prototype.loadAvailableTests=function(){var e=this,t={TrialName:this.app.selection.trial_name};this.ppService.runProtocolGet(this.configService.availableTestsProtocol,t).subscribe(function(t){var n=t;e.experimentSetup.availableTests=n.tests},function(e){return console.log("loadAvailableTests: "+e)})},DesignService.prototype.loadExistingExperiment=function(){var e=this,t={TrialName:this.app.selection.trial_name};this.ppService.runProtocolGet5(this.configService.experiment2JSON,t).subscribe(function(t){var n=t;"undefined"!=typeof n&&"undefined"!=typeof n[0]&&"undefined"!=typeof n[0].ReadOnly&&"undefined"!=typeof n[0].ReadOnly.readOnly&&n[0].ReadOnly.readOnly!==!1&&(e.experimentSetup.availableTests=e.designData.availableTests,e.experimentSetup.availableUnits=e.designData.availableUnits,e.experimentSetup.calculatedFormulations=e.designData.calculatedFormulations,e.experimentSetup.experimentType=e.designData.experimentType,e.experimentSetup.gotData=e.designData.gotData,e.experimentSetup.parentFormulation=e.designData.parentFormulation,e.experimentSetup.processData=e.designData.processData)},function(e){return console.log("loadExistingExperiment"+e)})},DesignService.prototype.saveToExperiment=function(){this.saving=!0;//!this.saving;
var e=this.experimentSetup.calculatedFormulations;this.experimentSetup.calculatedFormulations.data=e.data;({TrialName:this.app.selection.trial_name,_bodyParam:"FormData"}),this.experimentSetup},DesignService.prototype.removeTestWeek=function(){for(var e=[],t=(this.newWeek.week,0);t<this.experimentSetup.testSchedule.allWeeks.length;t++)this.newWeek.week!=this.experimentSetup.testSchedule.allWeeks[t].week&&e.push(this.experimentSetup.testSchedule.allWeeks[t]);for(var t=0;t<this.experimentSetup.testSchedule.schedule.length;t++){for(var n=[],r=0;r<this.experimentSetup.testSchedule.schedule[t].weeks.week.length;r++)this.newWeek.week!==this.experimentSetup.testSchedule.schedule[t].weeks.week[r].week&&n.push(this.experimentSetup.testSchedule.schedule[t].weeks.week[r]);this.experimentSetup.testSchedule.schedule[t].weeks.week=n}this.experimentSetup.testSchedule.allWeeks=e},DesignService.prototype.newTestWeek=function(){for(var e=0;e<this.experimentSetup.testSchedule.allWeeks.length;e++)if(this.newWeek.week==this.experimentSetup.testSchedule.allWeeks[e].week)return;var t=new f.Week;t.week=this.newWeek.week,t.doTest=this.newWeek.doTest,this.experimentSetup.testSchedule.allWeeks.push(t),this.experimentSetup.testSchedule.allWeeks=this.experimentSetup.testSchedule.allWeeks.sort(function(e,t){return+e.week>+t.week?1:+e.week<+t.week?-1:0});for(var e=0;e<this.experimentSetup.testSchedule.schedule.length;e++)this.experimentSetup.testSchedule.schedule[e].weeks.week.push({week:this.newWeek.week,doTest:!0}),this.experimentSetup.testSchedule.schedule[e].weeks.week=this.experimentSetup.testSchedule.schedule[e].weeks.week.sort(function(e,t){return+e.week>+t.week?1:+e.week<+t.week?-1:0})},DesignService.prototype.newStorageTemp=function(){for(var e=0;e<this.experimentSetup.testSchedule.temperatures.length;e++)if(this.newTemp.temperature===this.experimentSetup.testSchedule.temperatures[e].temperature)return;this.experimentSetup.testSchedule.temperatures.push({temperature:this.newTemp.temperature})},DesignService.prototype.removeStorageTemp=function(){for(var e=0;e<this.experimentSetup.testSchedule.temperatures.length;e++)if(this.newTemp.temperature===this.experimentSetup.testSchedule.temperatures[e].temperature){this.experimentSetup.testSchedule.temperatures.splice(e,1);break}},DesignService.prototype.newProcessItem=function(){for(var e=0,t=this.experimentSetup.processes;e<t.length;e++){var n=t[e];n.name===this.state.selection.process.name&&(this.state.selection.process=n)}this.experimentSetup.processData.unshift({type:"process",name:this.state.selection.process.name,caption:this.state.selection.process.caption})},DesignService.prototype.removeProcessItem=function(e){console.log("removeProcessItem"),console.dir(e),console.dir(this.experimentSetup.processData);for(var t in this.experimentSetup.processData)if(this.experimentSetup.processData[t].name===e.name){this.experimentSetup.processData.splice(+t,1);break}console.dir(this.experimentSetup.processData)},DesignService.prototype.submitExpTypeForm=function(){var e=this;console.log("submitExpTypeForm");var t={TrialName:this.app.selection.trial_name,_bodyParam:"FormData"},n=this.experimentSetup;this.ppService.runProtocolPost(this.configService.calculateAllFormulationsProtocol,t,n).subscribe(function(t){var n=t.formulation;e.experimentSetup.calculatedFormulations.data=n,e.experimentSetup.calculatedFormulations.gotData=!0,e.designData.calculatedFormulations.data=e.experimentSetup.calculatedFormulations.data,e.experimentSetup.availableUnits=["g","Kg"],e.setUpAllFormulationsHOT()},function(e){console.log(e)})},DesignService.prototype.findFlowMaterialName=function(){this.findFlowMaterial(this.flowMaterialLookupName,null)},DesignService.prototype.findFlowMaterialID=function(){this.findFlowMaterial(null,this.flowMaterialLookupID)},DesignService.prototype.findFlowMaterial=function(e,t){var n=this,r={TrialName:this.app.selection.trial_name,FlowMaterialName:e,FlowMaterialID:t};this.ppService.runProtocolGet(this.configService.findFlowMaterial,r).subscribe(function(e){var t;t=e,t.name="xxx",console.log("Success"),n.addFlowMaterial(t.name)},function(e){alert("No materials found"),console.log("Failure"),console.log(e)})},DesignService.prototype.addFlowMaterial=function(e){var t=this.experimentSetup.calculatedFormulations.data;for(var n in t)t[n].formulation&&(t[n].formulation[e]||(t[n].formulation[e]={name_key:e,percent_weight:0}));this.experimentSetup.calculatedFormulations.data=t,this.setUpAllFormulationsHOT()},DesignService.prototype.setUpParentFormulationHOT=function(){var e=this;this.parentFormulationHOTDiv.innerHTML="";var t=[],n=[],r={},a=[];a=this.designData.parentFormulation.data.formulation;for(var o=0;o<a.length;o++){t.push(a[o].name);var i={data:a[o].name_key,type:"numeric",editor:"numeric",format:"0.0[0000000000]",readOnly:!0};n.push(i),r[a[o].name_key]=a[o].percent_weight_as_100}var s=(this.parentFormulationHOTDiv,{});s={data:r,colHeaders:t,contextMenu:!0,columns:n,colWidths:80,headerTooltips:{rows:!0,columns:!0},manualColumnResize:!0,afterChange:function(t,n){if("loadData"!==n)return e.newHOTRender(e.parentFormulationHOT),!0}},this.parentFormulationHOT={},this.parentFormulationHOT=new Handsontable(this.parentFormulationHOTDiv,s),this.newHOTRender(this.parentFormulationHOT)},DesignService.prototype.newHOTRender=function(e){e.setDataAtCell(0,0,e.getDataAtCell(0,0)),e.render()},DesignService.prototype.setUpAllFormulationsHOT=function(){var e=this;console.log("setUpAllFormulationsHOT");var t=[],n=[];this.allFormulationsData=[],t.push("sample_name"),n.push({data:"sample_name",type:"text"});for(var r in this.experimentSetup.calculatedFormulations.data[0].formulation){var a=this.experimentSetup.calculatedFormulations.data[0].formulation[r].name_key,o=this.experimentSetup.calculatedFormulations.data[0].formulation[r].percent_weight;t.push(r);var i={data:a,type:"numeric",editor:"numeric",format:"0.0[0000000000]",width:65};n.push(i)}for(var s=0;s<this.experimentSetup.calculatedFormulations.data.length;s++){var l={};l.sample_name=this.experimentSetup.calculatedFormulations.data[s].formulation_name;for(var r in this.experimentSetup.calculatedFormulations.data[s].formulation){var a=this.experimentSetup.calculatedFormulations.data[s].formulation[r].name_key,o=this.experimentSetup.calculatedFormulations.data[s].formulation[r].percent_weight;l[a]=o}this.allFormulationsData.push(l)}Handsontable.renderers.registerRenderer("variableValueRenderer",this.variableValueRenderer);var c=this.allFormulationsData,p=document.getElementById("allFormulationsHOT"),u={data:c,colHeaders:t,minSpareRows:1,contextMenu:!0,headerTooltips:{rows:!0,columns:!0},manualColumnResize:!0,afterChange:function(t,n){if("loadData"!==n)return e.createAllFormulationsPlot(),!0},columns:n,cells:function(e,t,n){var r={renderer:"variableValueRenderer"};return r}};void 0!==this.allFormulationsHot?this.allFormulationsHot.updateSettings(u):(this.allFormulationsHot=new Handsontable(p,u),this.allFormulationsHot.render(),this.allFormulationsHot.setDataAtCell(0,0,this.allFormulationsHot.getDataAtCell(0,0)),this.allFormulationsHot.render()),this.createAllFormulationsPlot()},DesignService.prototype.variableValueRenderer=function(e,t,n,r,a,o,i){Handsontable.renderers.NumericRenderer.apply(this,arguments);for(var s,l=0,c=!1;"undefined"!=typeof e.getData()[l]&&null!==e.getData()[l][r];){if("undefined"==typeof s&&(s=e.getData()[l][r]),s!=e.getData()[l][r]){c=!0;break}l++}c&&(t.style.fontWeight="bold",t.style.background="#CEC"),t.title=e.getData()[n][r]},DesignService.prototype.createAllFormulationsPlot=function(){document.getElementById("allFormulationsPlot").hidden=!1,Plotly.purge("allFormulationsPlot");var e=document.getElementById("allFormulationsPlot"),t=this.allFormulationsData,n=[],r=[];for(var a in t[0])"sample_name"!==a&&r.push(a);for(var o=0;o<r.length;o++){for(var i=[],s=[],l=t.length-2;l>=0;l--)i.push(t[l].sample_name),s.push(t[l][r[o]]);var c={x:s,y:i,name:r[o],xaxis:"x1",yaxis:"y1",type:"bar",orientation:"h"};n.push(c)}var p={title:"Composition",height:500,width:900,barmode:"stack",showlegend:!1,legend:{orientation:"h"}};Plotly.purge(e),Plotly.newPlot(e,n,p,{modeBarButtonsToRemove:["sendDataToCloud"],displaylogo:!1,doubleClick:"reset+autosize"})},DesignService=r([o.Injectable(),a("design:paramtypes",[i.Router,h.AppService,c.StateService,p.StateParamsService,u.HTTPService,d.ConfigService,s.DesignDataService,l.ExperimentSetupService])],DesignService)}();t.DesignService=g},740:function(e,t){e.exports='<div>\r\n    <h2>Process Parameters</h2>  \r\n\r\n    <div [hidden]="!experimentSetup.experimentType.gotData" class="form-inline">\r\n        <label for="process">Process:</label>\r\n        <select class="form-control" id="process" name="process" [(ngModel)]="state.selection.process.name" required #newprocess="ngModel">\r\n            <option *ngFor="let process of experimentSetup.processes">{{process.name }}</option>\r\n        </select>\r\n        <button  [disabled]="!newprocess.valid" class="btn btn-primary btn-xs" title="Add new process" (click)="design.newProcessItem()" style="margin-right: 8px;">\r\n            <span class="glyphicon glyphicon-plus"></span>\r\n        </button>\r\n    </div>\r\n\r\n    <table id="tree-root" class="table table-responsive">\r\n        <thead>\r\n            <tr>\r\n                <th>Sort</th>\r\n                <th></th>\r\n                <th width="30%">Name</th>\r\n                <th>Value</th>\r\n                <th>Unit</th>\r\n            </tr>\r\n        </thead>\r\n\r\n        <tbody dnd-sortable-container [dropZones]="[\'boxers-zone\']" [sortableData]="experimentSetup.processData">\r\n            <tr *ngFor="let node of experimentSetup.processData; let i = index" class="list-group-item" dnd-sortable [sortableIndex]="i" class="node.type === \'ingredient\' ? \'ingredientrow\' : \'processrow\'">\r\n                <td>\r\n                    <div [hidden]="!experimentSetup.experimentType.gotData">\r\n                        <i ngClass="glyphicon glyphicon-resize-vertical"></i> \r\n                    </div>\r\n                </td>\r\n\r\n                <td>\r\n                    <i [ngClass]="node.type === \'ingredient\' ? \'glyphicon glyphicon-tag\' : \'glyphicon glyphicon-cog\'"></i>\r\n                </td>\r\n\r\n                <td>\r\n                    <strong>{{node.name}}</strong> \r\n                </td>\r\n\r\n                <td>\r\n                    <div [hidden]="!experimentSetup.experimentType.gotData">\r\n                        <input type="text" [hidden]="node.type === \'ingredient\'" [(ngModel)]="experimentSetup.processData[i].parameter"/>\r\n                    </div>\r\n                </td>\r\n\r\n                <td>\r\n                    <p [hidden]="node.type === \'ingredient\'">{{node.caption}}</p>\r\n                </td>\r\n\r\n                <td>\r\n                    <div [hidden]="!experimentSetup.experimentType.gotData">\r\n                        <button [hidden]="node.type === \'ingredient\'" class="pull-right btn btn-danger btn-xs" (click)="design.removeProcessItem(node)">\r\n                            <span class="glyphicon glyphicon-remove"></span>\r\n                        </button>\r\n                    </div>\r\n                </td>\r\n                \r\n            </tr>\r\n        </tbody>\r\n    </table>\r\n\r\n    <div [hidden]="!experimentSetup.experimentType.gotData">\r\n        <button [ngClass]="state.prevButtonClass()" (click)="state.prevState()">Previous</button>\r\n        <button [ngClass]="state.nextButtonClass()" (click)="state.nextState()">Next</button>\r\n    </div>\r\n\r\n</div>\r\n'},741:function(e,t){e.exports='<div>\r\n    <h2>Test formulations</h2>\r\n    \r\n    <div *ngIf="!experimentSetup.experimentType.gotData">\r\n        <p>Total Quantity: {{experimentSetup.experimentInfo.totalQuantity.quantity}} {{experimentSetup.experimentInfo.totalQuantity.unit}}</p>\r\n    </div>\r\n    \r\n    <div *ngIf="experimentSetup.experimentType.gotData">    \r\n        <div class="form-inline pad-bottom">\r\n            <label for="formulationQuantity">Total quantity</label>\r\n            <input type="number" class="form-control" id="formulationQuantity" [(ngModel)]="experimentSetup.experimentInfo.totalQuantity.quantity"/>\r\n            <select class="form-control" id="formulationQuantityUnit" [(ngModel)]="experimentSetup.experimentInfo.totalQuantity.unit" >\r\n                <option class="form-control" *ngFor="let unit of experimentSetup.availableUnits">{{unit}}</option>\r\n\r\n            </select>\r\n        </div>\r\n    \r\n        <div class="pad-bottom">\r\n            <h4>Search FLOW for additional ingredients</h4>\r\n        </div>\r\n        <div class="form-inline pad-bottom">\r\n            <label class="test-sched-label" for="nameLookup">Search by material name</label>\r\n            <input type="string" class="form-control" [(ngModel)]="design.flowMaterialLookupName" id="nameLookup"/>\r\n            <button class="btn btn-info btn-sm" type="button" (click)="design.findFlowMaterialName()">Find</button>\r\n        </div>\r\n        <div class="form-inline pad-bottom">\r\n            <label class="test-sched-label" for="idLookup">Search by Material ID</label>\r\n            <input type="string" class="form-control" [(ngModel)]="design.flowMaterialLookupID" id="idLookup"/>\r\n            <button class="btn btn-info btn-sm" type="button" (click)="design.findFlowMaterialID()">Find</button>\r\n        </div>\r\n    </div>\r\n    \r\n    <div id="allFormulationsHOT"></div>\r\n    <div id="allFormulationsPlot"></div>\r\n\r\n    \r\n    <div [hidden]="!experimentSetup.experimentType.gotData">\r\n        <button [ngClass]="state.prevButtonClass()" (click)="state.prevState()">Previous</button>\r\n        <button [ngClass]="state.nextButtonClass()" (click)="state.nextState()">Next</button>\r\n    </div>\r\n</div>\r\n\r\n'},742:function(e,t){e.exports='<div>\r\n    <h2>Test weeks and temperatures</h2>\r\n\r\n    <table>\r\n        <thead>\r\n            <tr>\r\n                <th>\r\n                    Week\r\n                </th>\r\n                <th class="pad-left" *ngFor="let node of experimentSetup.testSchedule.allWeeks">\r\n                    {{node.week}}\r\n                </th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            <tr *ngFor="let node of experimentSetup.testSchedule.schedule">\r\n                <td>{{node.name}}</td>\r\n                \r\n                <td class="pad-left" *ngFor="let week of node.weeks.week">\r\n                    <button *ngIf="week.doTest" [ngClass]="{true: \'btn btn-ok glyphicon glyphicon-ok\', false: \'btn btn-danger glyphicon glyphicon-remove\'}[week.doTest]" (click)="design.updateTestStatus(week)"></button>\r\n                    <button *ngIf="!week.doTest" [ngClass]="{true: \'btn btn-ok glyphicon glyphicon-ok\', false: \'btn btn-danger glyphicon glyphicon-remove\'}[week.doTest]" (click)="design.updateTestStatus(week)"></button>\r\n                </td>\r\n            </tr>\r\n        </tbody>\r\n    </table>\r\n    \r\n    <h3>Storage temperatures</h3>\r\n    <table>\r\n        <thead>\r\n            <tr>\r\n                <th>Temperature</th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            <tr *ngFor="let node of experimentSetup.testSchedule.temperatures">\r\n                <td>{{node.temperature}}</td>\r\n            </tr>\r\n        </tbody>\r\n    </table>\r\n    \r\n    <div [hidden]="!experimentSetup.experimentType.gotData" class="form-inline">\r\n        <label class="test-sched-label" for="newWeek">Edit test weeks</label>\r\n        <input class="form-control test-sched-input" type="number" id="newWeek" required [(ngModel)]="design.newWeek.week" #testweeks="ngModel"/>\r\n        <button [disabled]="!testweeks.valid" class="btn btn-primary btn-xs" title="Add new testing week" (click)="design.newTestWeek()"><span class="glyphicon glyphicon-plus"></span></button>\r\n        <button [disabled]="!testweeks.valid" class="btn btn-danger btn-xs" title="Remove testing week" (click)="design.removeTestWeek()"><span class="glyphicon glyphicon-minus"></span></button>\r\n    </div>\r\n    \r\n    <div [hidden]="!experimentSetup.experimentType.gotData" class="form-inline">\r\n        <label class="test-sched-label" for="newWeek">Edit storage temperatures</label>\r\n        <input class="form-control test-sched-input" type="text" id="newTemp" required [(ngModel)]="design.newTemp.temperature" #temperatures="ngModel"/>\r\n        <button [disabled]="!temperatures.valid" class="btn btn-primary btn-xs" title="Add new storage temperature" (click)="design.newStorageTemp()"><span class="glyphicon glyphicon-plus"></span></button>\r\n        <button [disabled]="!temperatures.valid" class="btn btn-danger btn-xs" title="Remove storage temperature" (click)="design.removeStorageTemp()"><span class="glyphicon glyphicon-minus"></span></button>\r\n    </div>\r\n    \r\n    <div [hidden]="!experimentSetup.experimentType.gotData">\r\n        <button type="button" [ngClass]="state.prevButtonClass()" (click)="state.prevState()">Previous</button>\r\n        <br/><br/><h3>Save for</h3>\r\n        <button type="button" class="btn btn-warning active" (click)="design.saveToExperiment()">Manual</button>\r\n        <button type="button" class="btn btn-success active">High Throughput</button>\r\n    </div>\r\n</div>'},743:function(e,t){e.exports='<div id="formulation-all">\r\n    <div>\r\n        <button class="btn btn-warning" uib-btn-radio="\'manual\'">Manual</button>\r\n        <button class="btn btn-success" uib-btn-radio="\'auto\'">High Throughput</button>\r\n        \r\n        <button  class="btn btn-success" [hidden]="!formulation.executionMode==\'auto\'">Load EMS Data</button>\r\n        <button  class="btn btn-info">Save</button>\r\n        <button  class="btn btn-info" (click)="formulation.switchToStability()">Save and Continue</button>\r\n    </div>\r\n    <div id="print-area">\r\n        <div id="normal-print-area" [hidden]="formulation.formulationData.isDoseResponse">\r\n            <h2>Formulation design</h2>\r\n            <div id="process-formulation-table"></div>\r\n        </div>\r\n\r\n        <div id="dose-response-print-area" [hidden]="!formulation.formulationData.isDoseResponse">\r\n            <h2>Dose response formulation design</h2>\r\n            <div id="main-batch-formulation-table"></div>\r\n\r\n            <h2>Individual formulations</h2>\r\n            <div id="hole-fill-formulation-table"></div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="pad-top">\r\n        <button class="btn btn-info" (click)="formulation.getPDF()">\r\n            Print\r\n        </button>\r\n        <button class="btn btn-info" (click)="formulation.copyPlannedToActual()">\r\n            Copy planned to actual\r\n        </button>\r\n        <button class="btn btn-info" (click)="formulation.clearActual()">\r\n            Clear actual\r\n        </button>\r\n        <button class="btn btn-info" (click)="formulation.saveData()">\r\n            Save data to Experiment\r\n        </button>\r\n    </div>\r\n</div>\r\n<div id="process-formulation-plot" ng-show="showPlots"></div>'},744:function(e,t){e.exports='<title>Lab Automation</title>\r\n\r\n<div style="position:absolute;right:0;">\r\n    <button  class="btn btn-info btn-sm" ng-click="logout()">{{userName}} Logout</button>\r\n    <button  class="btn btn-info btn-sm" ng-click="hideHeader()">Show/Hide</button>\r\n    <button  class="btn btn-info btn-sm" ng-click="duplicateView()">New Tab</button>   \r\n    \r\n</div>\r\n\r\n<h2 align="center">{{app.header}}{{workFlowType}}</h2>\r\n\r\n<form class="form-inline">\r\n        <label for="project">Project</label>\r\n        <select class="form-control" id="project"\r\n            required\r\n            [(ngModel)]="app.selection.project_name" \r\n            name="project_name"\r\n            #project="ngModel">  \r\n\r\n            <option myHighlight *ngFor="let d of (app.CPanelData \r\n            | unique:\'project_name\')" \r\n            [value]="d.project_name">{{d.project_name}}\r\n            </option>\r\n\r\n        </select>\r\n\r\n        <label for="subproject">Subproject</label>\r\n        <select class="form-control" id="subproject"\r\n            required\r\n            [(ngModel)]="app.selection.subproject_name" \r\n            name="subproject_name"\r\n            #project="ngModel">   \r\n\r\n            <option *ngFor="let d of (app.CPanelData \r\n            | unique:\'subproject_name\' \r\n            | contain: \'project_name\' : app.selection.project_name)"  \r\n            [value]="d.subproject_name">{{d.subproject_name}}\r\n            </option>\r\n\r\n        </select>\r\n\r\n        <label for="subproject">Experiment</label>\r\n        <select class="form-control" id="trial" (change)="app.changeTrial()"\r\n            required\r\n            [(ngModel)]="app.selection.trial_name" \r\n            name="trial_name"\r\n            #project="ngModel">  \r\n\r\n            <option *ngFor="let d of (app.CPanelData \r\n            | unique:\'trial_name\'\r\n            | contain:\'project_name\':app.selection.project_name \r\n            | contain:\'subproject_name\':app.selection.subproject_name)" \r\n            [value]="d.trial_name">{{d.trial_name}}</option>\r\n\r\n        </select>\r\n\r\n    <button type="button" class="btn btn-info btn-sm" [disabled]="!project.valid" (click)="app.changeTrial()" id="load">Load Experiment</button>\r\n    \r\n\r\n    <button type="button" class="btn btn-info btn-sm" [disabled]="!project.valid" (click)="app.launchExperiment()" id="launch">Launch Experiment</button>   \r\n</form>\r\n<br>\r\n             \r\n\r\n\r\n            \r\n \r\n        \r\n\r\n'},745:function(e,t){e.exports='<div>\r\n    <div>\r\n        <div class="pad-bottom">\r\n            <button type="button" class="btn btn-info" (click)="stability.printGrid()">\r\n                Print\r\n            </button>\r\n            <button type="button" class="btn btn-info" (click)="stability.showhidePlots()">\r\n                {{stability.showPlotsState}}\r\n            </button>\r\n            <button type="button" class="btn btn-info" (click)="stability.loadStabilityPlots()">\r\n                Refresh Plots\r\n            </button>\r\n            <button type="button" class="btn btn-info" (click)="stability.saveDataToEKB()">\r\n                Save data\r\n            </button>\r\n            <div id="process-formulation-plot"></div>\r\n        </div>\r\n    </div>\r\n    \r\n    <div [hidden]="!stability.changesMade"><p class="changes-warning">Please ensure you save your changes.</p></div>\r\n    \r\n    <div>\r\n        <button class="btn btn-warning" *ngIf="stability.executionMode == \'manual\'" (click)="stability.changeMode()">Manual</button>\r\n        <button class="btn btn-success" *ngIf="stability.executionMode == \'auto\'" (click)="stability.changeMode()">High Throughput</button>\r\n        \r\n        <button  class="btn btn-success" *ngIf="stability.executionMode == \'auto\'">Load EMS Data</button>\r\n        <button  class="btn btn-info">Save</button>\r\n        <button  class="btn btn-info"  (click)="stability.saveToNotebook()">Open Notebook</button>\r\n    </div>\r\n\r\n    <form class="form-inline pad-top" name="name1">\r\n        <label for="week">Select Test Time:</label>\r\n        <select class="form-control" id="week" name="week" [(ngModel)]="stability.selection.testWeek">\r\n            <option *ngFor="let week of stability.options.testWeeks">\r\n                {{week}}\r\n            </option>\r\n        </select>\r\n\r\n        <button (click)="stability.MoveDateTime(-1)" class="btn btn-info" >Back</button>\r\n        <button (click)="stability.MoveDateTime(1)" class="btn btn-info" >Next</button>\r\n        <button (click)="stability.NewTestWeek()" class="btn btn-info" >New</button>\r\n        <input type="number" id="newWeek" class="form-control" name="name2" [(ngModel)]="stability.newTestWeek"/>\r\n        <label for="newWeek">week</label>\r\n    </form>\r\n    <br/>\r\n    <div id="stability-grid" ></div>\r\n    \r\n    <div class="form-inline pad-top">\r\n        <label for="plot-type">Select plot style</label>\r\n        <select class="form-control" id="plot-type" [(ngModel)]="stability.plotStyle" (change)="stability.loadStabilityPlots()">\r\n            <option *ngFor="let plotStyle of stability.options.plotStyles">{{plotStyle}}\r\n            </option>\r\n        </select>\r\n    </div>\r\n    <div [hidden]="!stability.showPlots">\r\n        <div [hidden]="stability.plotStyle!=\'Selected week\'">\r\n            <div>\r\n                <div id="stability-plots-this-pH" class="col-sm-6" ></div>\r\n                <div id="stability-plots-this-visc2" class="col-sm-6"></div>\r\n            </div>\r\n            <div>\r\n                <div id="stability-plots-this-visc21" class="col-sm-6"></div>\r\n                <div id="stability-plots-this-visc106" class="col-sm-6"></div>\r\n            </div>\r\n        </div>\r\n        <div [hidden]="stability.plotStyle!=\'All weeks\'">\r\n            <div>\r\n                <div id="stability-plots-all-pH" class="col-sm-6" ></div>\r\n                <div id="stability-plots-all-visc2" class="col-sm-6"></div>\r\n            </div>\r\n            <div>\r\n                <div id="stability-plots-all-visc21" class="col-sm-6"></div>\r\n                <div id="stability-plots-all-visc106" class="col-sm-6"></div>\r\n            </div>\r\n        </div>\r\n        \r\n        <div id="stability-plots-all"></div>\r\n      </div>  \r\n    \r\n    \r\n</div>\r\n\r\n'},746:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),a=n(96),o=n(115),i=n(421),s=n(422),l=n(423),c=n(199);n.d(t,"AbstractComponent",function(){return c.a}),n.d(t,"DataTransferEffect",function(){return a.a}),n.d(t,"DragImage",function(){return a.b}),n.d(t,"DragDropConfig",function(){return a.c}),n.d(t,"DragDropData",function(){return o.a}),n.d(t,"dragDropServiceFactory",function(){return o.b}),n.d(t,"DragDropService",function(){return o.c}),n.d(t,"dragDropSortableServiceFactory",function(){return o.d}),n.d(t,"DragDropSortableService",function(){return o.e}),n.d(t,"DraggableComponent",function(){return i.a}),n.d(t,"DroppableComponent",function(){return s.a}),n.d(t,"SortableContainer",function(){return l.a}),n.d(t,"SortableComponent",function(){return l.b}),n.d(t,"providers",function(){return p}),n.d(t,"DndModule",function(){return u});var p=[a.c,{provide:o.c,useFactory:o.b},{provide:o.e,useFactory:o.d,deps:[a.c]}],u=function(){function DndModule(){}return DndModule.forRoot=function(){return{ngModule:DndModule,providers:p}},DndModule.decorators=[{type:r.NgModule,args:[{declarations:[i.a,s.a,l.a,l.b],exports:[i.a,s.a,l.a,l.b]}]}],DndModule.ctorParameters=function(){return[]},DndModule}()},747:function(e,t){e.exports=".btn-group .button {\r\n    /*background-color: #4CAF50; /* Green */\r\n    /*border: 1px solid green; */\r\n    color: black;\r\n    padding: 15px 1px;\r\n    text-align: left;\r\n    text-decoration: none;\r\n    display: inline-block;\r\n    font-size: 16px;\r\n    cursor: pointer;\r\n    width: 100%;\r\n    display: block;\r\n    background-color: white;\r\n}\r\n\r\n.btn-group .button:not(:last-child) {\r\n    border-bottom: none; /* Prevent double borders */\r\n}\r\n\r\n.btn-group .button:hover {\r\n    background-color: white;\r\n    color: red;\r\n}\r\n.btn-group .button:disabled {\r\n    background-color: white;\r\n    color: black;\r\n    cursor: not-allowed;\r\n}\r\nbutton {\r\n  font-family: Arial;\r\n  background-color: #eee;\r\n  border: none;\r\n  padding: 5px 10px;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  cursor: hand;\r\n}\r\nbutton:hover {\r\n  background-color: #cfd8dc;\r\n}\r\n.btn[disabled],\r\nhtml input[disabled] {\r\n    cursor: not-allowed !important;\r\n background-color: #eee;\r\n border-color: #ddd;\r\n color: #ddd;\r\n}"},75:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},a=this&&this.__decorate||function(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(1),s=n(55),l=n(91),c=n(32),p=function(e){function DesignDataService(t,n){e.call(this),this.ppService=t,this.configService=n}return r(DesignDataService,e),DesignDataService.prototype.getData=function(e){var t=this;console.log("DesignDataService getData");var n={TrialName:e};this.ppService.runProtocolGetDesignData(this.configService.designProtocol,n).subscribe(function(e){t.data=e,t.gotData=!0},function(e){return console.log(e)})},DesignDataService=a([i.Injectable(),o("design:paramtypes",[s.HTTPService,l.ConfigService])],DesignDataService)}(c.DataService);t.DesignDataService=p},91:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var a,o=arguments.length,i=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=n(1),i=function(){function ConfigService(){this.controlPanelProtocol="LabAutomation/LaundryLiquids/Design/ControlPanel",this.experimentCreationProtocol="LabAutomation/LaundryLiquids/Design/CreateExperiment",this.experimentTypeProtocol="LabAutomation/LaundryLiquids/Design/experimentTypes",this.parentFormulationProtocol="LabAutomation/LaundryLiquids/Design/ParentFormulationFromExcel",this.calculateAllFormulationsProtocol="LabAutomation/LaundryLiquids/Design/CalculateAllFormulations",this.processParametersProtocol="LabAutomation/LaundryLiquids/Design/ProcessParameters",this.testScheduleProtocol="LabAutomation/LaundryLiquids/Design/TestSchedule",this.availableTestsProtocol="LabAutomation/LaundryLiquids/Design/GetAvailableTests",this.formulationDataProtocol="LabAutomation/LaundryLiquids/Formulation/FormulationData",this.stabilitySetupProtocol="LabAutomation/LaundryLiquids/Stability/StabilityInputGridData",this.saveToExperimentProtocol="LabAutomation/LaundryLiquids/Design/UploadExperimentDesign",this.experiment2JSON="LabAutomation/LaundryLiquids/Design/Experiment2JSON",this.findFlowMaterial="LabAutomation/LaundryLiquids/Design/FindFlowMaterial",this.saveFormulationData="LabAutomation/LaundryLiquids/Formulation/SaveFormulation",this.createStabilitySteps="LabAutomation/LaundryLiquids/Design/SaveAnalyticalSubsteps",this.saveStabilityToExperimentProtocol="LabAutomation/LaundryLiquids/Stability/StabOutput",this.getEnteredStabilityDaya="LabAutomation/LaundryLiquids/Stability/StabOutputToJSON",this.pdfBatchSheet="LabAutomation/LaundryLiquids/Formulation/GeneratePDFBatchSheet",this.designProtocol="LabAutomation/LaundryLiquids/Design/FormulationDesign",this.formulationProtocol="LabAutomation/FormulationResults",this.stabilityProtocol="LabAutomation/StabilityData",this.appTitle="Structured Data Capture",this.newTestWeek="LabAutomation/LaundryLiquids/Stability/AddNewTestWeek"}return ConfigService=r([o.Injectable(),a("design:paramtypes",[])],ConfigService)}();t.ConfigService=i},96:function(e,t,n){"use strict";var r=n(285);
n.d(t,"a",function(){return a}),n.d(t,"b",function(){return o}),n.d(t,"c",function(){return i});var a=function(){function DataTransferEffect(e){this.name=e}return DataTransferEffect.COPY=new DataTransferEffect("copy"),DataTransferEffect.LINK=new DataTransferEffect("link"),DataTransferEffect.MOVE=new DataTransferEffect("move"),DataTransferEffect.NONE=new DataTransferEffect("none"),DataTransferEffect}(),o=function(){function DragImage(e,t,a){if(void 0===t&&(t=0),void 0===a&&(a=0),this.imageElement=e,this.x_offset=t,this.y_offset=a,n.i(r.b)(this.imageElement)){var o=this.imageElement;this.imageElement=new HTMLImageElement,this.imageElement.src=o}}return DragImage}(),i=function(){function DragDropConfig(){this.onDragStartClass="dnd-drag-start",this.onDragEnterClass="dnd-drag-enter",this.onDragOverClass="dnd-drag-over",this.onSortableDragClass="dnd-sortable-drag",this.dragEffect=a.MOVE,this.dropEffect=a.MOVE,this.dragCursor="move"}return DragDropConfig}()}},[1011]);