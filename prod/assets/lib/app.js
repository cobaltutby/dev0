webpackJsonp([1],{1015:function(e,t,n){"use strict";var r=n(209),a=n(1),i=n(456);a.enableProdMode(),document.write("<title>Server App</title>"),r.platformBrowserDynamic().bootstrapModule(i.AppModule)},107:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(1),o=function(){function StateParamsService(){}return StateParamsService=r([i.Injectable(),a("design:paramtypes",[])],StateParamsService)}();t.StateParamsService=o},108:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(1),o=n(55),s=n(74),l=n(27),c=n(32),u=function(){function TrialService(e,t,n){this.state=e,this.ppService=t,this.designData=n,this.trialConfig=new c.CPanelData}return TrialService.prototype.getExperimentURL=function(){var e="https://"+this.ppService.ppServer+"/ekb/ExperimentView.aspx?ExperimentId="+this.trialConfig.experiment_id;return e},TrialService.prototype.getNotebookURL=function(){var e="https://notebook-unilever-dev.bioviaonline.com/notebook/experiment/"+this.trialConfig.trial_name;return e},TrialService.prototype.loadAllData=function(e){console.log("loadAllData"),"create"!=e&&(this.state.current,this.designData.gotData=!1,this.designData.getData(this.trialConfig.trial_name),this.gotAllData=!0)},TrialService=r([i.Injectable(),a("design:paramtypes",[l.StateService,o.HTTPService,s.DesignDataService])],TrialService)}();t.TrialService=u},115:function(e,t,n){"use strict";function dragDropServiceFactory(){return new s}function dragDropSortableServiceFactory(e){return new l(e)}var r=n(1),a=n(96),i=n(285);n.d(t,"a",function(){return o}),t.b=dragDropServiceFactory,n.d(t,"c",function(){return s}),t.d=dragDropSortableServiceFactory,n.d(t,"e",function(){return l});var o=function(){function DragDropData(){}return DragDropData}(),s=function(){function DragDropService(){this.allowedDropZones=[]}return DragDropService.decorators=[{type:r.Injectable}],DragDropService.ctorParameters=function(){return[]},DragDropService}(),l=function(){function DragDropSortableService(e){this._config=e}return Object.defineProperty(DragDropSortableService.prototype,"elem",{get:function(){return this._elem},enumerable:!0,configurable:!0}),DragDropSortableService.prototype.markSortable=function(e){n.i(i.a)(this._elem)&&this._elem.classList.remove(this._config.onSortableDragClass),n.i(i.a)(e)&&(this._elem=e,this._elem.classList.add(this._config.onSortableDragClass))},DragDropSortableService.decorators=[{type:r.Injectable}],DragDropSortableService.ctorParameters=function(){return[{type:a.c}]},DragDropSortableService}()},199:function(e,t,n){"use strict";var r=n(1),a=n(96),i=n(115),o=n(285);n.d(t,"a",function(){return s});var s=function(){function AbstractComponent(e,t,r,a){var i=this;this._dragDropService=t,this._config=r,this._cdr=a,this._dragEnabled=!1,this.dropEnabled=!1,this.dropZones=[],this.cloneItem=!1,this._elem=e.nativeElement,this._elem.ondragenter=function(e){i._onDragEnter(e)},this._elem.ondragover=function(e){return i._onDragOver(e),null!=e.dataTransfer&&(e.dataTransfer.dropEffect=i._config.dropEffect.name),!1},this._elem.ondragleave=function(e){i._onDragLeave(e)},this._elem.ondrop=function(e){i._onDrop(e)},this._elem.ondragstart=function(e){if(i._onDragStart(e),null!=e.dataTransfer){if(e.dataTransfer.setData("text",""),e.dataTransfer.effectAllowed=i.effectAllowed||i._config.dragEffect.name,n.i(o.a)(i.dragImage))if(n.i(o.b)(i.dragImage))e.dataTransfer.setDragImage(n.i(o.c)(i.dragImage));else if(n.i(o.d)(i.dragImage))e.dataTransfer.setDragImage(n.i(o.e)(i.dragImage));else{var t=i.dragImage;e.dataTransfer.setDragImage(t.imageElement,t.x_offset,t.y_offset)}else if(n.i(o.a)(i._config.dragImage)){var r=i._config.dragImage;e.dataTransfer.setDragImage(r.imageElement,r.x_offset,r.y_offset)}else i.cloneItem&&(i._dragHelper=i._elem.cloneNode(!0),i._dragHelper.classList.add("dnd-drag-item"),i._dragHelper.style.position="absolute",i._dragHelper.style.top="0px",i._dragHelper.style.left="-1000px",i._elem.parentElement.appendChild(i._dragHelper),e.dataTransfer.setDragImage(i._dragHelper,e.offsetX,e.offsetY));i._dragEnabled?i._elem.style.cursor=i.effectCursor?i.effectCursor:i._config.dragCursor:i._elem.style.cursor=i._defaultCursor}},this._elem.ondragend=function(e){i._elem.parentElement&&i._dragHelper&&i._elem.parentElement.removeChild(i._dragHelper),i._onDragEnd(e),i._elem.style.cursor=i._defaultCursor}}return Object.defineProperty(AbstractComponent.prototype,"dragEnabled",{get:function(){return this._dragEnabled},set:function(e){this._dragEnabled=!!e,this._elem.draggable=this._dragEnabled},enumerable:!0,configurable:!0}),AbstractComponent.prototype.detectChanges=function(){var e=this;setTimeout(function(){e._cdr.detectChanges()},250)},AbstractComponent.prototype._onDragEnter=function(e){this._isDropAllowed&&this._onDragEnterCallback(e)},AbstractComponent.prototype._onDragOver=function(e){this._isDropAllowed&&(e.preventDefault&&e.preventDefault(),this._onDragOverCallback(e))},AbstractComponent.prototype._onDragLeave=function(e){this._isDropAllowed&&this._onDragLeaveCallback(e)},AbstractComponent.prototype._onDrop=function(e){this._isDropAllowed&&(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),this._onDropCallback(e),this.detectChanges())},Object.defineProperty(AbstractComponent.prototype,"_isDropAllowed",{get:function(){if(this._dragDropService.isDragged&&this.dropEnabled){if(this.allowDrop)return this.allowDrop(this._dragDropService.dragData);if(0===this.dropZones.length&&0===this._dragDropService.allowedDropZones.length)return!0;for(var e=0;e<this._dragDropService.allowedDropZones.length;e++){var t=this._dragDropService.allowedDropZones[e];if(this.dropZones.indexOf(t)!==-1)return!0}}return!1},enumerable:!0,configurable:!0}),AbstractComponent.prototype._onDragStart=function(e){this._dragEnabled&&(this._dragDropService.allowedDropZones=this.dropZones,this._onDragStartCallback(e))},AbstractComponent.prototype._onDragEnd=function(e){this._dragDropService.allowedDropZones=[],this._onDragEndCallback(e)},AbstractComponent.prototype._onDragEnterCallback=function(e){},AbstractComponent.prototype._onDragOverCallback=function(e){},AbstractComponent.prototype._onDragLeaveCallback=function(e){},AbstractComponent.prototype._onDropCallback=function(e){},AbstractComponent.prototype._onDragStartCallback=function(e){},AbstractComponent.prototype._onDragEndCallback=function(e){},AbstractComponent.decorators=[{type:r.Injectable}],AbstractComponent.ctorParameters=function(){return[{type:r.ElementRef},{type:i.c},{type:a.c},{type:r.ChangeDetectorRef}]},AbstractComponent}()},27:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(1),o=n(74),s=n(54),l=n(32),c=n(32),u=function(){function StateService(e,t){this.designData=e,this.experimentSetup=t,this.allTabs=["ParentFormulation","ExperimentType","TestFormulations","ProcessParameters","TestSchedule"],this.activeTab=0,this.selection=new c.Selection,this.current=new l.CurrentFrame}return StateService.prototype.go=function(e,t,n){},StateService.prototype.setTabState=function(e){this.isTabDisabled(e)||(this.activeTab=e)},StateService.prototype.currentPageBlocked=function(){var e=!0;switch(this.allTabs[this.activeTab]){case"ParentFormulation":e=!("undefined"!=typeof this.designData.parentFormulation&&this.designData.parentFormulation.gotData);break;case"ExperimentType":e=!this.experimentSetup.experimentTypes.selected.gotData;break;case"TestFormulations":e=!this.experimentSetup.experimentTypes.gotData;break;case"ProcessParameters":e=!1;break;case"TestSchedule":e=!1}return e},StateService.prototype.nextState=function(){this.setTabState(this.activeTab+1)},StateService.prototype.prevState=function(){this.setTabState(this.activeTab-1)},StateService.prototype.isTabDisabled=function(e){return!(e<=this.activeTab)&&(e===this.activeTab+1?this.currentPageBlocked():e>this.activeTab+1||("undefined"==typeof this.experimentSetup.experimentTypes||this.experimentSetup.experimentTypes.gotData!==!0))},StateService.prototype.nextButtonClass=function(){return this.currentPageBlocked()?"btn btn-default disabled":"btn btn-primary active"},StateService.prototype.prevButtonClass=function(){return this.activeTab>0?"btn btn-primary active":"btn btn-default disabled"},StateService.prototype.isWizardStateVisible=function(e){return e===this.activeTab},StateService=r([i.Injectable(),a("design:paramtypes",[o.DesignDataService,s.ExperimentSetupService])],StateService)}();t.StateService=u},285:function(e,t,n){"use strict";function isString(e){return"string"==typeof e}function isPresent(e){return void 0!==e&&null!==e}function isFunction(e){return"function"==typeof e}function createImage(e){var t=new HTMLImageElement;return t.src=e,t}function callFun(e){return e()}t.b=isString,t.a=isPresent,t.d=isFunction,t.c=createImage,t.e=callFun},32:function(e,t,n){"use strict";var r=function(){function ExperimentJSON(){}return ExperimentJSON}();t.ExperimentJSON=r;var a=function(){function ExperimentInfo(){this.totalQuantity=new w}return ExperimentInfo}();t.ExperimentInfo=a;var i=function(){function ReadOnly(){}return ReadOnly}();t.ReadOnly=i;var o=function(){function ExperimentProcess(){}return ExperimentProcess}();t.ExperimentProcess=o;var s=function(){function TestSchedule(){}return TestSchedule}();t.TestSchedule=s;var l=function(){function Weeks(){}return Weeks}();t.Weeks=l;var c=function(){function Week(){this.doTest=!1}return Week}();t.Week=c;var u=function(){function Test(){}return Test}();t.Test=u;var p=function(){function Temperature(){}return Temperature}();t.Temperature=p;var d=function(){function ParentFormulation(){this.gotData=!1,this.data=new f}return ParentFormulation}();t.ParentFormulation=d;var f=function(){function ParentFormulationData(){this.formulation=[],this.gotData=!1}return ParentFormulationData}();t.ParentFormulationData=f;var h=function(){function Formulation(){}return Formulation}();t.Formulation=h;var m=function(){function ExperimentType(){this.selected=new y}return ExperimentType}();t.ExperimentType=m;var g=function(){function ExperimentTypeData(){}return ExperimentTypeData}();t.ExperimentTypeData=g;var v=function(){function Experiment(){}return Experiment}();t.Experiment=v;var y=function(){function SelectedExperiment(){}return SelectedExperiment}();t.SelectedExperiment=y;var b=function(){function Selected(){}return Selected}();t.Selected=b;var S=function(){function DesignStep(){this.name="",this.id=0,this.finished=!1,this.prevStepFinished=!1}return DesignStep}();t.DesignStep=S;var D=function(){function CPanelData(){}return CPanelData}();t.CPanelData=D;var _=function(){function CalculatedFormulationsType(){}return CalculatedFormulationsType}();t.CalculatedFormulationsType=_;var w=function(){function TotalQuantity(){}return TotalQuantity}();t.TotalQuantity=w;var x=function(){function CalculatedFormulation(){}return CalculatedFormulation}();t.CalculatedFormulation=x;var P=function(){function AvailableTests(){}return AvailableTests}();t.AvailableTests=P;var F=function(){function ProcessData(){}return ProcessData}();t.ProcessData=F;var T=function(){function Process(){}return Process}();t.Process=T;var C=function(){function DataService(){this.gotData=!1,this.parentFormulation=new d,this.experimentTypes=new m,this.calculatedFormulations=new _,this.experimentInfo=new a}return DataService}();t.DataService=C;var k=function(){function Selection(){this.process=new T}return Selection}();t.Selection=k;var R=function(){function UserData(){}return UserData}();t.UserData=R;var A=function(){function CurrentFrame(){}return CurrentFrame}();t.CurrentFrame=A;var E=function(){function LocalStorage(){}return LocalStorage}();t.LocalStorage=E;var I=function(){function FlowMaterial(){}return FlowMaterial}();t.FlowMaterial=I;var O=function(){function Column(){this.type="numeric",this.editor="numeric",this.format="0.0[0000000000]",this.readOnly=!0,this.width=65}return Column}();t.Column=O;var j=function(){function ParentFormulationHOTSettings(){}return ParentFormulationHOTSettings}();t.ParentFormulationHOTSettings=j;var H=function(){function FormulationData(){this.mainBatchFormulation=new L,this.holeFillFormulation=new M}return FormulationData}();t.FormulationData=H;var L=function(){function BatchFormulation(){this.data=[]}return BatchFormulation}();t.BatchFormulation=L;var M=function(){function FillFormulation(){this.data=[]}return FillFormulation}();t.FillFormulation=M;var B=function(){function FormulationDataType(){}return FormulationDataType}();t.FormulationDataType=B;var N=function(){function ProcessArray(){}return ProcessArray}();t.ProcessArray=N;var W=function(){function ColumnHeaders(){}return ColumnHeaders}();t.ColumnHeaders=W;var U=function(){function FormulationInfo(){}return FormulationInfo}();t.FormulationInfo=U;var z=function(){function FormulationResult(){}return FormulationResult}();t.FormulationResult=z;var q=function(){function StabilitySelection(){}return StabilitySelection}();t.StabilitySelection=q;var G=function(){function StabilityOptions(){}return StabilityOptions}();t.StabilityOptions=G;var V=function(){function StabilityParams(){}return StabilityParams}();t.StabilityParams=V;var X=function(){function CellProperties(){}return CellProperties}();t.CellProperties=X;var Q=function(){function StabilityThisData(){}return StabilityThisData}();t.StabilityThisData=Q;var Z=function(){function ThisWeekPlotData(){}return ThisWeekPlotData}();t.ThisWeekPlotData=Z;var J=function(){function Layout(){}return Layout}();t.Layout=J;var K=function(){function Title(){}return Title}();t.Title=K;var Y=function(){function Stability(){}return Stability}();t.Stability=Y;var $=function(){function StabilityData(){}return StabilityData}();t.StabilityData=$;var ee=function(){function SampleWeek(){}return SampleWeek}();t.SampleWeek=ee},386:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(1),o=n(82),s=n(73),l=n(27),c=n(90),u=n(108),p=function(){function DesignComponent(e,t,n,r,a){this.app=e,this.state=t,this.design=n,this.route=r,this.trialService=a,this.DesignSteps=["Parent formulation","Experiment type","Test formulations","Process parameters","Test shedule"],this.design.loadExperimentTypes(),this.design.loadProcessParameters(),this.design.loadDefaultTestSchedule(),this.design.loadAvailableTests(),this.design.loadExistingExperiment()}return DesignComponent.prototype.ngOnInit=function(){var e=this;this.state.current.name="design",this.route.params.subscribe(function(t){e.trialService.trialConfig.trial_name=t.trialname,"undefined"!=e.trialService.trialConfig.trial_name&&(e.app.selection.project_name=e.trialService.trialConfig.project_name,e.app.selection.subproject_name=e.trialService.trialConfig.subproject_name,e.app.selection.trial_name=e.trialService.trialConfig.trial_name)})},DesignComponent=r([i.Component({moduleId:"module.id",selector:"my-design",template:n(741),styles:[n(751)]}),a("design:paramtypes",[c.AppService,l.StateService,s.DesignService,o.ActivatedRoute,u.TrialService])],DesignComponent)}();t.DesignComponent=p},387:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(1),o=n(82),s=n(27),l=n(90),c=n(108),u=n(389),p=function(){function FormulationComponent(e,t,n,r,a){this.app=e,this.state=t,this.route=n,this.trialService=r,this.formulation=a}return FormulationComponent.prototype.ngOnInit=function(){this.formulation.loadFormulationView()},FormulationComponent=r([i.Component({selector:"my-formulation",template:n(747)}),a("design:paramtypes",[l.AppService,s.StateService,o.ActivatedRoute,c.TrialService,u.FormulationService])],FormulationComponent)}();t.FormulationComponent=p},388:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(1),o=n(27),s=n(390),l=function(){function StabilityComponent(e,t){this.state=e,this.stability=t,this.showPlots=!1}return StabilityComponent.prototype.ngOnInit=function(){for(var e in this.stability.tests)this.stability.tests[e].divThis=document.getElementById("stability-plots-this-"+this.stability.tests[e].div),this.stability.tests[e].divAll=document.getElementById("stability-plots-all-"+this.stability.tests[e].div);this.stability.stabilityHotDiv=document.getElementById("stability-grid"),this.stability.stabilityPlotDivAll=document.getElementById("stability-plots-all"),this.stability.stabilityPlotDivThis=document.getElementById("stability-plots-this-pH"),this.stability.loadStabilityView()},StabilityComponent=r([i.Component({selector:"my-stability",template:n(749)}),a("design:paramtypes",[o.StateService,s.StabilityService])],StabilityComponent)}();t.StabilityComponent=l},389:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(1),o=n(82),s=n(73),l=n(54),c=n(27),u=n(107),p=n(55),d=n(91),f=n(90),h=n(32),m=function(){function FormulationService(e,t,n,r,a,i,o,s){this.app=e,this.state=t,this.stateParams=n,this.ppService=r,this.configService=a,this.design=i,this.experimentSetup=o,this.router=s,this.gotData=!1,this.formulationAllDiv=document.getElementById("formulation-all"),this.processHotDiv=document.getElementById("process-formulation-plot"),this.parameterNames=[],this.executionMode="manual",this.formulationData=new h.FormulationData,Handsontable.renderers.registerRenderer("targetIngredientRenderer",this.targetIngredientRenderer),Handsontable.renderers.registerRenderer("plannedValueRenderer",this.plannedValueRenderer),Handsontable.renderers.registerRenderer("actualValueRenderer",this.actualValueRenderer),Handsontable.renderers.registerRenderer("firstColRenderer",this.firstColRenderer)}return FormulationService.prototype.plannedValueRenderer=function(e,t,n,r,a,i,o){Handsontable.renderers.TextRenderer.apply(this,arguments);var s=a,l=s.replace("planned","actual"),c="#CCE0F1",u="#BBCFE0";e.getSourceData()[n].ingredient&&(e.getSourceData()[n].ingredient&&e.getSourceData()[n].ingredient.match(/ing.*/)&&(c="#F4F6F9",u="#E3E5E8"),e.getSourceData()[n][s]==e.getSourceData()[n][l]?t.style.background=c:""===e.getSourceData()[n][l]||0===e.getSourceData()[n][l]?t.style.background=c:i!=e.getSourceData()[n][l]&&(t.style.background=u))},FormulationService.prototype.targetIngredientRenderer=function(e,t,n,r,a,i,o){Handsontable.renderers.TextRenderer.apply(this,arguments),t.style.fontWeight="bold",t.style.background="#CEC"},FormulationService.prototype.actualValueRenderer=function(e,t,n,r,a,i,o){Handsontable.renderers.TextRenderer.apply(this,arguments);var s=a,l=s.replace("actual","planned"),c="#CCE0F1",u="#BBCFE0";e.getSourceData()[n].ingredient&&(e.getSourceData()[n].ingredient&&e.getSourceData()[n].ingredient.match(/ing.*/)&&(c="#F4F6F9",u="#E3E5E8"),e.getSourceData()[n][l]==e.getSourceData()[n][s]?t.style.background=c:""!==i&&0!==i&&e.getSourceData()[n][l]!=i&&(t.style.background=u))},FormulationService.prototype.firstColRenderer=function(e,t,n,r,a,i,o){Handsontable.renderers.TextRenderer.apply(this,arguments),e.getSourceData()[n].ingredient&&(e.getSourceData()[n].ingredient&&e.getSourceData()[n].ingredient.match(/ing.*/)?t.style.background="#F4F6F9":t.style.background="#CCE0F1")},FormulationService.prototype.switchToStability=function(){},FormulationService.prototype.loadFormulationView=function(){var e=this;if(this.formulationData.gotData)this.setupView();else{var t={TrialName:this.stateParams.trialname};this.ppService.runProtocolGet7(this.configService.formulationDataProtocol,t).subscribe(function(t){var n=t;e.formulationData.data=n,e.formulationData.gotData=!0,e.formulationData.isDoseResponse=!1;for(var r=0;r<n.processData.length;r++)if(n.processData[r].process_step.match(/.*aliquot.*/)){e.formulationData.isDoseResponse=!0;break}if(e.formulationData.isDoseResponse){e.formulationData.mainBatchFormulation.data=[],e.formulationData.holeFillFormulation.data=[],e.formulationData.mainBatchFormulation=e.formulationData.mainBatchFormulation,e.formulationData.holeFillFormulation=e.formulationData.holeFillFormulation;for(var a=!0,r=0;r<n.processData.length;r++)a?(e.formulationData.mainBatchFormulation.data.push(n.processData[r]),n.processData[r].process_step.match(/.*aliquot.*/)&&(a=!1)):e.formulationData.holeFillFormulation.data.push(n.processData[r])}e.setupView()},function(e){console.log(e)})}},FormulationService.prototype.setupView=function(){this.processData=this.formulationData.data.processData,this.columnHeaders=this.formulationData.data.columnHeaders,this.formulationData.isDoseResponse&&(this.mainBatchFormulation=this.formulationData.mainBatchFormulation.data,this.holeFillFormulation=this.formulationData.holeFillFormulation.data),this.formulationData.isDoseResponse?(this.createDoseResponseHOT(),this.createHoleFillHOT()):this.createNormalProcessHOT()},FormulationService.prototype.printGrid=function(){this.printDiv("print-area")},FormulationService.prototype.printDiv=function(e){this.app.printDiv(e)},FormulationService.prototype.copyPlannedToActual=function(){for(var e=0;e<this.formulationData.data.processData.length;e++)for(var t in this.formulationData.data.processData[e])if(t.match(/.*planned/)){var n=t.replace("planned","actual");""===this.formulationData.data.processData[e][n]&&(this.formulationData.data.processData[e][n]=this.formulationData.data.processData[e][t])}"undefined"!=typeof this.processHot&&null!==this.processHot&&this.processHot.render(),"undefined"!=typeof this.holeFillHot&&null!==this.holeFillHot&&this.holeFillHot.render()},FormulationService.prototype.saveData=function(){var e=this,t=this.formulationData.data.processData,n={TrialName:this.stateParams.trialname,_bodyParam:"FormData"};this.ppService.runProtocolPost1(this.configService.saveFormulationData,n,t).map(function(t){return console.log("Now create stability steps"),e.ppService.runProtocolGet1(e.configService.createStabilitySteps,n).subscribe(function(e){console.log(e)},function(e){console.log(e)}),t})},FormulationService.prototype.clearActual=function(){for(var e=0;e<this.formulationData.data.processData.length;e++)for(var t in this.formulationData.data.processData[e])t.match(/.*actual/)&&(this.formulationData.data.processData[e][t]="");"undefined"!=typeof this.processHot&&null!==this.processHot&&this.processHot.render(),"undefined"!=typeof this.holeFillHot&&null!==this.holeFillHot&&this.holeFillHot.render()},FormulationService.prototype.getPDF=function(){var e={TrialName:this.stateParams.trialname,_bodyParam:"FormData"},t=this.formulationData;this.ppService.runProtocolPost(this.configService.pdfBatchSheet,e,t).subscribe(function(e){window.open("https://experiment-unilever-dev.bioviaonline.com:9943/LabAutomation/BatchSheet","_blank")},function(e){console.log(e)})},FormulationService.prototype.upload=function(e){console.log(e)},FormulationService.prototype.uploadAndRun=function(e){console.log(e)},FormulationService.prototype.getData=function(e){var t=this,n={TrialName:e};this.ppService.runProtocolGet8(this.configService.formulationProtocol,n).subscribe(function(e){var n=e;t.data=n,t.gotData=!0},function(e){console.log(e)})},FormulationService.prototype.createDoseResponseHOT=function(){var e=[],t=[];e.push(" "),e.push("Material code"),e.push("RM used & Lot No."),e.push("% activity of RM"),e.push("Unit of measure");var n={data:"ingredient",readOnly:!0,width:300};t.push(n),t.push({data:"material_code",readOnly:!0,width:200}),t.push({data:"rm_used_lot_no",width:200}),t.push({data:"percent_activity",readOnly:!0,width:200}),t.push({data:"unit_of_measure",readOnly:!0,width:200});var r=!1,a=!1,i=!1;for(var o in this.formulationData.data.columnHeaders[0].columns){var s=this.formulationData.data.columnHeaders[0].columns[o];if(r&&a&&i)break;if(" "==s){var l=void 0;l={data:s,width:160,type:"string",readOnly:!1}}if(s.match(/.*-planned.*/)||s.match(/.*-actual.*/)||s.match(/.*-percent.*/)){var l=void 0;l={data:s,width:160,type:"numeric",readOnly:!1},s.match(/.*planned.*/)&&!a?(e.push("Planned"),l.readOnly=!0,a=!0,l.format="0.0[00000000]",t.push(l)):s.match(/.*percent.*/)&&!r?(l.readOnly=!0,e.push("Percent"),r=!0,l.format="0.0[00000000]",t.push(l)):s.match(/.*actual.*/)&&!i&&(l.editor="numeric",e.push("Actual"),i=!0,l.format="0.0[00000000]",t.push(l))}}var c=[];for(var u in this.formulationData.mainBatchFormulation.data)this.formulationData.mainBatchFormulation.data[u]&&this.formulationData.mainBatchFormulation.data[u].process_step&&this.formulationData.mainBatchFormulation.data[u].process_step.match(/^ing/)&&c.push(u);this.formulationData.mainBatchFormulation.data.push({}),this.formulationData.mainBatchFormulation.data.push({}),this.processHotDiv=document.getElementById("main-batch-formulation-table");var p={data:this.formulationData.mainBatchFormulation.data,colHeaders:e,headerTooltips:{rows:!0,columns:!0},manualColumnResize:!0,afterChange:function(e,t){},columns:t,cells:function(e,t,n){var r;return r={renderer:""},n.match(/.*planned/)||n.match(/.*percent/)?r.renderer="plannedValueRenderer":n.match(/.*actual/)?r.renderer="actualValueRenderer":r.renderer="firstColRenderer",r},columnSummary:[{destinationColumn:5,destinationRow:0,reversedRowCoords:!0,type:"sum",ranges:c,forceNumeric:!0},{destinationColumn:6,destinationRow:0,reversedRowCoords:!0,type:"sum",ranges:c,forceNumeric:!0},{destinationColumn:7,destinationRow:0,reversedRowCoords:!0,type:"sum",ranges:c,forceNumeric:!0}]};this.processHot=new Handsontable(this.processHotDiv,p),this.processHot.render()},FormulationService.prototype.createHoleFillHOT=function(){console.log("createHoleFillHOT");var e=[],t=[];e.push(" "),e.push("Material code"),e.push("RM used & Lot No."),e.push("% activity of RM"),e.push("Unit of measure");var n={data:"ingredient",readOnly:!0};t.push(n),t.push({data:"material_code",readOnly:!0}),t.push({data:"rm_used_lot_no"}),t.push({data:"percent_activity",readOnly:!0}),t.push({data:"unit_of_measure",readOnly:!0});var r=!1,a=!1,i=!1;for(var o in this.formulationData.data.columnHeaders[0].columns){var s=this.formulationData.data.columnHeaders[0].columns[o];if(s.match(/.*-planned.*/)||s.match(/.*-actual.*/)||s.match(/.*-percent.*/)){var l=void 0;l={data:s,type:"numeric"},s.match(/.*planned.*/)?(e.push("Planned"),l.readOnly=!0,a=!0,l.format="0.0[00000000]",t.push(l)):s.match(/.*percent.*/)?(l.readOnly=!0,e.push("Percent"),r=!0,l.format="0.0[00000000]",t.push(l)):s.match(/.*actual.*/)&&(l.editor="numeric",e.push("Actual"),i=!0,l.format="0.0[00000000]",t.push(l))}}var c=[],u=[],p=[];u.push(" "),p.push(" "),u.push("Material code"),u.push("RM used & Lot No."),u.push("% activity of RM"),u.push("Unit of measure"),p.push(" "),p.push(" "),p.push(" "),p.push(" ");for(var d=0;d<this.columnHeaders[0].columns.length;d++){var f=void 0;f=this.columnHeaders[0].columns[d].match(/(.*)-(.*)/),"undefined"!=typeof f&&null!==f&&("percent"===f[2]&&u.push({label:this.capitalizeFirstLetter(f[1]),colspan:2}),p.push(this.capitalizeFirstLetter(f[2])))}c.push(u),c.push(p),this.holeFillHotDiv=document.getElementById("hole-fill-formulation-table");var h={data:this.formulationData.holeFillFormulation.data,nestedHeaders:c,contextMenu:!0,afterChange:function(e,t){},columns:t,cells:function(e,t,n){var r;return r={renderer:""},n.match(/.*planned/)||n.match(/.*percent/)?r.renderer="plannedValueRenderer":n.match(/.*actual/)?r.renderer="actualValueRenderer":r.renderer="firstColRenderer",r}};console.log("hotSettings"),console.dir(h),this.holeFillHot=new Handsontable(this.holeFillHotDiv,h)},FormulationService.prototype.createNormalProcessHOT=function(){var e=[],t=[];e.push(" ");var n={data:"ingredient",readOnly:!0};t.push(n),t.push({data:"materialcode",readOnly:!0}),t.push({data:"rm_used_lot_no"}),t.push({data:"percentactive",readOnly:!0}),t.push({data:"unit_of_measure",readOnly:!0});var r=[],a=[];for(var i in this.processData)if(this.processData[i]&&this.processData[i].process_step&&this.processData[i].process_step.match(/^ing/)){var o=[];o.push(parseInt(i)),a.push(o)}for(var s=0;s<this.columnHeaders[0].columns.length;s++)if(this.columnHeaders[0].columns[s].match(/.*-planned.*/)||this.columnHeaders[0].columns[s].match(/.*-percent.*/)||this.columnHeaders[0].columns[s].match(/.*-actual.*/)){e.push(this.columnHeaders[0].columns[s]);var l=void 0;l={data:this.columnHeaders[0].columns[s],type:"numeric"},this.columnHeaders[0].columns[s].match(/.*-planned.*/)||this.columnHeaders[0].columns[s].match(/.*-percent.*/)?l.readOnly=!0:l.editor="numeric",l.format="0.0[00000000]",t.push(l),r.push({destinationColumn:4+s,destinationRow:0,reversedRowCoords:!0,type:"sum",ranges:a,forceNumeric:!0})}var c=[],u=[],p=[];u.push(" "),p.push(" "),u.push("Material code"),u.push("RM used & Lot No."),u.push("% activity of RM"),u.push("Unit of measure"),p.push(" "),p.push(" "),p.push(" "),p.push(" "),console.log("this.columnHeaders[0]"),console.dir(this.columnHeaders[0]);for(var s=0;s<this.columnHeaders[0].columns.length;s++){var d=this.columnHeaders[0].columns[s].match(/(.*)-(.*)/);console.log("myMatch!!"),console.dir(d),"undefined"!=typeof d&&null!==d?("percent"===d[2]&&(console.log("***topLine.push***"),
u.push({label:this.capitalizeFirstLetter(d[1]),colspan:2})),"percent"!==d[2]&&"planned"!==d[2]&&"actual"!==d[2]||p.push(this.capitalizeFirstLetter(d[2]))):console.log("**************continue*************")}console.log("top line"),console.dir(u),console.log("secondLine"),console.dir(p),c.push(u),c.push(p),this.processData.push({}),this.processData.push({}),this.processHotDiv=document.getElementById("process-formulation-table");var f={data:this.processData,nestedHeaders:c,columns:t,columnSummary:r,cells:function(e,t,n){var r;return r={renderer:""},"string"!=typeof n?r:(n.match(/.*planned/)||n.match(/.*percent/)?r.renderer="plannedValueRenderer":n.match(/.*actual/)?r.renderer="actualValueRenderer":r.renderer="firstColRenderer",r)}};console.log("hotSettings!!!"),console.dir(f),this.processHotDiv.innerHTML="",this.processHot=new Handsontable(this.processHotDiv,f)},FormulationService.prototype.capitalizeFirstLetter=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},FormulationService=r([i.Injectable(),a("design:paramtypes",[f.AppService,c.StateService,u.StateParamsService,p.HTTPService,d.ConfigService,s.DesignService,l.ExperimentSetupService,o.Router])],FormulationService)}();t.FormulationService=m},390:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(1),o=n(55),s=n(90),l=n(91),c=n(108),u=n(107),p=n(32),d=function(){function StabilityService(e,t,n,r,a){this.app=e,this.ppService=t,this.configService=n,this.trialService=r,this.stateParams=a,this.gotData=!1,this.stabilityHotDiv=document.getElementById("stability-grid"),this.stabilityPlotDivAll=document.getElementById("stability-plots-all"),this.stabilityPlotDivThis=document.getElementById("stability-plots-this-pH"),this.executionMode="manual",this.changesMade=!1,this.showPlots=!1,this.showPlotsState="Show Plots",this.tests={pH:{title:"pH",div:"pH"},visc2:{title:"Viscosity @ 2/s",div:"visc2"},visc21:{title:"Viscosity @ 21/s",div:"visc21"},visc106:{title:"Viscosity @ 106/s",div:"visc106"}},this.completeData={},this.selection={testWeek:"1",plotStyle:"All weeks"},Handsontable.renderers.registerRenderer("appearanceRenderer",this.appearanceRenderer),this.stabilityData=new p.Stability,this.selection.plotStyle="All weeks",this.selection.testWeek="Week1",this.options=new p.StabilityOptions,this.stabilityData=new p.Stability,this.selection=new p.StabilitySelection,this.options=new p.StabilityOptions}return StabilityService.prototype.getData=function(e){var t=this,n={TrialName:e};this.ppService.runProtocolGet(this.configService.stabilityProtocol,n).subscribe(function(e){var n=e;t.data=n,t.gotData=!0},function(e){console.log(e)})},StabilityService.prototype.loadStabilityView=function(){var e=this;if(this.stabilityData.gotData)this.setupView();else{var t={TrialName:this.stateParams.trialname};this.ppService.runProtocolGetStabilityView(this.configService.stabilitySetupProtocol,t).then(function(n){var r=n;e.stabilityData.gotData=!0,e.stabilityData.data=r,e.selection.testWeek=r.setup.testWeeks[0],e.ppService.runProtocolGetEnteredStabilityData(e.configService.getEnteredStabilityDaya,t).then(function(t){var n=t;"undefined"!=typeof n&&(e.stabilityData.enteredData=n[0]),e.setupView()}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})}},StabilityService.prototype.setupView=function(){this.options.testWeeks=this.stabilityData.data.setup.testWeeks,this.options.plotStyles=["Selected week","All weeks"],this.plotStyle=this.options.plotStyles[1],this.createStabGrid(this.selection.testWeek)},StabilityService.prototype.getThisData=function(e){void 0===this.stabilityData.enteredData&&(this.stabilityData.enteredData=[]);var t=this.stabilityData.data.samples["Week"+e],n=[];for(var r in t)for(var a in t[r].test){var i=!0,o=t[r].test[a].test;for(var s in n)n[s]===o&&(i=!1);i&&n.push(o)}void 0===this.stabilityData.enteredData["Week"+e]&&(this.stabilityData.enteredData["Week"+e]={});for(var s in this.stabilityData.enteredData){this.stabilityData.enteredData[s];for(var r in t)for(var a in n){void 0===this.stabilityData.enteredData["Week"+e][n[a]]&&(this.stabilityData.enteredData["Week"+e][n[a]]={});for(var l in t[r].temperature)"undefined"==typeof this.stabilityData.enteredData["Week"+e][n[a]][r+"=="+t[r].temperature[l].temperature]&&(this.stabilityData.enteredData["Week"+e][n[a]][r+"=="+t[r].temperature[l].temperature]="")}}},StabilityService.prototype.appearanceRenderer=function(e,t,n,r,a,i,o){Handsontable.AutocompleteCell.renderer.apply(this,arguments),"Red"===i?t.style.background="red":"Fail - Amber"===i||"Pass - Amber"===i?t.style.background="orange":"Green"===i&&(t.style.background="green")},StabilityService.prototype.createStabGrid=function(e){var t=this;this.getThisData(e);var n=[],r=[],a=[];for(var i in this.stabilityData.enteredData["Week"+e])for(var o in this.stabilityData.enteredData["Week"+e][i]){var s=!0;for(var l in n)o===n[l]&&(s=!1);s&&(n.push(o),r.push({data:o}),a.push("55"))}var c=[],u=[],d=[];for(var f in this.stabilityData.data.samples["Week"+e]){var h=this.stabilityData.data.samples["Week"+e][f],m=0;for(var g in h.temperature)u.push(h.temperature[g].temperature),m+=1;c.push({label:f,colspan:m})}d.push(c),d.push(u);var v=[],y=[],b=["Appearance","Viscosity @ 2/s","Viscosity @ 21/s","Viscosity @ 106/s","pH"];for(var S in b)v.push(this.stabilityData.enteredData["Week"+e][b[S]]),y.push(b[S]);"undefined"==typeof this.stabilityHot?this.stabilityHot=new Handsontable(this.stabilityHotDiv,{data:v,colHeaders:n,nestedHeaders:d,rowHeaders:y,colWidths:a,rowHeaderWidth:120,afterChange:function(e,n){"loadData"!==n&&(t.loadStabilityPlots(),t.changesMade=!0)},cells:function(e,t,n){var r;return r=new p.CellProperties,"Appearance"===y[e]&&(r.type="dropdown",r.source=["Red","Fail - Amber","Pass - Amber","Green"],r.renderer="appearanceRenderer"),r}}):this.stabilityHot.updateSettings({nestedHeaders:d,data:v,columns:r}),this.loadStabilityPlots()},StabilityService.prototype.loadStabilityPlots=function(){if("undefined"!=typeof this.stabilityData){var e=[];for(var t in this.stabilityData.data.samples)for(var n in this.tests){var r=[];for(var a in this.stabilityData.data.samples[t]){var i=void 0;if(i=this.getThisWeekPlotData(this.selection.testWeek,n,a),"undefined"!=typeof i){var o={x:i.x,y:i.y,name:a,xaxis:"x1",yaxis:"y1"};r.push(o)}}e[n]=r}var s=[];for(var n in this.tests){var l=void 0;l=new p.Layout,l.title=this.tests[n].title,l.height=500,l.width=800,"pH"===this.tests[n].title?l.yaxis={title:"pH"}:l.yaxis={title:"Viscosity (cP)"},"Selected week"===this.plotStyle&&(console.log("Selected week"),l.xaxis={title:"Storage temperature"},Plotly.newPlot(this.tests[n].divThis,e[n],l,{modeBarButtonsToRemove:["sendDataToCloud"],displaylogo:!1,doubleClick:"reset+autosize"})),"All weeks"===this.plotStyle&&(console.log("All weeks"),l.xaxis={title:"Test week"},Plotly.newPlot(this.tests[n].divAll,s[n],l,{modeBarButtonsToRemove:["sendDataToCloud"],displaylogo:!1,doubleClick:"reset+autosize"}),console.log("bye"))}}},StabilityService.prototype.getThisWeekPlotData=function(e,t,n){var r,a=this.tests[t].title;r=new p.ThisWeekPlotData;var i=[],o=[],s=[];if("undefined"!=typeof this.stabilityData.enteredData["Week"+e]&&"undefined"!=typeof this.stabilityData.enteredData["Week"+e][a]){for(var l in this.stabilityData.enteredData["Week"+e][a])if(0===l.lastIndexOf(n)){var c=void 0;c=new p.StabilityThisData,c.x=l.substring(l.lastIndexOf("=")+1),"RT"===c.x&&(c.x="21"),c.y=this.stabilityData.enteredData["Week"+e][a][l],i.push(c)}i.sort(function(e,t){return+e.x>+t.x?1:+e.x<+t.x?-1:0});for(var u in i)o.push(i[u].x),s.push(i[u].y);return r.x=o,r.y=s,r}},StabilityService.prototype.MoveDateTime=function(e){for(var t=-1,n=0;n<this.options.testWeeks.length;n++)this.options.testWeeks[n]===this.selection.testWeek&&(t=n);t>=0&&(t+=e),t>=0&&t<this.options.testWeeks.length&&(this.selection.testWeek=this.options.testWeeks[t]),this.loadStabilityPlots()},StabilityService.prototype.NewTestWeek=function(){var e=this,t=!1,n=this.newTestWeek;for(var r in this.options.testWeeks)this.options.testWeeks[r]==n&&(t=!0);if(t)alert("Week already exists");else{var a=void 0;a.TrialName=this.stateParams.trialname,a.newTestWeek=n,this.ppService.runProtocolGet(this.configService.newTestWeek,a).subscribe(function(t){e.stabilityData.gotData=!1,e.loadStabilityView()},function(e){})}},StabilityService.prototype.printGrid=function(){this.app.printDiv("stability-grid")},StabilityService.prototype.createNestedHeaders=function(){for(var e,t=0;t<this.selection.tests.length;t++)e.push({label:this.selection.tests[t],colspan:this.selection.temperatures.length});for(var n,r=0;r<this.selection.tests.length;r++)for(var t=0;t<this.selection.temperatures.length;t++)n.push(this.selection.temperatures[t]);var a=[e,n];return a},StabilityService.prototype.getAllWeeksPlotData=function(e,t){var n=this.tests[e].title;if("undefined"!=typeof this.stabilityData){var r={};for(var a in this.stabilityData.data.samples)for(var i in this.stabilityData.enteredData[a])if(i===n)for(var o in this.stabilityData.enteredData[a][i])if(0===o.indexOf(t)){"undefined"==typeof r[o]&&(r[o]=[]);var s=this.stabilityData.enteredData[a][i][o];r[o].push({week:a,value:s})}return r}},StabilityService.prototype.saveDataToEKB=function(){var e={TrialName:this.stateParams.trialname,_bodyParam:"FormData"},t=this.stabilityData.enteredData;"undefined"!=typeof t&&null!==t&&this.ppService.runProtocolPost1(this.configService.saveStabilityToExperimentProtocol,e,t).subscribe(function(e){},function(e){return console.log(e)})},StabilityService.prototype.changeMode=function(){console.log("changeMode"),"manual"==this.executionMode?this.executionMode="auto":this.executionMode="manual"},StabilityService.prototype.showhidePlots=function(){console.log("showhidePlots"),this.showPlots=!this.showPlots,this.showPlots?this.showPlotsState="Hide Plots":this.showPlotsState="Show Plots"},StabilityService=r([i.Injectable(),a("design:paramtypes",[s.AppService,o.HTTPService,l.ConfigService,c.TrialService,u.StateParamsService])],StabilityService)}();t.StabilityService=d},421:function(e,t,n){"use strict";var r=n(1),a=n(199),i=n(96),o=n(115);n.d(t,"a",function(){return l});var s=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},l=function(e){function DraggableComponent(t,n,a,i){e.call(this,t,n,a,i),this.onDragStart=new r.EventEmitter,this.onDragEnd=new r.EventEmitter,this.onDragSuccessCallback=new r.EventEmitter,this._defaultCursor=this._elem.style.cursor,this.dragEnabled=!0}return s(DraggableComponent,e),Object.defineProperty(DraggableComponent.prototype,"draggable",{set:function(e){this.dragEnabled=!!e},enumerable:!0,configurable:!0}),Object.defineProperty(DraggableComponent.prototype,"dropzones",{set:function(e){this.dropZones=e},enumerable:!0,configurable:!0}),Object.defineProperty(DraggableComponent.prototype,"effectallowed",{set:function(e){this.effectAllowed=e},enumerable:!0,configurable:!0}),Object.defineProperty(DraggableComponent.prototype,"effectcursor",{set:function(e){this.effectCursor=e},enumerable:!0,configurable:!0}),DraggableComponent.prototype._onDragStartCallback=function(e){this._dragDropService.isDragged=!0,this._dragDropService.dragData=this.dragData,this._dragDropService.onDragSuccessCallback=this.onDragSuccessCallback,this._elem.classList.add(this._config.onDragStartClass),this.onDragStart.emit({dragData:this.dragData,mouseEvent:e})},DraggableComponent.prototype._onDragEndCallback=function(e){this._dragDropService.isDragged=!1,this._dragDropService.dragData=null,this._dragDropService.onDragSuccessCallback=null,this._elem.classList.remove(this._config.onDragStartClass),this.onDragEnd.emit({dragData:this.dragData,mouseEvent:e})},DraggableComponent.decorators=[{type:r.Directive,args:[{selector:"[dnd-draggable]"}]}],DraggableComponent.ctorParameters=function(){return[{type:r.ElementRef},{type:o.c},{type:i.c},{type:r.ChangeDetectorRef}]},DraggableComponent.propDecorators={draggable:[{type:r.Input,args:["dragEnabled"]}],onDragStart:[{type:r.Output}],onDragEnd:[{type:r.Output}],dragData:[{type:r.Input}],onDragSuccessCallback:[{type:r.Output,args:["onDragSuccess"]}],dropzones:[{type:r.Input,args:["dropZones"]}],effectallowed:[{type:r.Input,args:["effectAllowed"]}],effectcursor:[{type:r.Input,args:["effectCursor"]}],dragImage:[{type:r.Input}],cloneItem:[{type:r.Input}]},DraggableComponent}(a.a)},422:function(e,t,n){"use strict";var r=n(1),a=n(199),i=n(96),o=n(115);n.d(t,"a",function(){return l});var s=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},l=function(e){function DroppableComponent(t,n,a,i){e.call(this,t,n,a,i),this.onDropSuccess=new r.EventEmitter,this.onDragEnter=new r.EventEmitter,this.onDragOver=new r.EventEmitter,this.onDragLeave=new r.EventEmitter,this.dropEnabled=!0}return s(DroppableComponent,e),Object.defineProperty(DroppableComponent.prototype,"droppable",{set:function(e){this.dropEnabled=!!e},enumerable:!0,configurable:!0}),Object.defineProperty(DroppableComponent.prototype,"allowdrop",{set:function(e){this.allowDrop=e},enumerable:!0,configurable:!0}),Object.defineProperty(DroppableComponent.prototype,"dropzones",{set:function(e){this.dropZones=e},enumerable:!0,configurable:!0}),Object.defineProperty(DroppableComponent.prototype,"effectallowed",{set:function(e){this.effectAllowed=e},enumerable:!0,configurable:!0}),Object.defineProperty(DroppableComponent.prototype,"effectcursor",{set:function(e){this.effectCursor=e},enumerable:!0,configurable:!0}),DroppableComponent.prototype._onDragEnterCallback=function(e){this._dragDropService.isDragged&&(this._elem.classList.add(this._config.onDragEnterClass),this.onDragEnter.emit({dragData:this._dragDropService.dragData,mouseEvent:e}))},DroppableComponent.prototype._onDragOverCallback=function(e){this._dragDropService.isDragged&&(this._elem.classList.add(this._config.onDragOverClass),this.onDragOver.emit({dragData:this._dragDropService.dragData,mouseEvent:e}))},DroppableComponent.prototype._onDragLeaveCallback=function(e){this._dragDropService.isDragged&&(this._elem.classList.remove(this._config.onDragOverClass),this._elem.classList.remove(this._config.onDragEnterClass),this.onDragLeave.emit({dragData:this._dragDropService.dragData,mouseEvent:e}))},DroppableComponent.prototype._onDropCallback=function(e){this._dragDropService.isDragged&&(this.onDropSuccess.emit({dragData:this._dragDropService.dragData,mouseEvent:e}),this._dragDropService.onDragSuccessCallback&&this._dragDropService.onDragSuccessCallback.emit({dragData:this._dragDropService.dragData,mouseEvent:e}),this._elem.classList.remove(this._config.onDragOverClass),this._elem.classList.remove(this._config.onDragEnterClass))},DroppableComponent.decorators=[{type:r.Directive,args:[{selector:"[dnd-droppable]"}]}],DroppableComponent.ctorParameters=function(){return[{type:r.ElementRef},{type:o.c},{type:i.c},{type:r.ChangeDetectorRef}]},DroppableComponent.propDecorators={droppable:[{type:r.Input,args:["dropEnabled"]}],onDropSuccess:[{type:r.Output}],onDragEnter:[{type:r.Output}],onDragOver:[{type:r.Output}],onDragLeave:[{type:r.Output}],allowdrop:[{type:r.Input,args:["allowDrop"]}],dropzones:[{type:r.Input,args:["dropZones"]}],effectallowed:[{type:r.Input,args:["effectAllowed"]}],effectcursor:[{type:r.Input,args:["effectCursor"]}]},DroppableComponent}(a.a)},423:function(e,t,n){"use strict";var r=n(1),a=n(199),i=n(96),o=n(115);n.d(t,"a",function(){return l}),n.d(t,"b",function(){return c});var s=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},l=function(e){function SortableContainer(t,n,r,a,i){e.call(this,t,n,r,a),this._sortableDataService=i,this._sortableData=[],this.dragEnabled=!1}return s(SortableContainer,e),Object.defineProperty(SortableContainer.prototype,"draggable",{set:function(e){this.dragEnabled=!!e},enumerable:!0,configurable:!0}),Object.defineProperty(SortableContainer.prototype,"sortableData",{get:function(){return this._sortableData},set:function(e){this._sortableData=e,this.dropEnabled=!!this._sortableData},enumerable:!0,configurable:!0}),Object.defineProperty(SortableContainer.prototype,"dropzones",{set:function(e){this.dropZones=e},enumerable:!0,configurable:!0}),SortableContainer.prototype._onDragEnterCallback=function(e){if(this._sortableDataService.isDragged){var t=this._sortableDataService.sortableContainer._sortableData[this._sortableDataService.index];this._sortableData.indexOf(t)===-1&&(this._sortableDataService.sortableContainer._sortableData.splice(this._sortableDataService.index,1),0===this._sortableDataService.sortableContainer._sortableData.length&&(this._sortableDataService.sortableContainer.dropEnabled=!0),this._sortableData.unshift(t),this._sortableDataService.sortableContainer=this,this._sortableDataService.index=0),this.detectChanges()}},SortableContainer.decorators=[{type:r.Directive,args:[{selector:"[dnd-sortable-container]"}]}],SortableContainer.ctorParameters=function(){return[{type:r.ElementRef},{type:o.c},{type:i.c},{type:r.ChangeDetectorRef},{type:o.e}]},SortableContainer.propDecorators={draggable:[{type:r.Input,args:["dragEnabled"]}],sortableData:[{type:r.Input}],dropzones:[{type:r.Input,args:["dropZones"]}]},SortableContainer}(a.a),c=function(e){function SortableComponent(t,n,a,i,o,s){e.call(this,t,n,a,s),this._sortableContainer=i,this._sortableDataService=o,this.onDragSuccessCallback=new r.EventEmitter,this.onDragStartCallback=new r.EventEmitter,this.onDragOverCallback=new r.EventEmitter,this.onDragEndCallback=new r.EventEmitter,this.onDropSuccessCallback=new r.EventEmitter,this.dropZones=this._sortableContainer.dropZones,this.dragEnabled=!0,this.dropEnabled=!0}return s(SortableComponent,e),Object.defineProperty(SortableComponent.prototype,"draggable",{set:function(e){this.dragEnabled=!!e},enumerable:!0,configurable:!0}),Object.defineProperty(SortableComponent.prototype,"droppable",{set:function(e){this.dropEnabled=!!e},enumerable:!0,configurable:!0}),Object.defineProperty(SortableComponent.prototype,"effectallowed",{set:function(e){this.effectAllowed=e},enumerable:!0,configurable:!0}),Object.defineProperty(SortableComponent.prototype,"effectcursor",{set:function(e){this.effectCursor=e},enumerable:!0,configurable:!0}),SortableComponent.prototype._onDragStartCallback=function(e){this._sortableDataService.isDragged=!0,this._sortableDataService.sortableContainer=this._sortableContainer,this._sortableDataService.index=this.index,this._sortableDataService.markSortable(this._elem),this._dragDropService.isDragged=!0,this._dragDropService.dragData=this.dragData,this._dragDropService.onDragSuccessCallback=this.onDragSuccessCallback,this.onDragStartCallback.emit(this._dragDropService.dragData)},SortableComponent.prototype._onDragOverCallback=function(e){this._sortableDataService.isDragged&&this._elem!==this._sortableDataService.elem&&(this._sortableDataService.sortableContainer=this._sortableContainer,this._sortableDataService.index=this.index,this._sortableDataService.markSortable(this._elem),this.onDragOverCallback.emit(this._dragDropService.dragData))},SortableComponent.prototype._onDragEndCallback=function(e){this._sortableDataService.isDragged=!1,this._sortableDataService.sortableContainer=null,this._sortableDataService.index=null,this._sortableDataService.markSortable(null),this._dragDropService.isDragged=!1,this._dragDropService.dragData=null,this._dragDropService.onDragSuccessCallback=null,this.onDragEndCallback.emit(this._dragDropService.dragData)},SortableComponent.prototype._onDragEnterCallback=function(e){if(this._sortableDataService.isDragged&&(this._sortableDataService.markSortable(this._elem),this.index!==this._sortableDataService.index||this._sortableDataService.sortableContainer.sortableData!==this._sortableContainer.sortableData)){var t=this._sortableDataService.sortableContainer.sortableData[this._sortableDataService.index];this._sortableDataService.sortableContainer.sortableData.splice(this._sortableDataService.index,1),0===this._sortableDataService.sortableContainer.sortableData.length&&(this._sortableDataService.sortableContainer.dropEnabled=!0),this._sortableContainer.sortableData.splice(this.index,0,t),this._sortableContainer.dropEnabled&&(this._sortableContainer.dropEnabled=!1),this._sortableDataService.sortableContainer=this._sortableContainer,this._sortableDataService.index=this.index}},SortableComponent.prototype._onDropCallback=function(e){this._sortableDataService.isDragged&&(this.onDropSuccessCallback.emit(this._dragDropService.dragData),this._dragDropService.onDragSuccessCallback&&this._dragDropService.onDragSuccessCallback.emit(this._dragDropService.dragData),this._sortableContainer.detectChanges())},SortableComponent.decorators=[{type:r.Directive,args:[{selector:"[dnd-sortable]"}]}],SortableComponent.ctorParameters=function(){return[{type:r.ElementRef},{type:o.c},{type:i.c},{type:l},{type:o.e},{type:r.ChangeDetectorRef}]},SortableComponent.propDecorators={index:[{type:r.Input,args:["sortableIndex"]}],draggable:[{type:r.Input,args:["dragEnabled"]}],droppable:[{type:r.Input,args:["dropEnabled"]}],dragData:[{type:r.Input}],effectallowed:[{type:r.Input,args:["effectAllowed"]}],effectcursor:[{type:r.Input,args:["effectCursor"]}],onDragSuccessCallback:[{type:r.Output,args:["onDragSuccess"]}],onDragStartCallback:[{type:r.Output,args:["onDragStart"]}],onDragOverCallback:[{type:r.Output,args:["onDragOver"]}],onDragEndCallback:[{type:r.Output,args:["onDragEnd"]}],onDropSuccessCallback:[{type:r.Output,args:["onDropSuccess"]}]},SortableComponent}(a.a)},456:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(1),o=n(120),s=n(300),l=n(208),c=n(576),u=n(582),p=n(386),d=n(578),f=n(577),h=n(580),m=n(579),g=n(581),v=n(387),y=n(388),b=n(584),S=n(583),D=n(585),_=n(750),w=n(575),x=function(){function AppModule(){}return AppModule=r([i.NgModule({imports:[o.BrowserModule,s.FormsModule,l.HttpModule,D.AppRoutingModule,_.DndModule.forRoot(),w.FileDropModule],declarations:[c.AppComponent,u.HeaderComponent,p.DesignComponent,v.FormulationComponent,d.ParentFormulationComponent,f.ExperimentType,h.TestFormulations,m.ProcessParameters,g.TestShedule,y.StabilityComponent,b.UniquePipe,S.ContainPipe],providers:[],bootstrap:[c.AppComponent]}),a("design:paramtypes",[])],AppModule)}();t.AppModule=x},54:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},a=this&&this.__decorate||function(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=n(1),s=n(32),l=function(e){function ExperimentSetupService(){e.call(this)}return r(ExperimentSetupService,e),ExperimentSetupService=a([o.Injectable(),i("design:paramtypes",[])],ExperimentSetupService)}(s.DataService);t.ExperimentSetupService=l},55:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(1),o=n(208),s=n(0);n(427),n(428);var l=function(){function HTTPService(e){this.http=e,this.ppServer="srv-ict-14652.scnsoft.com",this.port=9944,this.sslPort=9943,this.tmpProtocolPath="LabAutomation/LaundryLiquids/design/ControlPanel",this.tmpUrl="https://"+this.ppServer+":"+this.sslPort+"/protocols/"+this.tmpProtocolPath}return HTTPService.prototype.runProtocolGet=function(e,t){return console.log("runProtocolGet"),this.http.get("assets/json/ControlPanel.json").map(this.extract).catch(this.handleError)},HTTPService.prototype.runProtocolGet0=function(e,t){return console.log("runProtocolGet0"),this.http.get("assets/json/ControlPanel.json").map(this.extract).catch(this.handleError)},HTTPService.prototype.runProtocolGetDesignData=function(e,t){return console.log("runProtocolGetDesignData"),this.http.get("assets/json/protocol.responce.json").map(this.extract).catch(this.handleError)},HTTPService.prototype.runProtocolGet1=function(e,t){return console.log("runProtocolGet1"),this.http.get("assets/json/protocol.responce.json").map(this.extract).catch(this.handleError)},HTTPService.prototype.runProtocolGet2=function(e,t){return console.log("runProtocolGet2"),this.http.get("assets/json/experimenttypes.json").map(this.extract).catch(this.handleError)},HTTPService.prototype.runProtocolGet3=function(e,t){return console.log("runProtocolGet3"),this.http.get("assets/json/processparameters.json").map(this.extract).catch(this.handleError)},HTTPService.prototype.runProtocolGet4=function(e,t){return console.log("runProtocolGet4"),this.http.get("assets/json/avaliabletests.json").map(this.extract).catch(this.handleError)},HTTPService.prototype.runProtocolGet5=function(e,t){return console.log("runProtocolGet5"),this.http.get("assets/json/experiment2json.json").map(this.extract).catch(this.handleError)},HTTPService.prototype.runProtocolGet6=function(e,t){return console.log("runProtocolGet6"),this.http.get("assets/json/testshedule.json").map(this.extract).catch(this.handleError)},HTTPService.prototype.runProtocolGet7=function(e,t){return console.log("runProtocolGet7"),this.http.get("assets/json/formulationdata.json").map(this.extract).catch(this.handleError)},HTTPService.prototype.runProtocolGet8=function(e,t){return console.log("runProtocolGet8"),this.http.get("assets/json/formulationdata.json").map(this.extract).catch(this.handleError)},HTTPService.prototype.runProtocolGetStabilityView=function(e,t){return this.http.get("assets/json/stabilitySetupProtocol.json").toPromise().then(this.extract)},HTTPService.prototype.runProtocolGetEnteredStabilityData=function(e,t){return this.http.get("assets/json/getEnteredStabilityData.json").toPromise().then(function(e){return e.json()})},HTTPService.prototype.runProtocolGetStabilityData=function(e,t){return console.log("runProtocolGetStabilityDaya"),this.http.get("assets/json/StabilityData.json").map(this.extract2).catch(this.handleError)},HTTPService.prototype.runProtocolPost=function(e,t,n){return console.log("runProtocolPost"),this.http.get("https://"+this.ppServer+":"+this.sslPort+"/auth/launchjob?_protocol=Protocols/"+e).map(this.extract).catch(this.handleError)},HTTPService.prototype.runProtocolPost1=function(e,t,n){return console.log("runProtocolPost1"),this.http.get("publicPath/allformulations.json").map(this.extract).catch(this.handleError)},HTTPService.prototype.extract=function(e){var t=e.json();return t||{}},HTTPService.prototype.extract1=function(e){var t=e.json();return console.dir(t),t||{}},HTTPService.prototype.extract2=function(e){var t=e.json();return t||{}},HTTPService.prototype.extractData=function(e){var t=e.json().data;return console.log(t),t||{}},HTTPService.prototype.handleError=function(e){var t;if(e instanceof o.Response){var n=e.json()||"",r=n.error||JSON.stringify(n);t=e.status+" - "+(e.statusText||"")+" "+r}else t=e.message?e.message:e.toString();return console.error(t),s.Observable.throw(t)},HTTPService.prototype.getPPUser=function(){return this.http.get("assets/json/currentuser.xml").map(this.extract).catch(this.handleError)},HTTPService=r([i.Injectable(),a("design:paramtypes",[o.Http])],HTTPService)}();t.HTTPService=l},573:function(e,t,n){"use strict";var r=n(1),a=n(574);n.d(t,"a",function(){return o});var i=this&&this.__decorate||function(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},o=function(){function FileDropModule(){}return FileDropModule}();o=i([n.i(r.NgModule)({declarations:[a.a],exports:[a.a],imports:[],providers:[]})],o)},574:function(e,t,n){"use strict";var r=n(739),a=(n.n(r),n(1));n.d(t,"a",function(){return s});var i=this&&this.__decorate||function(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function FileDropDirective(e){this.fileOver=new a.EventEmitter,this.onFileDrop=new a.EventEmitter,this.element=e}return FileDropDirective.prototype.onDragOver=function(e){var t=this.getDataTransfer(e);this.haveFiles(t.types)&&(t.dropEffect="copy",this.preventAndStop(e),this.emitFileOver(!0))},FileDropDirective.prototype.onDragLeave=function(e){e.currentTarget!==this.element[0]&&(this.preventAndStop(e),this.emitFileOver(!1))},FileDropDirective.prototype.onDrop=function(e){var t=this.getDataTransfer(e);t&&(this.preventAndStop(e),this.emitFileOver(!1),this.readFile(t.files[0]))},FileDropDirective.prototype.readFile=function(e){var t=this,n=this.pickStrategy();if(n){var r="readAs"+n;FileAPI[r](e,function(n){if("load"===n.type)t.emitFileDrop(n.result);else if("error"===n.type)throw new Error("Couldn't read file '"+e.name+"'")})}else this.emitFileDrop(e)},FileDropDirective.prototype.emitFileOver=function(e){this.fileOver.emit(e)},FileDropDirective.prototype.emitFileDrop=function(e){this.onFileDrop.emit(e)},FileDropDirective.prototype.pickStrategy=function(){if(this.options)return this.hasStrategy(this.options.readAs)?this.options.readAs:void 0},FileDropDirective.prototype.hasStrategy=function(e){return["DataURL","BinaryString","ArrayBuffer","Text"].indexOf(e)!==-1},FileDropDirective.prototype.getDataTransfer=function(e){return e.dataTransfer?e.dataTransfer:e.originalEvent.dataTransfer},FileDropDirective.prototype.preventAndStop=function(e){e.preventDefault(),e.stopPropagation()},FileDropDirective.prototype.haveFiles=function(e){return!!e&&(e.indexOf?e.indexOf("Files")!==-1:!!e.contains&&e.contains("Files"))},FileDropDirective}();i([n.i(a.Output)(),o("design:type",a.EventEmitter)],s.prototype,"fileOver",void 0),
i([n.i(a.Output)(),o("design:type",a.EventEmitter)],s.prototype,"onFileDrop",void 0),i([n.i(a.Input)(),o("design:type",Object)],s.prototype,"options",void 0),i([n.i(a.HostListener)("dragover",["$event"]),o("design:type",Function),o("design:paramtypes",[Object]),o("design:returntype",void 0)],s.prototype,"onDragOver",null),i([n.i(a.HostListener)("dragleave",["$event"]),o("design:type",Function),o("design:paramtypes",[Object]),o("design:returntype",void 0)],s.prototype,"onDragLeave",null),i([n.i(a.HostListener)("drop",["$event"]),o("design:type",Function),o("design:paramtypes",[Object]),o("design:returntype",void 0)],s.prototype,"onDrop",null),s=i([n.i(a.Directive)({selector:"[fileDrop]"}),o("design:paramtypes",[a.ElementRef])],s)},575:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(573);n.d(t,"FileDropModule",function(){return r.a})},576:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(1),o=n(82);n(737),n(736),n(738);var s=n(27),l=n(107),c=n(55),u=n(91),p=n(74),d=n(54),f=n(108),h=n(90),m=n(73),g=n(389),v=n(390),y=function(){function AppComponent(e,t,n,r,a,i,o,s,l,c){this.router=e,this.trialService=t,this.app=n,this.state=r,this.stateParams=a,this.ppService=i,this.configService=o,this.design=s,this.experimentSetup=l,this.designData=c,this.app.workFlowType="",this.app.header=this.configService.appTitle,this.app.getPPUser()}return AppComponent.prototype.navigate=function(e){"design"==e&&(this.state.current.name=e,this.app.selection.trial_name?this.router.navigate(["/design",this.app.selection.trial_name]):alert("Trial is not selected")),"formulation"==e&&(this.state.current.name=e,this.router.navigate(["/formulation"])),"stability"==e&&(this.state.current.name=e,this.router.navigate(["/stability"]))},AppComponent=r([i.Component({selector:"my-app",template:n(740),styles:[],providers:[l.StateParamsService,s.StateService,c.HTTPService,u.ConfigService,d.ExperimentSetupService,f.TrialService,h.AppService,m.DesignService,p.DesignDataService,g.FormulationService,v.StabilityService]}),a("design:paramtypes",[o.Router,f.TrialService,h.AppService,s.StateService,l.StateParamsService,c.HTTPService,u.ConfigService,m.DesignService,d.ExperimentSetupService,p.DesignDataService])],AppComponent)}();t.AppComponent=y},577:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(1),o=n(54),s=n(73),l=n(27),c=n(74),u=function(){function ExperimentType(e,t,n,r){this.state=e,this.design=t,this.designData=n,this.experimentSetup=r}return ExperimentType.prototype.changeType=function(){for(var e=0,t=this.experimentSetup.experimentTypes.data.experimentTypes;e<t.length;e++){var n=t[e];n.Type[0]===this.type&&(this.experimentSetup.experimentTypes.selected.Type=n.Type,this.experimentSetup.experimentTypes.selected.number=n.number,this.experimentSetup.experimentTypes.selected.list=n.list,this.experimentSetup.experimentTypes.selected.ing=n.ing)}this.experimentSetup.experimentTypes.selected.gotData=!0},ExperimentType=r([i.Component({moduleId:"module.id",selector:"my-experimenttype",template:n(742)}),a("design:paramtypes",[l.StateService,s.DesignService,c.DesignDataService,o.ExperimentSetupService])],ExperimentType)}();t.ExperimentType=u},578:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(1),o=n(27),s=n(107),l=n(55),c=n(91),u=n(54),p=n(73),d=n(74),f=function(){function ParentFormulationComponent(e,t,n,r,a,i,o){this.state=e,this.stateParams=t,this.ppService=n,this.configService=r,this.experimentSetup=a,this.design=i,this.designData=o}return ParentFormulationComponent.prototype.ngOnInit=function(){console.log("ParentFormulationComponent ngOnInit"),this.design.parentFormulationHOTDiv=document.getElementById("parentFormulationHOT"),this.designData.parentFormulation.gotData&&this.design.setUpParentFormulationHOT()},ParentFormulationComponent.prototype.uploadThenRunProtocol=function(e){this.upload(e)},ParentFormulationComponent.prototype.upload=function(e){var t=this,n=new XMLHttpRequest;n.withCredentials=!0;var r=new FormData;r.append("files",e,e.name),n.onload=function(){var e=t.parseHeaders(n.getAllResponseHeaders()),r=t.parseResponse(e["Content-Type"],n.response);t.isSuccessStatus(n.status)||(console.log("error"),console.log(r))},n.upload.onprogress=function(e){var t=Math.round(e.loaded/e.total*100);console.log(t)},n.onloadend=function(){var e=t.parseHeaders(n.getAllResponseHeaders()),r=t.parseResponse(e["Content-Type"],n.response);t.loadParentFormulation(r.data.value)},n.open("POST","https://srv-ict-14652.scnsoft.com:9943/jobs/?%24format=json",!0),n.send(r)},ParentFormulationComponent.prototype.isSuccessStatus=function(e){return e>=200&&e<300||304===e},ParentFormulationComponent.prototype.parseHeaders=function(e){for(var t={},n=e.split("\n"),r=0;r<n.length;r++){var a=n[r].split(": ");a.length>1&&(t[a[0]]=a[1])}return t},ParentFormulationComponent.prototype.parseResponse=function(e,t){var n=t;if(e&&0===e.indexOf("application/json"))try{n=JSON.parse(t)}catch(e){}return n},ParentFormulationComponent.prototype.fileOver=function(e){},ParentFormulationComponent.prototype.loadParentFormulation=function(e){var t=this,n={};n=null!=e?{_jobid:e,TrialName:this.stateParams.trialname}:{TrialName:this.stateParams.trialname},this.ppService.runProtocolGet1(this.configService.parentFormulationProtocol,n).subscribe(function(e){var n=e;t.designData.parentFormulation.data=n,t.experimentSetup.parentFormulation.data=t.designData.parentFormulation.data,t.designData.parentFormulation.gotData=!0,t.experimentSetup.parentFormulation.gotData=t.designData.parentFormulation.gotData,t.experimentSetup.processData=n.formulation,t.design.setUpParentFormulationHOT()},function(e){return console.log(e)})},ParentFormulationComponent.prototype.info=function(){this.loadParentFormulation(1)},ParentFormulationComponent=r([i.Component({selector:"my-parentformulation",template:n(743)}),a("design:paramtypes",[o.StateService,s.StateParamsService,l.HTTPService,c.ConfigService,u.ExperimentSetupService,p.DesignService,d.DesignDataService])],ParentFormulationComponent)}();t.ParentFormulationComponent=f},579:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(1),o=n(54),s=n(27),l=n(73),c=n(32),u=function(){function ProcessParameters(e,t,n){this.design=e,this.state=t,this.experimentSetup=n,this.selection=new c.Process}return ProcessParameters.prototype.ngOnInit=function(){},ProcessParameters.prototype.Info=function(){console.dir(this.experimentSetup)},ProcessParameters=r([i.Component({moduleId:"module.id",selector:"my-processparameters",template:n(744),providers:[]}),a("design:paramtypes",[l.DesignService,s.StateService,o.ExperimentSetupService])],ProcessParameters)}();t.ProcessParameters=u},580:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(1),o=n(54),s=n(27),l=n(73),c=function(){function TestFormulations(e,t,n){this.design=e,this.state=t,this.experimentSetup=n}return TestFormulations.prototype.ngOnInit=function(){this.design.submitExpTypeForm()},TestFormulations=r([i.Component({moduleId:"module.id",selector:"my-testformulations",template:n(745)}),a("design:paramtypes",[l.DesignService,s.StateService,o.ExperimentSetupService])],TestFormulations)}();t.TestFormulations=c},581:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(1),o=n(54),s=n(27),l=n(73),c=function(){function TestShedule(e,t,n){this.design=e,this.state=t,this.experimentSetup=n}return TestShedule.prototype.ngOnInit=function(){},TestShedule=r([i.Component({moduleId:"module.id",selector:"my-testshedule",template:n(746)}),a("design:paramtypes",[l.DesignService,s.StateService,o.ExperimentSetupService])],TestShedule)}();t.TestShedule=c},582:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(1),o=n(55),s=n(90),l=n(108),c=n(27),u=n(74),p=function(){function HeaderComponent(e,t,n,r,a){this.designData=e,this.ppService=t,this.app=n,this.trialService=r,this.state=a,this.test111="header test"}return HeaderComponent.prototype.ngOnInit=function(){null!=this.trialService.trialConfig.trial_name&&(this.app.selection.project_name=this.trialService.trialConfig.project_name,this.app.selection.subproject_name=this.trialService.trialConfig.subproject_name,this.app.selection.trial_name=this.trialService.trialConfig.trial_name),this.state.current.name="header"},HeaderComponent=r([i.Component({moduleId:"module.id",selector:"my-header",template:n(748)}),a("design:paramtypes",[u.DesignDataService,o.HTTPService,s.AppService,l.TrialService,c.StateService])],HeaderComponent)}();t.HeaderComponent=p},583:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(1),o=function(){function ContainPipe(){}return ContainPipe.prototype.transform=function(e,t,n){if("undefined"!=typeof n&&"undefined"!=typeof t&&Array.isArray(e)){for(var r=[],a=0,i=e;a<i.length;a++){var o=i[a];"object"==typeof o&&"string"==typeof t&&"string"==typeof n&&o[t]===n&&r.push(o)}return r}},ContainPipe=r([i.Pipe({name:"contain"}),a("design:paramtypes",[])],ContainPipe)}();t.ContainPipe=o},584:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(1),o=function(){function UniquePipe(){}return UniquePipe.prototype.transform=function(e,t){if(0==t)return e;if(void 0!==typeof t&&Array.isArray(e)){var n=[];n[0]=e[0];for(var r=function(e){return"object"==typeof e&&"string"==typeof t?e[t]:e},a=0,i=e;a<i.length;a++){for(var o=i[a],s=!1,l=0;l<n.length;l++)if(r(n[l])===r(o)){s=!0;break}s||n.push(o)}return n}},UniquePipe=r([i.Pipe({name:"unique"}),a("design:paramtypes",[])],UniquePipe)}();t.UniquePipe=o},585:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(1),o=n(82),s=n(386),l=n(387),c=n(388),u=[{path:"design/:trialname",component:s.DesignComponent},{path:"formulation",component:l.FormulationComponent},{path:"stability",component:c.StabilityComponent},{path:"**",redirectTo:""}],p=function(){function AppRoutingModule(){}return AppRoutingModule=r([i.NgModule({imports:[o.RouterModule.forRoot(u)],exports:[o.RouterModule]}),a("design:paramtypes",[])],AppRoutingModule)}();t.AppRoutingModule=p},73:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(1),o=n(82),s=n(74),l=n(54),c=n(27),u=n(107),p=n(55),d=n(91),f=n(90),h=n(32),m=n(32),g=function(){function DesignService(e,t,n,r,a,i,o,s){this.router=e,this.app=t,this.state=n,this.stateParams=r,this.ppService=a,this.configService=i,this.designData=o,this.experimentSetup=s,this.allFormulationsData=[],this.updateTestStatus=function(e){e.doTest=!e.doTest},this.saving=!1,this.error=!1,this.newWeek=new h.Week,this.newTemp=new m.Temperature}return DesignService.prototype.loadExperimentTypes=function(){var e=this,t={TrialName:this.stateParams.trialname};this.ppService.runProtocolGet2(this.configService.experimentTypesProtocol,t).subscribe(function(t){var n=t;e.designData.experimentTypes.data=n,e.designData.experimentTypes.gotData=!0},function(e){return console.log("loadExperimentTypes: "+e)})},DesignService.prototype.loadProcessParameters=function(){var e=this,t={TrialName:this.stateParams.trialname};this.ppService.runProtocolGet3(this.configService.processParametersProtocol,t).subscribe(function(t){var n=t.parameters;e.experimentSetup.processes=n},function(e){return console.log("loadProcessParameters: "+e)})},DesignService.prototype.loadDefaultTestSchedule=function(){var e=this,t={TrialName:this.stateParams.trialname};this.ppService.runProtocolGet6(this.configService.testScheduleProtocol,t).subscribe(function(t){var n=t;e.experimentSetup.testSchedule=n},function(e){return console.log("loadDefaultTestSchedule: "+e)})},DesignService.prototype.loadAvailableTests=function(){var e=this,t={TrialName:this.stateParams.trialname};this.ppService.runProtocolGet4(this.configService.availableTestsProtocol,t).subscribe(function(t){var n=t;e.experimentSetup.availableTests=n.tests},function(e){return console.log("loadAvailableTests: "+e)})},DesignService.prototype.loadExistingExperiment=function(){var e=this,t={TrialName:this.stateParams.trialname};this.ppService.runProtocolGet5(this.configService.experiment2JSON,t).subscribe(function(t){var n=t;"undefined"!=typeof n&&"undefined"!=typeof n[0]&&"undefined"!=typeof n[0].ReadOnly&&"undefined"!=typeof n[0].ReadOnly.readOnly&&n[0].ReadOnly.readOnly!==!1&&(e.experimentSetup.availableTests=e.designData.availableTests,e.experimentSetup.availableUnits=e.designData.availableUnits,e.experimentSetup.calculatedFormulations=e.designData.calculatedFormulations,e.experimentSetup.experimentTypes=e.designData.experimentTypes,e.experimentSetup.gotData=e.designData.gotData,e.experimentSetup.parentFormulation=e.designData.parentFormulation,e.experimentSetup.processData=e.designData.processData)},function(e){return console.log("loadExistingExperiment"+e)})},DesignService.prototype.saveToExperiment=function(){this.saving=!0;//!this.saving;
var e=this.experimentSetup.calculatedFormulations;this.experimentSetup.calculatedFormulations.data=e.data;({TrialName:this.stateParams.trialname,_bodyParam:"FormData"}),this.experimentSetup},DesignService.prototype.removeTestWeek=function(){for(var e=[],t=(this.newWeek.week,0);t<this.experimentSetup.testSchedule.allWeeks.length;t++)this.newWeek.week!=this.experimentSetup.testSchedule.allWeeks[t].week&&e.push(this.experimentSetup.testSchedule.allWeeks[t]);for(var t=0;t<this.experimentSetup.testSchedule.schedule.length;t++){for(var n=[],r=0;r<this.experimentSetup.testSchedule.schedule[t].weeks.week.length;r++)this.newWeek.week!==this.experimentSetup.testSchedule.schedule[t].weeks.week[r].week&&n.push(this.experimentSetup.testSchedule.schedule[t].weeks.week[r]);this.experimentSetup.testSchedule.schedule[t].weeks.week=n}this.experimentSetup.testSchedule.allWeeks=e},DesignService.prototype.newTestWeek=function(){for(var e=0;e<this.experimentSetup.testSchedule.allWeeks.length;e++)if(this.newWeek.week==this.experimentSetup.testSchedule.allWeeks[e].week)return;var t=new h.Week;t.week=this.newWeek.week,t.doTest=this.newWeek.doTest,this.experimentSetup.testSchedule.allWeeks.push(t),this.experimentSetup.testSchedule.allWeeks=this.experimentSetup.testSchedule.allWeeks.sort(function(e,t){return+e.week>+t.week?1:+e.week<+t.week?-1:0});for(var e=0;e<this.experimentSetup.testSchedule.schedule.length;e++)this.experimentSetup.testSchedule.schedule[e].weeks.week.push({week:this.newWeek.week,doTest:!0}),this.experimentSetup.testSchedule.schedule[e].weeks.week=this.experimentSetup.testSchedule.schedule[e].weeks.week.sort(function(e,t){return+e.week>+t.week?1:+e.week<+t.week?-1:0})},DesignService.prototype.newStorageTemp=function(){for(var e=0;e<this.experimentSetup.testSchedule.temperatures.length;e++)if(this.newTemp.temperature===this.experimentSetup.testSchedule.temperatures[e].temperature)return;this.experimentSetup.testSchedule.temperatures.push({temperature:this.newTemp.temperature})},DesignService.prototype.removeStorageTemp=function(){for(var e=0;e<this.experimentSetup.testSchedule.temperatures.length;e++)if(this.newTemp.temperature===this.experimentSetup.testSchedule.temperatures[e].temperature){this.experimentSetup.testSchedule.temperatures.splice(e,1);break}},DesignService.prototype.newProcessItem=function(){for(var e=0,t=this.experimentSetup.processes;e<t.length;e++){var n=t[e];n.name===this.state.selection.process.name&&(this.state.selection.process=n)}this.experimentSetup.processData.unshift({type:"process",name:this.state.selection.process.name,caption:this.state.selection.process.caption})},DesignService.prototype.removeProcessItem=function(e){console.log("removeProcessItem"),console.dir(e),console.dir(this.experimentSetup.processData);for(var t in this.experimentSetup.processData)if(this.experimentSetup.processData[t].name===e.name){this.experimentSetup.processData.splice(+t,1);break}console.dir(this.experimentSetup.processData)},DesignService.prototype.submitExpTypeForm=function(){var e=this;console.log("submitExpTypeForm");var t={TrialName:this.stateParams.trialname,_bodyParam:"FormData"},n=this.experimentSetup;this.ppService.runProtocolPost1(this.configService.calculateAllFormulationsProtocol,t,n).subscribe(function(t){var n=t.formulation;e.experimentSetup.calculatedFormulations.data=n,e.experimentSetup.calculatedFormulations.gotData=!0,e.designData.calculatedFormulations.data=e.experimentSetup.calculatedFormulations.data,e.experimentSetup.availableUnits=["g","Kg"],e.setUpAllFormulationsHOT()},function(e){console.log(e)})},DesignService.prototype.findFlowMaterialName=function(){this.findFlowMaterial(this.flowMaterialLookupName,null)},DesignService.prototype.findFlowMaterialID=function(){this.findFlowMaterial(null,this.flowMaterialLookupID)},DesignService.prototype.findFlowMaterial=function(e,t){var n=this,r={TrialName:this.stateParams.trialname,FlowMaterialName:e,FlowMaterialID:t};this.ppService.runProtocolGet5(this.configService.findFlowMaterial,r).subscribe(function(e){var t;t=e,t.name="xxx",console.log("Success"),n.addFlowMaterial(t.name)},function(e){alert("No materials found"),console.log("Failure"),console.log(e)})},DesignService.prototype.addFlowMaterial=function(e){var t=this.experimentSetup.calculatedFormulations.data;for(var n in t)t[n].formulation&&(t[n].formulation[e]||(t[n].formulation[e]={name_key:e,percent_weight:0}));this.experimentSetup.calculatedFormulations.data=t,this.setUpAllFormulationsHOT()},DesignService.prototype.setUpParentFormulationHOT=function(){var e=this;this.parentFormulationHOTDiv.innerHTML="";var t=[],n=[],r={},a=[];a=this.designData.parentFormulation.data.formulation;for(var i=0;i<a.length;i++){t.push(a[i].name);var o={data:a[i].name_key,type:"numeric",editor:"numeric",format:"0.0[0000000000]",readOnly:!0};n.push(o),r[a[i].name_key]=a[i].percent_weight_as_100}var s=(this.parentFormulationHOTDiv,{});s={data:r,colHeaders:t,contextMenu:!0,columns:n,colWidths:80,headerTooltips:{rows:!0,columns:!0},manualColumnResize:!0,afterChange:function(t,n){if("loadData"!==n)return e.newHOTRender(e.parentFormulationHOT),!0}},this.parentFormulationHOT={},this.parentFormulationHOT=new Handsontable(this.parentFormulationHOTDiv,s),this.newHOTRender(this.parentFormulationHOT)},DesignService.prototype.newHOTRender=function(e){e.setDataAtCell(0,0,e.getDataAtCell(0,0)),e.render()},DesignService.prototype.setUpAllFormulationsHOT=function(){var e=this;console.log("setUpAllFormulationsHOT");var t=[],n=[];this.allFormulationsData=[],t.push("sample_name"),n.push({data:"sample_name",type:"text"});for(var r in this.experimentSetup.calculatedFormulations.data[0].formulation){var a=this.experimentSetup.calculatedFormulations.data[0].formulation[r].name_key,i=this.experimentSetup.calculatedFormulations.data[0].formulation[r].percent_weight;t.push(r);var o={data:a,type:"numeric",editor:"numeric",format:"0.0[0000000000]",width:65};n.push(o)}for(var s=0;s<this.experimentSetup.calculatedFormulations.data.length;s++){var l={};l.sample_name=this.experimentSetup.calculatedFormulations.data[s].formulation_name;for(var r in this.experimentSetup.calculatedFormulations.data[s].formulation){var a=this.experimentSetup.calculatedFormulations.data[s].formulation[r].name_key,i=this.experimentSetup.calculatedFormulations.data[s].formulation[r].percent_weight;l[a]=i}this.allFormulationsData.push(l)}Handsontable.renderers.registerRenderer("variableValueRenderer",this.variableValueRenderer);var c=this.allFormulationsData,u=document.getElementById("allFormulationsHOT"),p={data:c,colHeaders:t,minSpareRows:1,contextMenu:!0,headerTooltips:{rows:!0,columns:!0},manualColumnResize:!0,afterChange:function(t,n){if("loadData"!==n)return e.createAllFormulationsPlot(),!0},columns:n,cells:function(e,t,n){var r={renderer:"variableValueRenderer"};return r}};void 0!==this.allFormulationsHot?this.allFormulationsHot.updateSettings(p):(this.allFormulationsHot=new Handsontable(u,p),this.allFormulationsHot.render(),this.allFormulationsHot.setDataAtCell(0,0,this.allFormulationsHot.getDataAtCell(0,0)),this.allFormulationsHot.render()),this.createAllFormulationsPlot()},DesignService.prototype.variableValueRenderer=function(e,t,n,r,a,i,o){Handsontable.renderers.NumericRenderer.apply(this,arguments);for(var s,l=0,c=!1;"undefined"!=typeof e.getData()[l]&&null!==e.getData()[l][r];){if("undefined"==typeof s&&(s=e.getData()[l][r]),s!=e.getData()[l][r]){c=!0;break}l++}c&&(t.style.fontWeight="bold",t.style.background="#CEC"),t.title=e.getData()[n][r]},DesignService.prototype.createAllFormulationsPlot=function(){document.getElementById("allFormulationsPlot").hidden=!1,Plotly.purge("allFormulationsPlot");var e=document.getElementById("allFormulationsPlot"),t=this.allFormulationsData,n=[],r=[];for(var a in t[0])"sample_name"!==a&&r.push(a);for(var i=0;i<r.length;i++){for(var o=[],s=[],l=t.length-2;l>=0;l--)o.push(t[l].sample_name),s.push(t[l][r[i]]);var c={x:s,y:o,name:r[i],xaxis:"x1",yaxis:"y1",type:"bar",orientation:"h"};n.push(c)}var u={title:"Composition",height:500,width:900,barmode:"stack",showlegend:!1,legend:{orientation:"h"}};Plotly.purge(e),Plotly.newPlot(e,n,u,{modeBarButtonsToRemove:["sendDataToCloud"],displaylogo:!1,doubleClick:"reset+autosize"})},DesignService=r([i.Injectable(),a("design:paramtypes",[o.Router,f.AppService,c.StateService,u.StateParamsService,p.HTTPService,d.ConfigService,s.DesignDataService,l.ExperimentSetupService])],DesignService)}();t.DesignService=g},736:function(e,t){},737:function(e,t){},738:function(e,t){},739:function(e,t,n){var r,a;/*! FileAPI 2.0.21 - BSD | git://github.com/mailru/FileAPI.git
 * FileAPI — a set of  javascript tools for working with files. Multiupload, drag'n'drop and chunked file upload. Images: crop, resize and auto orientation by EXIF.
 */
!function(e){"use strict";var t=e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype,n=e.Blob&&function(){try{return Boolean(new Blob)}catch(e){return!1}}(),r=n&&e.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(e){return!1}}(),a=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||e.MSBlobBuilder,i=(n||a)&&e.atob&&e.ArrayBuffer&&e.Uint8Array&&function(e){var t,i,o,s,l,c;for(t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):decodeURIComponent(e.split(",")[1]),i=new ArrayBuffer(t.length),o=new Uint8Array(i),s=0;s<t.length;s+=1)o[s]=t.charCodeAt(s);return l=e.split(",")[0].split(":")[1].split(";")[0],n?new Blob([r?o:i],{type:l}):(c=new a,c.append(i),c.getBlob(l))};e.HTMLCanvasElement&&!t.toBlob&&(t.mozGetAsFile?t.toBlob=function(e,n,r){e(r&&t.toDataURL&&i?i(this.toDataURL(n,r)):this.mozGetAsFile("blob",n))}:t.toDataURL&&i&&(t.toBlob=function(e,t,n){e(i(this.toDataURL(t,n)))})),e.dataURLtoBlob=i}(window),function(e,t){"use strict";function _emit(e,t,n,r,a){var i={type:n.type||n,target:e,result:r};N(i,a),t(i)}function _hasSupportReadAs(e){return m&&!!m.prototype["readAs"+e]}function _readAs(e,n,r,a){if(V.isBlob(e)&&_hasSupportReadAs(r)){var i=new m;W(i,O,function _fn(t){var r=t.type;"progress"==r?_emit(e,n,t,t.target.result,{loaded:t.loaded,total:t.total}):"loadend"==r?(U(i,O,_fn),i=null):_emit(e,n,t,t.target.result)});try{a?i["readAs"+r](e,a):i["readAs"+r](e)}catch(r){_emit(e,n,"error",t,{error:r.toString()})}}else _emit(e,n,"error",t,{error:"filreader_not_support_"+r})}function _isRegularFile(e,t){if(!e.type&&(c||e.size%4096===0&&e.size<=102400))if(m)try{var n=new m;z(n,O,function(e){var r="error"!=e.type;r?(null!=n.readyState&&n.readyState!==n.LOADING||n.abort(),t(r)):t(!1,n.error)}),n.readAsDataURL(e)}catch(e){t(!1,e)}else t(null,new Error("FileReader is not supported"));else t(!0)}function _isEntry(e){return e&&(e.isFile||e.isDirectory)}function _getAsEntry(e){var t;return e.getAsEntry?t=e.getAsEntry():e.webkitGetAsEntry&&(t=e.webkitGetAsEntry()),t}function _readEntryAsFiles(e,t){if(e)if(e.isFile)e.file(function(n){n.fullPath=e.fullPath,t(!1,[n],[n])},function(n){e.error=n,t("FileError.code: "+n.code,[],[e])});else if(e.isDirectory){var n=e.createReader(),r=!0,a=[],i=[e],o=function(n){e.error=n,t("DirectoryError.code: "+n.code,a,i)},s=function ondone(s){r&&(r=!1,s.length||(e.error=new Error("directory is empty"))),s.length?V.afor(s,function(e,t){_readEntryAsFiles(t,function(t,r,s){t||(a=a.concat(r)),i=i.concat(s),e?e():n.readEntries(ondone,o)})}):t(!1,a,i)};n.readEntries(s,o)}else _readEntryAsFiles(_getAsEntry(e),t);else{var l=new Error("invalid entry");e=new Object(e),e.error=l,t(l.message,[],[e])}}function _simpleClone(e){var t={};return B(e,function(e,n){e&&"object"==typeof e&&void 0===e.nodeType&&(e=N({},e)),t[n]=e}),t}function isInputFile(e){return T.test(e&&e.tagName)}function _getDataTransfer(e){return(e.originalEvent||e||"").dataTransfer||{}}function _isOriginTransform(e){var t;for(t in e)if(e.hasOwnProperty(t)&&!(e[t]instanceof Object||"overlay"===t||"filter"===t))return!0;return!1}var n,r,a=1,i=function(){},o=e.document,s=o.doctype||{},l=e.navigator.userAgent,c=/safari\//i.test(l)&&!/chrome\//i.test(l),u=/iemobile\//i.test(l),p=!c&&/chrome\//i.test(l)&&"http:"===e.location.protocol,d=e.createObjectURL&&e||e.URL&&URL.revokeObjectURL&&URL||e.webkitURL&&webkitURL,f=e.Blob,h=e.File,m=e.FileReader,g=e.FormData,v=e.XMLHttpRequest,y=e.jQuery,b=!(!(h&&m&&(e.Uint8Array||g||v.prototype.sendAsBinary))||c&&/windows/i.test(l)&&!u),S=b&&"withCredentials"in new v,D=b&&!!f&&!!(f.prototype.webkitSlice||f.prototype.mozSlice||f.prototype.slice),_=(""+"".normalize).indexOf("[native code]")>0,w=e.dataURLtoBlob,x=/img/i,P=/canvas/i,F=/img|canvas/i,T=/input/i,C=/^data:[^,]+,/,k={}.toString,R=e.Math,A=function(t){return t=new e.Number(R.pow(1024,t)),t.from=function(e){return R.round(e*this)},t},E={},I=[],O="abort progress error load loadend",j="status statusText readyState response responseXML responseText responseBody".split(" "),H="currentTarget",L="preventDefault",M=function(e){return e&&"length"in e},B=function(e,t,n){if(e)if(M(e))for(var r=0,a=e.length;r<a;r++)r in e&&t.call(n,e[r],r,e);else for(var i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i,e)},N=function(e){for(var t=arguments,n=1,r=function(t,n){e[n]=t};n<t.length;n++)B(t[n],r);return e},W=function(e,t,n){if(e){var r=V.uid(e);E[r]||(E[r]={});var a=m&&e&&e instanceof m;B(t.split(/\s+/),function(t){y&&!a?y.event.add(e,t,n):(E[r][t]||(E[r][t]=[]),E[r][t].push(n),e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n)})}},U=function(e,t,n){if(e){var r=V.uid(e),a=E[r]||{},i=m&&e&&e instanceof m;B(t.split(/\s+/),function(t){if(y&&!i)y.event.remove(e,t,n);else{for(var r=a[t]||[],o=r.length;o--;)if(r[o]===n){r.splice(o,1);break}e.addEventListener?e.removeEventListener(t,n,!1):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null}})}},z=function(e,t,n){W(e,t,function _(r){U(e,t,_),n(r)})},q=function(t){return t.target||(t.target=e.event&&e.event.srcElement||o),3===t.target.nodeType&&(t.target=t.target.parentNode),t},G=function(e){var t=o.createElement("input");return t.setAttribute("type","file"),e in t},V={version:"2.0.21",cors:!1,html5:!0,media:!1,formData:!0,multiPassResize:!0,insecureChrome:p,debug:!1,pingUrl:!1,multiFlash:!1,flashAbortTimeout:0,withCredentials:!0,staticPath:"./dist/",flashUrl:0,flashImageUrl:0,postNameConcat:function(e,t){return e+(null!=t?"["+t+"]":"")},ext2mime:{jpg:"image/jpeg",tif:"image/tiff",txt:"text/plain"},accept:{"image/*":"art bm bmp dwg dxf cbr cbz fif fpx gif ico iefs jfif jpe jpeg jpg jps jut mcf nap nif pbm pcx pgm pict pm png pnm qif qtif ras rast rf rp svf tga tif tiff xbm xbm xpm xwd","audio/*":"m4a flac aac rm mpa wav wma ogg mp3 mp2 m3u mod amf dmf dsm far gdm imf it m15 med okt s3m stm sfx ult uni xm sid ac3 dts cue aif aiff wpl ape mac mpc mpp shn wv nsf spc gym adplug adx dsp adp ymf ast afc hps xs","video/*":"m4v 3gp nsv ts ty strm rm rmvb m3u ifo mov qt divx xvid bivx vob nrg img iso pva wmv asf asx ogm m2v avi bin dat dvr-ms mpg mpeg mp4 mkv avc vp3 svq3 nuv viv dv fli flv wpl"},uploadRetry:0,networkDownRetryTimeout:5e3,chunkSize:0,chunkUploadRetry:0,chunkNetworkDownRetryTimeout:2e3,KB:A(1),MB:A(2),GB:A(3),TB:A(4),EMPTY_PNG:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQIW2NkAAIAAAoAAggA9GkAAAAASUVORK5CYII=",expando:"fileapi"+(new Date).getTime(),uid:function(e){return e?e[V.expando]=e[V.expando]||V.uid():(++a,V.expando+a)},log:function(){V.debug&&n&&(r?console.log.apply(console,arguments):console.log([].join.call(arguments," ")))},newImage:function(e,t){var n=o.createElement("img");return t&&V.event.one(n,"error load",function(e){t("error"==e.type,n),n=null}),n.src=e,n},getXHR:function(){var t;if(v)t=new v;else if(e.ActiveXObject)try{t=new ActiveXObject("MSXML2.XMLHttp.3.0")}catch(e){t=new ActiveXObject("Microsoft.XMLHTTP")}return t},isArray:M,support:{dnd:S&&"ondrop"in o.createElement("div"),cors:S,html5:b,chunked:D,dataURI:!0,accept:G("accept"),multiple:G("multiple")},event:{on:W,off:U,one:z,fix:q},throttle:function(t,n){var r,a;return function(){a=arguments,r||(t.apply(e,a),r=setTimeout(function(){r=0,t.apply(e,a)},n))}},F:function(){},parseJSON:function(t){var n;return n=e.JSON&&JSON.parse?JSON.parse(t):new Function("return ("+t.replace(/([\r\n])/g,"\\$1")+");")()},trim:function(e){return e=String(e),e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},defer:function(){var e,n,r=[],a={resolve:function(t,o){for(a.resolve=i,n=t||!1,e=o;o=r.shift();)o(n,e)},then:function(a){n!==t?a(n,e):r.push(a)}};return a},queue:function(e){var t=0,n=0,r=!1,a=!1,i={inc:function(){n++},next:function(){t++,setTimeout(i.check,0)},check:function(){t>=n&&!r&&i.end()},isFail:function(){return r},fail:function(){!r&&e(r=!0)},end:function(){a||(a=!0,e())}};return i},each:B,afor:function(e,t){var n=0,r=e.length;M(e)&&r--?!function _next(){t(r!=n&&_next,e[n],n++)}():t(!1)},extend:N,isFile:function(e){return"[object File]"===k.call(e)},isBlob:function(e){return this.isFile(e)||"[object Blob]"===k.call(e)},isCanvas:function(e){return e&&P.test(e.nodeName)},getFilesFilter:function(e){return e="string"==typeof e?e:e.getAttribute&&e.getAttribute("accept")||"",e?new RegExp("("+e.replace(/\./g,"\\.").replace(/,/g,"|")+")$","i"):/./},readAsDataURL:function(e,t){V.isCanvas(e)?_emit(e,t,"load",V.toDataURL(e)):_readAs(e,t,"DataURL")},readAsBinaryString:function(e,t){_hasSupportReadAs("BinaryString")?_readAs(e,t,"BinaryString"):_readAs(e,function(e){if("load"==e.type)try{e.result=V.toBinaryString(e.result)}catch(t){e.type="error",e.message=t.toString()}t(e)},"DataURL")},readAsArrayBuffer:function(e,t){_readAs(e,t,"ArrayBuffer")},readAsText:function(e,t,n){n||(n=t,t="utf-8"),_readAs(e,n,"Text",t)},toDataURL:function(e,t){return"string"==typeof e?e:e.toDataURL?e.toDataURL(t||"image/png"):void 0},toBinaryString:function(t){return e.atob(V.toDataURL(t).replace(C,""))},readAsImage:function(e,n,r){if(V.isBlob(e))if(d){var a=d.createObjectURL(e);a===t?_emit(e,n,"error"):V.readAsImage(a,n,r)}else V.readAsDataURL(e,function(t){"load"==t.type?V.readAsImage(t.result,n,r):(r||"error"==t.type)&&_emit(e,n,t,null,{loaded:t.loaded,total:t.total})});else if(V.isCanvas(e))_emit(e,n,"load",e);else if(x.test(e.nodeName))if(e.complete)_emit(e,n,"load",e);else{var i="error abort load";z(e,i,function _fn(t){"load"==t.type&&d&&d.revokeObjectURL(e.src),U(e,i,_fn),_emit(e,n,t,e)})}else if(e.iframe)_emit(e,n,{type:"error"});else{var o=V.newImage(e.dataURL||e);V.readAsImage(o,n,r)}},checkFileObj:function(e){var t={},n=V.accept;return"object"==typeof e?t=e:t.name=(e+"").split(/\\|\//g).pop(),null==t.type&&(t.type=t.name.split(".").pop()),B(n,function(e,n){e=new RegExp(e.replace(/\s/g,"|"),"i"),(e.test(t.type)||V.ext2mime[t.type])&&(t.type=V.ext2mime[t.type]||n.split("/")[0]+"/"+t.type)}),t},getDropFiles:function(e,t){var n,r=[],a=[],i=_getDataTransfer(e),o=i.files,s=i.items,l=M(s)&&s[0]&&_getAsEntry(s[0]),c=V.queue(function(){t(r,a)});if(l)if(_&&o){var u,p,d=o.length;for(n=new Array(d);d--;){u=o[d];try{p=_getAsEntry(s[d])}catch(e){V.log("[err] getDropFiles: ",e),p=null}_isEntry(p)&&(p.isDirectory||p.isFile&&u.name==u.name.normalize("NFC"))?n[d]=p:n[d]=u}}else n=s;else n=o;B(n||[],function(e){c.inc();try{l&&_isEntry(e)?_readEntryAsFiles(e,function(e,t,n){e?V.log("[err] getDropFiles:",e):r.push.apply(r,t),a.push.apply(a,n),c.next()}):_isRegularFile(e,function(t,n){t?r.push(e):e.error=n,a.push(e),c.next()})}catch(e){c.next(),V.log("[err] getDropFiles: ",e)}}),c.check()},getFiles:function(e,t,n){var r=[];return n?(V.filterFiles(V.getFiles(e),t,n),null):(e.jquery&&(e.each(function(){r=r.concat(V.getFiles(this))}),e=r,r=[]),"string"==typeof t&&(t=V.getFilesFilter(t)),e.originalEvent?e=q(e.originalEvent):e.srcElement&&(e=q(e)),e.dataTransfer?e=e.dataTransfer:e.target&&(e=e.target),e.files?(r=e.files,b||(r[0].blob=e,r[0].iframe=!0)):!b&&isInputFile(e)?V.trim(e.value)&&(r=[V.checkFileObj(e.value)],r[0].blob=e,r[0].iframe=!0):M(e)&&(r=e),V.filter(r,function(e){return!t||t.test(e.name)}))},getTotalSize:function(e){for(var t=0,n=e&&e.length;n--;)t+=e[n].size;return t},getInfo:function(e,t){var n={},r=I.concat();V.isBlob(e)?!function _next(){var a=r.shift();a?a.test(e.type)?a(e,function(e,r){e?t(e):(N(n,r),_next())}):_next():t(!1,n)}():t("not_support_info",n)},addInfoReader:function(e,t){t.test=function(t){return e.test(t)},I.push(t)},filter:function(e,t){for(var n,r=[],a=0,i=e.length;a<i;a++)a in e&&(n=e[a],t.call(n,n,a,e)&&r.push(n));return r},filterFiles:function(e,t,n){if(e.length){var r,a=e.concat(),i=[],o=[];!function _next(){a.length?(r=a.shift(),V.getInfo(r,function(e,n){(t(r,!e&&n)?i:o).push(r),_next()})):n(i,o)}()}else n([],e)},upload:function(e){e=N({jsonp:"callback",prepare:V.F,beforeupload:V.F,upload:V.F,fileupload:V.F,fileprogress:V.F,filecomplete:V.F,progress:V.F,complete:V.F,pause:V.F,imageOriginal:!0,chunkSize:V.chunkSize,chunkUploadRetry:V.chunkUploadRetry,uploadRetry:V.uploadRetry},e),e.imageAutoOrientation&&!e.imageTransform&&(e.imageTransform={rotate:"auto"});var t,n=new V.XHR(e),r=this._getFilesDataArray(e.files),a=this,o=0,s=0,l=!1;return B(r,function(e){o+=e.size}),n.files=[],B(r,function(e){n.files.push(e.file)}),n.total=o,n.loaded=0,n.filesLeft=r.length,e.beforeupload(n,e),t=function(){var c=r.shift(),u=c&&c.file,p=!1,d=_simpleClone(e);if(n.filesLeft=r.length,u&&u.name===V.expando&&(u=null,V.log("[warn] FileAPI.upload() — called without files")),("abort"!=n.statusText||n.current)&&c){if(l=!1,n.currentFile=u,u&&e.prepare(u,d)===!1)return void t.call(a);d.file=u,a._getFormData(d,c,function(l){s||e.upload(n,e);var f=new V.XHR(N({},d,{upload:u?function(){e.fileupload(u,f,d)}:i,progress:u?function(t){p||(p=t.loaded===t.total,e.fileprogress({type:"progress",total:c.total=t.total,loaded:c.loaded=t.loaded},u,f,d),e.progress({type:"progress",total:o,loaded:n.loaded=s+c.size*(t.loaded/t.total)||0},u,f,d))}:i,complete:function(r){B(j,function(e){n[e]=f[e]}),u&&(c.total=c.total||c.size,c.loaded=c.total,r||(this.progress(c),p=!0,s+=c.size,n.loaded=s),e.filecomplete(r,f,u,d)),setTimeout(function(){t.call(a)},0)}}));n.abort=function(e){e||(r.length=0),this.current=e,f.abort()},f.send(l)})}else{var f=200==n.status||201==n.status||204==n.status;e.complete(!f&&(n.statusText||"error"),n,e),l=!0}},setTimeout(t,0),n.append=function(e,i){e=V._getFilesDataArray([].concat(e)),B(e,function(e){o+=e.size,n.files.push(e.file),i?r.unshift(e):r.push(e)}),n.statusText="",l&&t.call(a)},n.remove=function(e){for(var t,n=r.length;n--;)r[n].file==e&&(t=r.splice(n,1),o-=t.size);return t},n},_getFilesDataArray:function(e){var t=[],n={};if(isInputFile(e)){var r=V.getFiles(e);n[e.name||"file"]=null!==e.getAttribute("multiple")?r:r[0]}else M(e)&&isInputFile(e[0])?B(e,function(e){n[e.name||"file"]=V.getFiles(e)}):n=e;return B(n,function add(e,n){M(e)?B(e,function(e){add(e,n)}):e&&(e.name||e.image)&&t.push({name:n,file:e,size:e.size,total:e.size,loaded:0})}),t.length||t.push({file:{name:V.expando}}),t},_getFormData:function(e,t,n){var r=t.file,a=t.name,i=r.name,o=r.type,s=V.support.transform&&e.imageTransform,l=new V.Form,c=V.queue(function(){n(l)}),u=s&&_isOriginTransform(s),p=V.postNameConcat;B(e.data,function add(e,t){"object"==typeof e?B(e,function(e,n){add(e,p(t,n))}):l.append(t,e)}),function _addFile(t){t.image?(c.inc(),t.toData(function(e,n){t.file&&(n.type=t.file.type,n.quality=t.matrix.quality,i=t.file&&t.file.name),i=i||(new Date).getTime()+".png",_addFile(n),c.next()})):V.Image&&s&&(/^image/.test(t.type)||F.test(t.nodeName))?(c.inc(),u&&(s=[s]),V.Image.transform(t,s,e.imageAutoOrientation,function(n,r){if(u&&!n)w||V.flashEngine||(l.multipart=!0),l.append(a,r[0],i,s[0].type||o);else{var d=0;n||B(r,function(e,t){w||V.flashEngine||(l.multipart=!0),s[t].postName||(d=1),l.append(s[t].postName||p(a,t),e,i,s[t].type||o)}),(n||e.imageOriginal)&&l.append(p(a,d?"original":null),t,i,o)}c.next()})):i!==V.expando&&l.append(a,t,i)}(r),c.check()},reset:function(e,t){var n,r;return y?(r=y(e).clone(!0).insertBefore(e).val("")[0],t||y(e).remove()):(n=e.parentNode,r=n.insertBefore(e.cloneNode(!0),e),r.value="",t||n.removeChild(e),B(E[V.uid(e)],function(t,n){B(t,function(t){U(e,n,t),W(r,n,t)})})),r},load:function(e,t){var n=V.getXHR();return n?(n.open("GET",e,!0),n.overrideMimeType&&n.overrideMimeType("text/plain; charset=x-user-defined"),W(n,"progress",function(e){e.lengthComputable&&t({type:e.type,loaded:e.loaded,total:e.total},n)}),n.onreadystatechange=function(){if(4==n.readyState)if(n.onreadystatechange=null,200==n.status){e=e.split("/");var r={name:e[e.length-1],size:n.getResponseHeader("Content-Length"),type:n.getResponseHeader("Content-Type")};r.dataURL="data:"+r.type+";base64,"+V.encode64(n.responseBody||n.responseText),t({type:"load",result:r},n)}else t({type:"error"},n)},n.send(null)):t({type:"error"}),n},encode64:function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="",r=0;for("string"!=typeof e&&(e=String(e));r<e.length;){var a,i,o=255&e.charCodeAt(r++),s=255&e.charCodeAt(r++),l=255&e.charCodeAt(r++),c=o>>2,u=(3&o)<<4|s>>4;isNaN(s)?a=i=64:(a=(15&s)<<2|l>>6,i=isNaN(l)?64:63&l),n+=t.charAt(c)+t.charAt(u)+t.charAt(a)+t.charAt(i)}return n}};V.addInfoReader(/^image/,function(e,t){if(!e.__dimensions){var n=e.__dimensions=V.defer();V.readAsImage(e,function(e){var t=e.target;n.resolve("load"!=e.type&&"error",{width:t.width,height:t.height}),t.src=V.EMPTY_PNG,t=null})}e.__dimensions.then(t)}),V.event.dnd=function(e,t,n){var r,a;n||(n=t,t=V.F),m?(W(e,"dragenter dragleave dragover",t.ff=t.ff||function(e){for(var n=_getDataTransfer(e).types,i=n&&n.length,o=!1;i--;)if(~n[i].indexOf("File")){e[L](),a!==e.type&&(a=e.type,"dragleave"!=a&&t.call(e[H],!0,e),o=!0);break}o&&(clearTimeout(r),r=setTimeout(function(){t.call(e[H],"dragleave"!=a,e)},50))}),W(e,"drop",n.ff=n.ff||function(e){e[L](),a=0,V.getDropFiles(e,function(t,r){n.call(e[H],t,r,e)}),t.call(e[H],!1,e)})):V.log("Drag'n'Drop -- not supported")},V.event.dnd.off=function(e,t,n){U(e,"dragenter dragleave dragover",t.ff),U(e,"drop",n.ff)},y&&!y.fn.dnd&&(y.fn.dnd=function(e,t){return this.each(function(){V.event.dnd(this,e,t)})},y.fn.offdnd=function(e,t){return this.each(function(){V.event.dnd.off(this,e,t)})}),e.FileAPI=N(V,e.FileAPI),V.log("FileAPI: "+V.version),V.log("protocol: "+e.location.protocol),V.log("doctype: ["+s.name+"] "+s.publicId+" "+s.systemId),B(o.getElementsByTagName("meta"),function(e){/x-ua-compatible/i.test(e.getAttribute("http-equiv"))&&V.log("meta.http-equiv: "+e.getAttribute("content"))});try{n=!!console.log,r=!!console.log.apply}catch(e){}V.flashUrl||(V.flashUrl=V.staticPath+"FileAPI.flash.swf"),V.flashImageUrl||(V.flashImageUrl=V.staticPath+"FileAPI.flash.image.swf"),V.flashWebcamUrl||(V.flashWebcamUrl=V.staticPath+"FileAPI.flash.camera.swf")}(window,void 0),function(e,t,n){"use strict";function Image(t){if(t instanceof Image){var n=new Image(t.file);return e.extend(n.matrix,t.matrix),n}return this instanceof Image?(this.file=t,this.size=t.size||100,void(this.matrix={sx:0,sy:0,sw:0,sh:0,dx:0,dy:0,dw:0,dh:0,resize:0,deg:0,quality:1,filter:0})):new Image(t)}var r=Math.min,a=Math.round,i=function(){return t.createElement("canvas")},o=!1,s={8:270,3:180,6:90,7:270,4:180,5:90};try{o=i().toDataURL("image/png").indexOf("data:image/png")>-1}catch(e){}Image.prototype={image:!0,constructor:Image,set:function(t){return e.extend(this.matrix,t),this},crop:function(e,t,r,a){return r===n&&(r=e,a=t,e=t=0),this.set({sx:e,sy:t,sw:r,sh:a||r})},resize:function(e,t,n){return/min|max|height|width/.test(t)&&(n=t,t=e),this.set({dw:e,dh:t||e,resize:n})},preview:function(e,t){return this.resize(e,t||e,"preview")},rotate:function(e){return this.set({deg:e})},filter:function(e){return this.set({filter:e})},overlay:function(e){return this.set({overlay:e})},clone:function(){return new Image(this)},_load:function(t,n){var r=this;/img|video/i.test(t.nodeName)?n.call(r,null,t):e.readAsImage(t,function(e){n.call(r,"load"!=e.type,e.result)})},_apply:function(t,n){var a,o=i(),s=this.getMatrix(t),l=o.getContext("2d"),c=t.videoWidth||t.width,u=t.videoHeight||t.height,p=s.deg,d=s.dw,f=s.dh,h=c,m=u,g=s.filter,v=t,y=s.overlay,b=e.queue(function(){t.src=e.EMPTY_PNG,n(!1,o)}),S=e.renderImageToCanvas;for(p-=360*Math.floor(p/360),t._type=this.file.type;s.multipass&&r(h/d,m/f)>2;)h=h/2+.5|0,m=m/2+.5|0,a=i(),a.width=h,a.height=m,v!==t?(S(a,v,0,0,v.width,v.height,0,0,h,m),v=a):(v=a,S(v,t,s.sx,s.sy,s.sw,s.sh,0,0,h,m),s.sx=s.sy=s.sw=s.sh=0);o.width=p%180?f:d,o.height=p%180?d:f,o.type=s.type,o.quality=s.quality,l.rotate(p*Math.PI/180),S(l.canvas,v,s.sx,s.sy,s.sw||v.width,s.sh||v.height,180==p||270==p?-d:0,90==p||180==p?-f:0,d,f),d=o.width,f=o.height,y&&e.each([].concat(y),function(t){b.inc();var n=new window.Image,r=function(){var a=0|t.x,i=0|t.y,o=t.w||n.width,s=t.h||n.height,c=t.rel;a=1==c||4==c||7==c?(d-o+a)/2:2==c||5==c||8==c?d-(o+a):a,i=3==c||4==c||5==c?(f-s+i)/2:c>=6?f-(s+i):i,e.event.off(n,"error load abort",r);try{l.globalAlpha=t.opacity||1,l.drawImage(n,a,i,o,s)}catch(e){}b.next()};e.event.on(n,"error load abort",r),n.src=t.src,n.complete&&r()}),g&&(b.inc(),Image.applyFilter(o,g,b.next)),b.check()},getMatrix:function(t){var n=e.extend({},this.matrix),i=n.sw=n.sw||t.videoWidth||t.naturalWidth||t.width,o=n.sh=n.sh||t.videoHeight||t.naturalHeight||t.height,s=n.dw=n.dw||i,l=n.dh=n.dh||o,c=i/o,u=s/l,p=n.resize;if("preview"==p){if(s!=i||l!=o){var d,f;u>=c?(d=i,f=d/u):(f=o,d=f*u),d==i&&f==o||(n.sx=~~((i-d)/2),n.sy=~~((o-f)/2),i=d,o=f)}}else"height"==p?s=l*c:"width"==p?l=s/c:p&&(i>s||o>l?"min"==p?(s=a(c<u?r(i,s):l*c),l=a(c<u?s/c:r(o,l))):(s=a(c>=u?r(i,s):l*c),l=a(c>=u?s/c:r(o,l))):(s=i,l=o));return n.sw=i,n.sh=o,n.dw=s,n.dh=l,n.multipass=e.multiPassResize,n},_trans:function(t){this._load(this.file,function(n,r){if(n)t(n);else try{this._apply(r,t)}catch(n){e.log("[err] FileAPI.Image.fn._apply:",n),t(n)}})},get:function(t){if(e.support.transform){var n=this,r=n.matrix;"auto"==r.deg?e.getInfo(n.file,function(e,a){r.deg=s[a&&a.exif&&a.exif.Orientation]||0,n._trans(t)}):n._trans(t)}else t("not_support_transform");return this},toData:function(e){return this.get(e)}},Image.exifOrientation=s,Image.transform=function(t,r,a,i){function _transform(o,s){var l={},c=e.queue(function(e){i(e,l)});o?c.fail():e.each(r,function(e,r){if(!c.isFail()){var i=new Image(s.nodeType?s:t),o="function"==typeof e;if(o?e(s,i):e.width?i[e.preview?"preview":"resize"](e.width,e.height,e.strategy):e.maxWidth&&(s.width>e.maxWidth||s.height>e.maxHeight)&&i.resize(e.maxWidth,e.maxHeight,"max"),e.crop){var u=e.crop;i.crop(0|u.x,0|u.y,u.w||u.width,u.h||u.height)}e.rotate===n&&a&&(e.rotate="auto"),i.set({type:i.matrix.type||e.type||t.type||"image/png"}),o||i.set({deg:e.rotate,overlay:e.overlay,filter:e.filter,quality:e.quality||1}),c.inc(),i.toData(function(e,t){e?c.fail():(l[r]=t,c.next())})}})}t.width?_transform(!1,t):e.getInfo(t,_transform)},e.each(["TOP","CENTER","BOTTOM"],function(t,n){e.each(["LEFT","CENTER","RIGHT"],function(e,r){Image[t+"_"+e]=3*n+r,Image[e+"_"+t]=3*n+r})}),Image.toCanvas=function(e){var n=t.createElement("canvas");return n.width=e.videoWidth||e.width,n.height=e.videoHeight||e.height,n.getContext("2d").drawImage(e,0,0),n},Image.fromDataURL=function(t,n,r){var a=e.newImage(t);e.extend(a,n),r(a)},Image.applyFilter=function(t,n,r){"function"==typeof n?n(t,r):window.Caman&&window.Caman("IMG"==t.tagName?Image.toCanvas(t):t,function(){"string"==typeof n?this[n]():e.each(n,function(e,t){this[t](e)},this),this.render(r)})},e.renderImageToCanvas=function(t,n,r,a,i,o,s,l,c,u){try{return t.getContext("2d").drawImage(n,r,a,i,o,s,l,c,u)}catch(t){throw e.log("renderImageToCanvas failed"),t}},e.support.canvas=e.support.transform=o,e.Image=Image}(FileAPI,document),function(e){"use strict";e(FileAPI)}(function(e){"use strict";if(window.navigator&&window.navigator.platform&&/iP(hone|od|ad)/.test(window.navigator.platform)){var t=e.renderImageToCanvas;e.detectSubsampling=function(e){var t,n;return e.width*e.height>1048576&&(t=document.createElement("canvas"),t.width=t.height=1,n=t.getContext("2d"),n.drawImage(e,-e.width+1,0),0===n.getImageData(0,0,1,1).data[3])},e.detectVerticalSquash=function(e,t){var n,r,a,i,o,s=e.naturalHeight||e.height,l=document.createElement("canvas"),c=l.getContext("2d");for(t&&(s/=2),l.width=1,l.height=s,c.drawImage(e,0,0),n=c.getImageData(0,0,1,s).data,r=0,a=s,i=s;i>r;)o=n[4*(i-1)+3],0===o?a=i:r=i,i=a+r>>1;return i/s||1},e.renderImageToCanvas=function(n,r,a,i,o,s,l,c,u,p){if("image/jpeg"===r._type){var d,f,h,m,g=n.getContext("2d"),v=document.createElement("canvas"),y=1024,b=v.getContext("2d");if(v.width=y,v.height=y,g.save(),d=e.detectSubsampling(r),d&&(a/=2,i/=2,o/=2,s/=2),f=e.detectVerticalSquash(r,d),d||1!==f){for(i*=f,u=Math.ceil(y*u/o),p=Math.ceil(y*p/s/f),c=0,m=0;m<s;){for(l=0,h=0;h<o;)b.clearRect(0,0,y,y),b.drawImage(r,a,i,o,s,-h,-m,o,s),g.drawImage(v,0,0,y,y,l,c,u,p),h+=y,l+=u;m+=y,c+=p}return g.restore(),n}}return t(n,r,a,i,o,s,l,c,u,p)}}}),function(e,t){"use strict";function _convertFile(t,n,r){var a=t.blob,i=t.file;if(i){if(!a.toDataURL)return void e.readAsBinaryString(a,function(e){"load"==e.type&&n(t,e.result)});var o={"image/jpeg":".jpe?g","image/png":".png"},s=o[t.type]?t.type:"image/png",l=o[s]||".png",c=a.quality||1;i.match(new RegExp(l+"$","i"))||(i+=l.replace("?","")),t.file=i,t.type=s,!r&&a.toBlob?a.toBlob(function(e){n(t,e)},s,c):n(t,e.toBinaryString(a.toDataURL(s,c)))}else n(t,a)}var n=t.document,r=t.FormData,a=function(){this.items=[]},i=t.encodeURIComponent;a.prototype={append:function(e,t,n,r){this.items.push({name:e,blob:t&&t.blob||(void 0==t?"":t),file:t&&(n||t.name),type:t&&(r||t.type)})},each:function(e){for(var t=0,n=this.items.length;t<n;t++)e.call(this,this.items[t])},toData:function(t,n){n._chunked=e.support.chunked&&n.chunkSize>0&&1==e.filter(this.items,function(e){return e.file}).length,e.support.html5?e.formData&&!this.multipart&&r?n._chunked?(e.log("FileAPI.Form.toPlainData"),this.toPlainData(t)):(e.log("FileAPI.Form.toFormData"),this.toFormData(t)):(e.log("FileAPI.Form.toMultipartData"),this.toMultipartData(t)):(e.log("FileAPI.Form.toHtmlData"),this.toHtmlData(t))},_to:function(t,n,r,a){var i=e.queue(function(){n(t)});this.each(function(o){try{r(o,t,i,a)}catch(t){e.log("FileAPI.Form._to: "+t.message),n(t)}}),i.check()},toHtmlData:function(t){this._to(n.createDocumentFragment(),t,function(t,r){var a,i=t.blob;t.file?(e.reset(i,!0),i.name=t.name,i.disabled=!1,r.appendChild(i)):(a=n.createElement("input"),a.name=t.name,a.type="hidden",a.value=i,r.appendChild(a))})},toPlainData:function(e){this._to({},e,function(e,t,n){e.file&&(t.type=e.file),e.blob.toBlob?(n.inc(),_convertFile(e,function(e,r){t.name=e.name,t.file=r,t.size=r.length,t.type=e.type,n.next()})):e.file?(t.name=e.blob.name,t.file=e.blob,t.size=e.blob.size,t.type=e.type):(t.params||(t.params=[]),t.params.push(i(e.name)+"="+i(e.blob))),t.start=-1,t.end=t.file&&t.file.FileAPIReadPosition||-1,t.retry=0})},toFormData:function(e){this._to(new r,e,function(e,t,n){e.blob&&e.blob.toBlob?(n.inc(),_convertFile(e,function(e,r){t.append(e.name,r,e.file),n.next()})):e.file?t.append(e.name,e.blob,e.file):t.append(e.name,e.blob),e.file&&t.append("_"+e.name,e.file)})},toMultipartData:function(t){this._to([],t,function(e,t,n,r){n.inc(),_convertFile(e,function(e,a){t.push("--_"+r+('\r\nContent-Disposition: form-data; name="'+e.name+'"'+(e.file?'; filename="'+i(e.file)+'"':"")+(e.file?"\r\nContent-Type: "+(e.type||"application/octet-stream"):"")+"\r\n\r\n"+(e.file?a:i(a))+"\r\n")),n.next()},!0)},e.expando)}},e.Form=a}(FileAPI,window),function(e,t){"use strict";var n=function(){},r=e.document,a=function(e){this.uid=t.uid(),this.xhr={abort:n,getResponseHeader:n,getAllResponseHeaders:n},this.options=e},i={"":1,XML:1,Text:1,Body:1};a.prototype={status:0,statusText:"",constructor:a,getResponseHeader:function(e){return this.xhr.getResponseHeader(e)},getAllResponseHeaders:function(){return this.xhr.getAllResponseHeaders()||{}},end:function(r,a){var i=this,o=i.options;i.end=i.abort=n,i.status=r,a&&(i.statusText=a),t.log("xhr.end:",r,a),o.complete(200!=r&&201!=r&&(i.statusText||"unknown"),i),i.xhr&&i.xhr.node&&setTimeout(function(){var t=i.xhr.node;try{t.parentNode.removeChild(t)}catch(e){}try{delete e[i.uid]}catch(e){}e[i.uid]=i.xhr.node=null},9)},abort:function(){this.end(0,"abort"),this.xhr&&(this.xhr.aborted=!0,this.xhr.abort())},send:function(e){var t=this,n=this.options;e.toData(function(e){e instanceof Error?t.end(0,e.message):(n.upload(n,t),t._send.call(t,n,e))},n)},_send:function(n,a){var o,s=this,l=s.uid,c=s.uid+"Load",u=n.url;if(t.log("XHR._send:",a),n.cache||(u+=(~u.indexOf("?")?"&":"?")+t.uid()),a.nodeName){var p=n.jsonp;u=u.replace(/([a-z]+)=(\?)/i,"$1="+l),n.upload(n,s);var d=function(e){if(~u.indexOf(e.origin))try{var n=t.parseJSON(e.data);n.id==l&&f(n.status,n.statusText,n.response)}catch(e){f(0,e.message)}},f=e[l]=function(n,r,a){s.readyState=4,s.responseText=a,s.end(n,r),t.event.off(e,"message",d),e[l]=o=m=e[c]=null};s.xhr.abort=function(){try{m.stop?m.stop():m.contentWindow.stop?m.contentWindow.stop():m.contentWindow.document.execCommand("Stop")}catch(e){}f(0,"abort")},t.event.on(e,"message",d),e[c]=function(){try{var e=m.contentWindow,n=e.document,r=e.result||t.parseJSON(n.body.innerHTML);f(r.status,r.statusText,r.response)}catch(e){t.log("[transport.onload]",e)}},o=r.createElement("div"),o.innerHTML='<form target="'+l+'" action="'+u+'" method="POST" enctype="multipart/form-data" style="position: absolute; top: -1000px; overflow: hidden; width: 1px; height: 1px;"><iframe name="'+l+'" src="javascript:false;" onload="window.'+c+" && "+c+'();"></iframe>'+(p&&n.url.indexOf("=?")<0?'<input value="'+l+'" name="'+p+'" type="hidden"/>':"")+"</form>";var h=o.getElementsByTagName("form")[0],m=o.getElementsByTagName("iframe")[0];h.appendChild(a),t.log(h.parentNode.innerHTML),r.body.appendChild(o),s.xhr.node=o,s.readyState=2;try{h.submit()}catch(e){t.log("iframe.error: "+e)}h=null}else{if(u=u.replace(/([a-z]+)=(\?)&?/i,""),this.xhr&&this.xhr.aborted)return void t.log("Error: already aborted");if(o=s.xhr=t.getXHR(),a.params&&(u+=(u.indexOf("?")<0?"?":"&")+a.params.join("&")),o.open("POST",u,!0),t.withCredentials&&(o.withCredentials="true"),n.headers&&n.headers["X-Requested-With"]||o.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.each(n.headers,function(e,t){o.setRequestHeader(t,e)}),n._chunked){o.upload&&o.upload.addEventListener("progress",t.throttle(function(e){a.retry||n.progress({type:e.type,total:a.size,loaded:a.start+e.loaded,totalSize:a.size},s,n)},100),!1),o.onreadystatechange=function(){var e=parseInt(o.getResponseHeader("X-Last-Known-Byte"),10);if(s.status=o.status,s.statusText=o.statusText,s.readyState=o.readyState,4==o.readyState){for(var r in i)s["response"+r]=o["response"+r];if(o.onreadystatechange=null,!o.status||o.status-201>0)if(t.log("Error: "+o.status),(!o.status&&!o.aborted||500==o.status||416==o.status)&&++a.retry<=n.chunkUploadRetry){var l=o.status?0:t.chunkNetworkDownRetryTimeout;n.pause(a.file,n),t.log("X-Last-Known-Byte: "+e),e?a.end=e:(a.end=a.start-1,416==o.status&&(a.end=a.end-n.chunkSize)),setTimeout(function(){s._send(n,a)},l)}else s.end(o.status);else a.retry=0,a.end==a.size-1?s.end(o.status):(t.log("X-Last-Known-Byte: "+e),e&&(a.end=e),a.file.FileAPIReadPosition=a.end,setTimeout(function(){s._send(n,a)},0));o=null}},a.start=a.end+1,a.end=Math.max(Math.min(a.start+n.chunkSize,a.size)-1,a.start);var g=a.file,v=(g.slice||g.mozSlice||g.webkitSlice).call(g,a.start,a.end+1);a.size&&!v.size?setTimeout(function(){s.end(-1)}):(o.setRequestHeader("Content-Range","bytes "+a.start+"-"+a.end+"/"+a.size),o.setRequestHeader("Content-Disposition","attachment; filename="+encodeURIComponent(a.name)),o.setRequestHeader("Content-Type",a.type||"application/octet-stream"),o.send(v)),g=v=null}else if(o.upload&&o.upload.addEventListener("progress",t.throttle(function(e){n.progress(e,s,n)},100),!1),o.onreadystatechange=function(){if(s.status=o.status,s.statusText=o.statusText,s.readyState=o.readyState,4==o.readyState){for(var e in i)s["response"+e]=o["response"+e];if(o.onreadystatechange=null,!o.status||o.status>201)if(t.log("Error: "+o.status),(!o.status&&!o.aborted||500==o.status)&&(n.retry||0)<n.uploadRetry){n.retry=(n.retry||0)+1;var r=t.networkDownRetryTimeout;n.pause(n.file,n),setTimeout(function(){s._send(n,a)},r)}else s.end(o.status);else s.end(o.status);o=null}},t.isArray(a)){o.setRequestHeader("Content-Type","multipart/form-data; boundary=_"+t.expando);var y=a.join("")+"--_"+t.expando+"--";if(o.sendAsBinary)o.sendAsBinary(y);else{var b=Array.prototype.map.call(y,function(e){return 255&e.charCodeAt(0)});o.send(new Uint8Array(b).buffer)}}else o.send(a)}}},t.XHR=a}(window,FileAPI),function(e,t){"use strict";function _px(e){return e>=0?e+"px":e}function _detectVideoSignal(e){var n,a=r.createElement("canvas"),i=!1;try{n=a.getContext("2d"),n.drawImage(e,0,0,1,1),
i=255!=n.getImageData(0,0,1,1).data[4]}catch(e){t.log("[FileAPI.Camera] detectVideoSignal:",e)}return i}var n=e.URL||e.webkitURL,r=e.document,a=e.navigator,i=a.getUserMedia||a.webkitGetUserMedia||a.mozGetUserMedia||a.msGetUserMedia,o=!!i;t.support.media=o;var s=function(e){this.video=e};s.prototype={isActive:function(){return!!this._active},start:function(e){var t,r,o=this,s=o.video,l=function(n){o._active=!n,clearTimeout(r),clearTimeout(t),e&&e(n,o)};i.call(a,{video:!0},function(e){o.stream=e,s.src=n.createObjectURL(e),t=setInterval(function(){_detectVideoSignal(s)&&l(null)},1e3),r=setTimeout(function(){l("timeout")},5e3),s.play()},l)},stop:function(){try{this._active=!1,this.video.pause();try{this.stream.stop()}catch(e){t.each(this.stream.getTracks(),function(e){e.stop()})}this.stream=null}catch(e){t.log("[FileAPI.Camera] stop:",e)}},shot:function(){return new l(this.video)}},s.get=function(e){return new s(e.firstChild)},s.publish=function(n,a,i){"function"==typeof a&&(i=a,a={}),a=t.extend({},{width:"100%",height:"100%",start:!0},a),n.jquery&&(n=n[0]);var l=function(e){if(e)i(e);else{var t=s.get(n);a.start?t.start(i):i(null,t)}};if(n.style.width=_px(a.width),n.style.height=_px(a.height),t.html5&&o&&!t.insecureChrome){var c=r.createElement("video");c.style.width=_px(a.width),c.style.height=_px(a.height),e.jQuery?jQuery(n).empty():n.innerHTML="",n.appendChild(c),l()}else s.fallback(n,a,l)},s.fallback=function(e,t,n){n("not_support_camera")},s.checkAlreadyCaptured=function(){var t,n=a.mediaDevices,r=e.MediaStreamTrack,i=a.enumerateDevices;return t=n&&n.enumerateDevices?function(e){n.enumerateDevices().then(e)}:r&&r.getSources?r.getSources.bind(r):i?i.bind(a):function(e){e([])},function(e){t(function(t){var n=t.some(function(e){return("videoinput"===e.kind||"video"===e.kind)&&e.label});e(n)})}}();var l=function(e){var n=e.nodeName?t.Image.toCanvas(e):e,r=t.Image(n);return r.type="image/png",r.width=n.width,r.height=n.height,r.size=n.width*n.height*4,r};s.Shot=l,t.Camera=s}(window,FileAPI),function(e,t,n){"use strict";var r=e.document,a=e.location,i=e.navigator,o=n.each;n.support.flash=function(){var t=i.mimeTypes,r=!1;if(i.plugins&&"object"==typeof i.plugins["Shockwave Flash"])r=i.plugins["Shockwave Flash"].description&&!(t&&t["application/x-shockwave-flash"]&&!t["application/x-shockwave-flash"].enabledPlugin);else try{r=!(!e.ActiveXObject||!new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))}catch(e){n.log("Flash -- does not supported.")}return r&&/^file:/i.test(a)&&n.log("[warn] Flash does not work on `file:` protocol."),r}(),n.support.flash&&(!n.html5||!n.support.html5||n.cors&&!n.support.cors||n.media&&!n.support.media||n.insecureChrome)&&function(){function _makeFlashHTML(e){return('<object id="#id#" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+(e.width||"100%")+'" height="'+(e.height||"100%")+'"><param name="movie" value="#src#" /><param name="flashvars" value="#flashvars#" /><param name="swliveconnect" value="true" /><param name="allowscriptaccess" value="always" /><param name="allownetworking" value="all" /><param name="menu" value="false" /><param name="wmode" value="#wmode#" /><embed flashvars="#flashvars#" swliveconnect="true" allownetworking="all" allowscriptaccess="always" name="#id#" src="#src#" width="'+(e.width||"100%")+'" height="'+(e.height||"100%")+'" menu="false" wmode="transparent" type="application/x-shockwave-flash"></embed></object>').replace(/#(\w+)#/gi,function(t,n){return e[n]})}function _css(e,t){if(e&&e.style){var n,r;for(n in t){r=t[n],"number"==typeof r&&(r+="px");try{e.style[n]=r}catch(e){}}}}function _inherit(e,t){o(t,function(t,n){var r=e[n];e[n]=function(){return this.parent=r,t.apply(this,arguments)}})}function _isHtmlFile(e){return e&&!e.flashId}function _wrap(e){var t=e.wid=n.uid();return p._fn[t]=e,"FileAPI.Flash._fn."+t}function _unwrap(e){try{p._fn[e.wid]=null,delete p._fn[e.wid]}catch(e){}}function _getUrl(e,t){if(!u.test(e)){if(/^\.\//.test(e)||"/"!=e.charAt(0)){var n=a.pathname;n=n.substr(0,n.lastIndexOf("/")),e=(n+"/"+e).replace("/./","/")}"//"!=e.substr(0,2)&&(e="//"+a.host+e),u.test(e)||(e=a.protocol+e)}return t&&(e+=(/\?/.test(e)?"&":"?")+t),e}function _makeFlashImage(e,t,a){function _setImage(){try{var e=p.get(o);e.setImage(t)}catch(e){n.log('[err] FlashAPI.Preview.setImage -- can not set "base64":',e)}}var i,o=n.uid(),s=r.createElement("div"),l=10;for(i in e)s.setAttribute(i,e[i]),s[i]=e[i];_css(s,e),e.width="100%",e.height="100%",s.innerHTML=_makeFlashHTML(n.extend({id:o,src:_getUrl(n.flashImageUrl,"r="+n.uid()),wmode:"opaque",flashvars:"scale="+e.scale+"&callback="+_wrap(function _(){return _unwrap(_),--l>0&&_setImage(),!0})},e)),a(!1,s),s=null}function _getFileDescr(e){return{id:e.id,name:e.name,matrix:e.matrix,flashId:e.flashId}}function _getDimensions(t){var n=t.getBoundingClientRect(),a=r.body,i=(t&&t.ownerDocument).documentElement;return{top:n.top+(e.pageYOffset||i.scrollTop)-(i.clientTop||a.clientTop||0),left:n.left+(e.pageXOffset||i.scrollLeft)-(i.clientLeft||a.clientLeft||0),width:n.right-n.left,height:n.bottom-n.top}}var s=n.uid(),l=0,c={},u=/^https?:/i,p={_fn:{},init:function(){var e=r.body&&r.body.firstChild;if(e)do if(1==e.nodeType){n.log("FlashAPI.state: awaiting");var t=r.createElement("div");return t.id="_"+s,_css(t,{top:1,right:1,width:5,height:5,position:"absolute",zIndex:"2147483647"}),e.parentNode.insertBefore(t,e),void p.publish(t,s)}while(e=e.nextSibling);l<10&&setTimeout(p.init,50*++l)},publish:function(e,t,r){r=r||{},e.innerHTML=_makeFlashHTML({id:t,src:_getUrl(n.flashUrl,"r="+n.version),wmode:r.camera?"":"transparent",flashvars:"callback="+(r.onEvent||"FileAPI.Flash.onEvent")+"&flashId="+t+"&storeKey="+i.userAgent.match(/\d/gi).join("")+"_"+n.version+(p.isReady||(n.pingUrl?"&ping="+n.pingUrl:""))+"&timeout="+n.flashAbortTimeout+(r.camera?"&useCamera="+_getUrl(n.flashWebcamUrl):"")+"&debug="+(n.debug?"1":"")},r)},ready:function(){n.log("FlashAPI.state: ready"),p.ready=n.F,p.isReady=!0,p.patch(),p.patchCamera&&p.patchCamera(),n.event.on(r,"mouseover",p.mouseover),n.event.on(r,"click",function(e){p.mouseover(e)&&(e.preventDefault?e.preventDefault():e.returnValue=!0)})},getEl:function(){return r.getElementById("_"+s)},getWrapper:function(e){do if(/js-fileapi-wrapper/.test(e.className))return e;while((e=e.parentNode)&&e!==r.body)},mouseover:function(e){var t=n.event.fix(e).target;if(/input/i.test(t.nodeName)&&"file"==t.type&&!t.disabled){var a=t.getAttribute(s),i=p.getWrapper(t);if(n.multiFlash){if("i"==a||"r"==a)return!1;if("p"!=a){t.setAttribute(s,"i");var o=r.createElement("div");if(!i)return void n.log("[err] FlashAPI.mouseover: js-fileapi-wrapper not found");_css(o,{top:0,left:0,width:t.offsetWidth,height:t.offsetHeight,zIndex:"2147483647",position:"absolute"}),i.appendChild(o),p.publish(o,n.uid()),t.setAttribute(s,"p")}return!0}if(i){var l=_getDimensions(i);_css(p.getEl(),l),p.curInp=t}}else/object|embed/i.test(t.nodeName)||_css(p.getEl(),{top:1,left:1,width:5,height:5})},onEvent:function(e){var t=e.type;if("ready"==t){try{p.getInput(e.flashId).setAttribute(s,"r")}catch(e){}return p.ready(),setTimeout(function(){p.mouseenter(e)},50),!0}"ping"===t?n.log("(flash -> js).ping:",[e.status,e.savedStatus],e.error):"log"===t?n.log("(flash -> js).log:",e.target):t in p&&setTimeout(function(){n.log("FlashAPI.event."+e.type+":",e),p[t](e)},1)},mouseenter:function(e){var t=p.getInput(e.flashId);if(t){p.cmd(e,"multiple",null!=t.getAttribute("multiple"));var r=[],a={};o((t.getAttribute("accept")||"").split(/,\s*/),function(e){n.accept[e]&&o(n.accept[e].split(" "),function(e){a[e]=1})}),o(a,function(e,t){r.push(t)}),p.cmd(e,"accept",r.length?r.join(",")+","+r.join(",").toUpperCase():"*")}},get:function(t){return r[t]||e[t]||r.embeds[t]},getInput:function(e){if(!n.multiFlash)return p.curInp;try{var t=p.getWrapper(p.get(e));if(t)return t.getElementsByTagName("input")[0]}catch(t){n.log('[err] Can not find "input" by flashId:',e,t)}},select:function(e){var a,i=p.getInput(e.flashId),s=n.uid(i),l=e.target.files;o(l,function(e){n.checkFileObj(e)}),c[s]=l,r.createEvent?(a=r.createEvent("Event"),a.files=l,a.initEvent("change",!0,!0),i.dispatchEvent(a)):t?t(i).trigger({type:"change",files:l}):(a=r.createEventObject(),a.files=l,i.fireEvent("onchange",a))},cmd:function(e,t,r,a){try{return n.log("(js -> flash)."+t+":",r),p.get(e.flashId||e).cmd(t,r)}catch(i){n.log("(js -> flash).onError:",i.toString()),a||setTimeout(function(){p.cmd(e,t,r,!0)},50)}},patch:function(){n.flashEngine=!0,_inherit(n,{getFiles:function(e,t,r){if(r)return n.filterFiles(n.getFiles(e),t,r),null;var a=n.isArray(e)?e:c[n.uid(e.target||e.srcElement||e)];return a?(t&&(t=n.getFilesFilter(t),a=n.filter(a,function(e){return t.test(e.name)})),a):this.parent.apply(this,arguments)},getInfo:function(e,t){if(_isHtmlFile(e))this.parent.apply(this,arguments);else if(e.isShot)t(null,e.info={width:e.width,height:e.height});else{if(!e.__info){var r=e.__info=n.defer();p.cmd(e,"getFileInfo",{id:e.id,callback:_wrap(function _(t,n){_unwrap(_),r.resolve(t,e.info=n)})})}e.__info.then(t)}}}),n.support.transform=!0,n.Image&&_inherit(n.Image.prototype,{get:function(e,t){return this.set({scaleMode:t||"noScale"}),this.parent(e)},_load:function(e,t){if(n.log("FlashAPI.Image._load:",e),_isHtmlFile(e))this.parent.apply(this,arguments);else{var r=this;n.getInfo(e,function(n){t.call(r,n,e)})}},_apply:function(e,t){if(n.log("FlashAPI.Image._apply:",e),_isHtmlFile(e))this.parent.apply(this,arguments);else{var r=this.getMatrix(e.info),a=t;p.cmd(e,"imageTransform",{id:e.id,matrix:r,callback:_wrap(function _(i,o){n.log("FlashAPI.Image._apply.callback:",i),_unwrap(_),i?a(i):n.support.html5||n.support.dataURI&&!(o.length>3e4)?(r.filter&&(a=function(e,a){e?t(e):n.Image.applyFilter(a,r.filter,function(){t(e,this.canvas)})}),n.newImage("data:"+e.type+";base64,"+o,a)):_makeFlashImage({width:r.deg%180?r.dh:r.dw,height:r.deg%180?r.dw:r.dh,scale:r.scaleMode},o,a)})})}},toData:function(e){var t=this.file,r=t.info,a=this.getMatrix(r);n.log("FlashAPI.Image.toData"),_isHtmlFile(t)?this.parent.apply(this,arguments):("auto"==a.deg&&(a.deg=n.Image.exifOrientation[r&&r.exif&&r.exif.Orientation]||0),e.call(this,!t.info,{id:t.id,flashId:t.flashId,name:t.name,type:t.type,matrix:a}))}}),n.Image&&_inherit(n.Image,{fromDataURL:function(e,t,r){!n.support.dataURI||e.length>3e4?_makeFlashImage(n.extend({scale:"exactFit"},t),e.replace(/^data:[^,]+,/,""),function(e,t){r(t)}):this.parent(e,t,r)}}),_inherit(n.Form.prototype,{toData:function(e){for(var t=this.items,r=t.length;r--;)if(t[r].file&&_isHtmlFile(t[r].blob))return this.parent.apply(this,arguments);n.log("FlashAPI.Form.toData"),e(t)}}),_inherit(n.XHR.prototype,{_send:function(e,t){if(t.nodeName||t.append&&n.support.html5||n.isArray(t)&&"string"==typeof t[0])return this.parent.apply(this,arguments);var r,a,i={},l={},c=this;if(o(t,function(e){e.file?(l[e.name]=e=_getFileDescr(e.blob),a=e.id,r=e.flashId):i[e.name]=e.blob}),a||(r=s),!r)return n.log("[err] FlashAPI._send: flashId -- undefined"),this.parent.apply(this,arguments);n.log("FlashAPI.XHR._send: "+r+" -> "+a),c.xhr={headers:{},abort:function(){p.cmd(r,"abort",{id:a})},getResponseHeader:function(e){return this.headers[e]},getAllResponseHeaders:function(){return this.headers}};var u=n.queue(function(){p.cmd(r,"upload",{url:_getUrl(e.url.replace(/([a-z]+)=(\?)&?/i,"")),data:i,files:a?l:null,headers:e.headers||{},callback:_wrap(function upload(t){var r=t.type,a=t.result;n.log("FlashAPI.upload."+r),"progress"==r?(t.loaded=Math.min(t.loaded,t.total),t.lengthComputable=!0,e.progress(t)):"complete"==r?(_unwrap(upload),"string"==typeof a&&(c.responseText=a.replace(/%22/g,'"').replace(/%5c/g,"\\").replace(/%26/g,"&").replace(/%25/g,"%")),c.end(t.status||200)):"abort"!=r&&"error"!=r||(c.end(t.status||0,t.message),_unwrap(upload))})})});o(l,function(e){u.inc(),n.getInfo(e,u.next)}),u.check()}})}};n.Flash=p,n.newImage("data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",function(e,t){n.support.dataURI=!(1!=t.width||1!=t.height),p.init()})}()}(window,window.jQuery,FileAPI),function(e,t,n){"use strict";var r=n.each,a=[];!n.support.flash||!n.media||n.support.media&&n.html5&&!n.insecureChrome||!function(){function _wrap(e){var t=e.wid=n.uid();return n.Flash._fn[t]=e,"FileAPI.Flash._fn."+t}function _unwrap(e){try{n.Flash._fn[e.wid]=null,delete n.Flash._fn[e.wid]}catch(e){}}var e=n.Flash;n.extend(n.Flash,{patchCamera:function(){n.Camera.fallback=function(t,r,a){var i=n.uid();n.log("FlashAPI.Camera.publish: "+i),e.publish(t,i,n.extend(r,{camera:!0,onEvent:_wrap(function _(e){"camera"===e.type&&(_unwrap(_),e.error?(n.log("FlashAPI.Camera.publish.error: "+e.error),a(e.error)):(n.log("FlashAPI.Camera.publish.success: "+i),a(null)))})}))},r(a,function(e){n.Camera.fallback.apply(n.Camera,e)}),a=[],n.extend(n.Camera.prototype,{_id:function(){return this.video.id},start:function(t){var r=this;e.cmd(this._id(),"camera.on",{callback:_wrap(function _(e){_unwrap(_),e.error?(n.log("FlashAPI.camera.on.error: "+e.error),t(e.error,r)):(n.log("FlashAPI.camera.on.success: "+r._id()),r._active=!0,t(null,r))})})},stop:function(){this._active=!1,e.cmd(this._id(),"camera.off")},shot:function(){n.log("FlashAPI.Camera.shot:",this._id());var e=n.Flash.cmd(this._id(),"shot",{});return e.type="image/png",e.flashId=this._id(),e.isShot=!0,new n.Camera.Shot(e)}})}}),n.Camera.fallback=function(){a.push(arguments)}}()}(window,window.jQuery,FileAPI),r=[],a=function(){return FileAPI}.apply(t,r),!(void 0!==a&&(e.exports=a))},74:function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function __(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)},a=this&&this.__decorate||function(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=n(1),s=n(55),l=n(91),c=n(32),u=function(e){function DesignDataService(t,n){e.call(this),this.ppService=t,this.configService=n}return r(DesignDataService,e),DesignDataService.prototype.getData=function(e){var t=this;console.log("DesignDataService getData");var n={TrialName:e};this.ppService.runProtocolGetDesignData(this.configService.designProtocol,n).subscribe(function(e){t.data=e,t.gotData=!0},function(e){return console.log(e)})},DesignDataService=a([o.Injectable(),i("design:paramtypes",[s.HTTPService,l.ConfigService])],DesignDataService)}(c.DataService);t.DesignDataService=u},740:function(e,t){e.exports='<my-header></my-header>\r\n\r\n <nav>\r\n    <a \r\n        [ngClass]="app.linkClass(\'design\')" \r\n        routerLinkActive="active" \r\n\r\n        (click)="navigate(\'design\')"\r\n        >\r\n        Design {{app.selection.trial_name}}\r\n    </a>\r\n\r\n    <a \r\n        [ngClass]="app.linkClass(\'formulation\')" \r\n        routerLink="/formulation" \r\n        routerLinkActive="active" \r\n\r\n        (click)="navigate(\'formulation\')"\r\n        >\r\n        Formulation\r\n    </a>\r\n\r\n    <a \r\n        [ngClass]="app.linkClass(\'stability\')"\r\n        routerLink="/stability" \r\n        routerLinkActive="active" \r\n        (click)="navigate(\'stability\')"\r\n        >\r\n        Stability\r\n     </a>\r\n</nav>\r\n\r\n<hr>\r\n\r\n<router-outlet></router-outlet>\r\n\r\n\r\n'},741:function(e,t){e.exports='\r\n<div *ngIf="!app.trialIsNotSelected()" style="width: 100%; float: left;" class="pad-top" >\r\n\r\n    <div style="float: left; width: 15%;" class="btn-group">\r\n       \r\n        <button class="button" *ngFor="let step of DesignSteps; let i=index;"\r\n        (click)="state.setTabState(i)" [disabled]="state.isTabDisabled(i)">{{step}}</button>   \r\n\r\n    </div>\r\n\r\n    <div style="float: left; width: 85%;">\r\n        <my-parentformulation   *ngIf="state.activeTab === 0"></my-parentformulation>\r\n        <my-experimenttype      *ngIf="state.activeTab === 1"></my-experimenttype>\r\n        <my-testformulations    *ngIf="state.activeTab === 2"></my-testformulations>\r\n        <my-processparameters   *ngIf="state.activeTab === 3"></my-processparameters>\r\n        <my-testshedule         *ngIf="state.activeTab === 4"></my-testshedule>\r\n    </div>\r\n\r\n</div>\r\n\r\n'},742:function(e,t){e.exports='<div>\r\n    <h2>Experiment type</h2>\r\n\r\n       <!-- [show]="experimentSetup.experimentType.gotData()"-->\r\n         <div >\r\n            <form class="form" *ngIf = "designData.experimentTypes.gotData">\r\n            <select class="form-control" \r\n                    name="Experiment type" \r\n                    id="ExperimentTypeSelect" \r\n                    required [(ngModel)]="type" \r\n                    (change)="changeType()">\r\n                \r\n                <option *ngFor="let i of experimentSetup.experimentTypes.data.experimentTypes">{{i.Type}}</option>\r\n            </select>\r\n            </form>\r\n            <div >\r\n                <div *ngFor="let sellist of experimentSetup.experimentTypes.selected.list">{{sellist}}<br/>\r\n\r\n                    <select multiple class="form-control" \r\n                            [name]="sellist" \r\n                            [(ngModel)]="experimentSetup.experimentTypes.selected[list]">\r\n\r\n                        <option *ngFor="let PF of experimentSetup.parentFormulation.data.formulation">{{PF.name}}</option>\r\n\r\n                    </select>\r\n\r\n                </div>\r\n                <div *ngFor="let ing of experimentSetup.experimentTypes.selected.ing">{{ing}}<br/>\r\n\r\n                    <select class="form-control" \r\n                            [(ngModel)]="experimentSetup.experimentTypes.selected[ing]" \r\n                            [name]="ing">\r\n\r\n                        <option *ngFor="let PF1 of experimentSetup.parentFormulation.data.formulation" [value]="PF1.name">{{PF1.name}}</option>\r\n                        \r\n                    </select>             \r\n                </div>\r\n\r\n        <!--lower, Upper limits and Increment -->\r\n                <div *ngFor="let num of experimentSetup.experimentTypes.selected.number">{{num}}<br/>\r\n                    <input type="number" [(ngModel)]="experimentSetup.experimentTypes.selected[num]" [name]="num" step="0.01">\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <button [ngClass]="state.prevButtonClass()" (click)="state.prevState()">Previous</button>\r\n        <button [ngClass]="state.nextButtonClass()" (click)="state.nextState()">Next</button>\r\n\r\n</div>\r\n\r\n'},743:function(e,t){e.exports='<button (click)="info()"> Drop  {{designData.parentFormulation.gotData}} </button>    \r\n\r\n\r\n<div class="drop-box well" fileDrop\r\n  [ngClass]="{\'file-is-over\': fileIsOver}"\r\n  [options]="options"\r\n  (fileOver)="fileOver($event)"\r\n  (onFileDrop)="uploadThenRunProtocol($event)">\r\n  Drop file here<br><br><br>\r\n</div>\r\n\r\n<div id="parentFormulationHOT" [hidden]="!designData.parentFormulation.gotData"></div>\r\n\r\n<div><br><br><br>\r\n      <button type="button" [ngClass]="state.nextButtonClass()" (click)="state.nextState()">Next</button>\r\n</div>\r\n'},744:function(e,t){e.exports='<div>\r\n    <h2>Process Parameters</h2>  \r\n\r\n    <div [hidden]="!experimentSetup.experimentTypes.gotData" class="form-inline">\r\n        <label for="process">Process:</label>\r\n        <select class="form-control" id="process" name="process" [(ngModel)]="state.selection.process.name" required #newprocess="ngModel">\r\n            <option *ngFor="let process of experimentSetup.processes">{{process.name }}</option>\r\n        </select>\r\n        <button  [disabled]="!newprocess.valid" class="btn btn-primary btn-xs" title="Add new process" (click)="design.newProcessItem()" style="margin-right: 8px;">\r\n            <span class="glyphicon glyphicon-plus"></span>\r\n        </button>\r\n    </div>\r\n\r\n    <table id="tree-root" class="table table-responsive">\r\n        <thead>\r\n            <tr>\r\n                <th>Sort</th>\r\n                <th></th>\r\n                <th width="30%">Name</th>\r\n                <th>Value</th>\r\n                <th>Unit</th>\r\n            </tr>\r\n        </thead>\r\n\r\n        <tbody dnd-sortable-container [dropZones]="[\'boxers-zone\']" [sortableData]="experimentSetup.processData">\r\n            <tr *ngFor="let node of experimentSetup.processData; let i = index" class="list-group-item" dnd-sortable [sortableIndex]="i" class="node.type === \'ingredient\' ? \'ingredientrow\' : \'processrow\'">\r\n                <td>\r\n                    <div [hidden]="!experimentSetup.experimentTypes.gotData">\r\n                        <i ngClass="glyphicon glyphicon-resize-vertical"></i> \r\n                    </div>\r\n                </td>\r\n\r\n                <td>\r\n                    <i [ngClass]="node.type === \'ingredient\' ? \'glyphicon glyphicon-tag\' : \'glyphicon glyphicon-cog\'"></i>\r\n                </td>\r\n\r\n                <td>\r\n                    <strong>{{node.name}}</strong> \r\n                </td>\r\n\r\n                <td>\r\n                    <div [hidden]="!experimentSetup.experimentTypes.gotData">\r\n                        <input type="text" [hidden]="node.type === \'ingredient\'" [(ngModel)]="experimentSetup.processData[i].parameter"/>\r\n                    </div>\r\n                </td>\r\n\r\n                <td>\r\n                    <p [hidden]="node.type === \'ingredient\'">{{node.caption}}</p>\r\n                </td>\r\n\r\n                <td>\r\n                    <div [hidden]="!experimentSetup.experimentTypes.gotData">\r\n                        <button [hidden]="node.type === \'ingredient\'" class="pull-right btn btn-danger btn-xs" (click)="design.removeProcessItem(node)">\r\n                            <span class="glyphicon glyphicon-remove"></span>\r\n                        </button>\r\n                    </div>\r\n                </td>\r\n                \r\n            </tr>\r\n        </tbody>\r\n    </table>\r\n\r\n    <div [hidden]="!experimentSetup.experimentTypes.gotData">\r\n        <button [ngClass]="state.prevButtonClass()" (click)="state.prevState()">Previous</button>\r\n        <button [ngClass]="state.nextButtonClass()" (click)="state.nextState()">Next</button>\r\n    </div>\r\n\r\n</div>\r\n'},745:function(e,t){e.exports='<div>\r\n    <h2>Test formulations</h2>\r\n    \r\n    <div *ngIf="!experimentSetup.experimentTypes.gotData">\r\n        <p>Total Quantity: {{experimentSetup.experimentInfo.totalQuantity.quantity}} {{experimentSetup.experimentInfo.totalQuantity.unit}}</p>\r\n    </div>\r\n    \r\n    <div *ngIf="experimentSetup.experimentTypes.gotData">    \r\n        <div class="form-inline pad-bottom">\r\n            <label for="formulationQuantity">Total quantity</label>\r\n            <input type="number" class="form-control" id="formulationQuantity" [(ngModel)]="experimentSetup.experimentInfo.totalQuantity.quantity"/>\r\n            <select class="form-control" id="formulationQuantityUnit" [(ngModel)]="experimentSetup.experimentInfo.totalQuantity.unit" >\r\n                <option class="form-control" *ngFor="let unit of experimentSetup.availableUnits">{{unit}}</option>\r\n\r\n            </select>\r\n        </div>\r\n    \r\n        <div class="pad-bottom">\r\n            <h4>Search FLOW for additional ingredients</h4>\r\n        </div>\r\n        <div class="form-inline pad-bottom">\r\n            <label class="test-sched-label" for="nameLookup">Search by material name</label>\r\n            <input type="string" class="form-control" [(ngModel)]="design.flowMaterialLookupName" id="nameLookup"/>\r\n            <button class="btn btn-info btn-sm" type="button" (click)="design.findFlowMaterialName()">Find</button>\r\n        </div>\r\n        <div class="form-inline pad-bottom">\r\n            <label class="test-sched-label" for="idLookup">Search by Material ID</label>\r\n            <input type="string" class="form-control" [(ngModel)]="design.flowMaterialLookupID" id="idLookup"/>\r\n            <button class="btn btn-info btn-sm" type="button" (click)="design.findFlowMaterialID()">Find</button>\r\n        </div>\r\n    </div>\r\n    \r\n    <div id="allFormulationsHOT"></div>\r\n    <div id="allFormulationsPlot"></div>\r\n\r\n    \r\n    <div [hidden]="!experimentSetup.experimentTypes.gotData">\r\n        <button [ngClass]="state.prevButtonClass()" (click)="state.prevState()">Previous</button>\r\n        <button [ngClass]="state.nextButtonClass()" (click)="state.nextState()">Next</button>\r\n    </div>\r\n</div>\r\n\r\n'},746:function(e,t){e.exports='<div>\r\n    <h2>Test weeks and temperatures</h2>\r\n\r\n    <table>\r\n        <thead>\r\n            <tr>\r\n                <th>\r\n                    Week\r\n                </th>\r\n                <th class="pad-left" *ngFor="let node of experimentSetup.testSchedule.allWeeks">\r\n                    {{node.week}}\r\n                </th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            <tr *ngFor="let node of experimentSetup.testSchedule.schedule">\r\n                <td>{{node.name}}</td>\r\n                \r\n                <td class="pad-left" *ngFor="let week of node.weeks.week">\r\n                    <button *ngIf="week.doTest" [ngClass]="{true: \'btn btn-ok glyphicon glyphicon-ok\', false: \'btn btn-danger glyphicon glyphicon-remove\'}[week.doTest]" (click)="design.updateTestStatus(week)"></button>\r\n                    <button *ngIf="!week.doTest" [ngClass]="{true: \'btn btn-ok glyphicon glyphicon-ok\', false: \'btn btn-danger glyphicon glyphicon-remove\'}[week.doTest]" (click)="design.updateTestStatus(week)"></button>\r\n                </td>\r\n            </tr>\r\n        </tbody>\r\n    </table>\r\n    \r\n    <h3>Storage temperatures</h3>\r\n    <table>\r\n        <thead>\r\n            <tr>\r\n                <th>Temperature</th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            <tr *ngFor="let node of experimentSetup.testSchedule.temperatures">\r\n                <td>{{node.temperature}}</td>\r\n            </tr>\r\n        </tbody>\r\n    </table>\r\n    \r\n    <div [hidden]="!experimentSetup.experimentTypes.gotData" class="form-inline">\r\n        <label class="test-sched-label" for="newWeek">Edit test weeks</label>\r\n        <input class="form-control test-sched-input" type="number" id="newWeek" required [(ngModel)]="design.newWeek.week" #testweeks="ngModel"/>\r\n        <button [disabled]="!testweeks.valid" class="btn btn-primary btn-xs" title="Add new testing week" (click)="design.newTestWeek()"><span class="glyphicon glyphicon-plus"></span></button>\r\n        <button [disabled]="!testweeks.valid" class="btn btn-danger btn-xs" title="Remove testing week" (click)="design.removeTestWeek()"><span class="glyphicon glyphicon-minus"></span></button>\r\n    </div>\r\n    \r\n    <div [hidden]="!experimentSetup.experimentTypes.gotData" class="form-inline">\r\n        <label class="test-sched-label" for="newWeek">Edit storage temperatures</label>\r\n        <input class="form-control test-sched-input" type="text" id="newTemp" required [(ngModel)]="design.newTemp.temperature" #temperatures="ngModel"/>\r\n        <button [disabled]="!temperatures.valid" class="btn btn-primary btn-xs" title="Add new storage temperature" (click)="design.newStorageTemp()"><span class="glyphicon glyphicon-plus"></span></button>\r\n        <button [disabled]="!temperatures.valid" class="btn btn-danger btn-xs" title="Remove storage temperature" (click)="design.removeStorageTemp()"><span class="glyphicon glyphicon-minus"></span></button>\r\n    </div>\r\n    \r\n    <div [hidden]="!experimentSetup.experimentTypes.gotData">\r\n        <button type="button" [ngClass]="state.prevButtonClass()" (click)="state.prevState()">Previous</button>\r\n        <br/><br/><h3>Save for</h3>\r\n        <button type="button" class="btn btn-warning active" (click)="design.saveToExperiment()">Manual</button>\r\n        <button type="button" class="btn btn-success active">High Throughput</button>\r\n    </div>\r\n</div>'},747:function(e,t){e.exports='<div id="formulation-all">\r\n    <div>\r\n        <button class="btn btn-warning" uib-btn-radio="\'manual\'">Manual</button>\r\n        <button class="btn btn-success" uib-btn-radio="\'auto\'">High Throughput</button>\r\n        \r\n        <button  class="btn btn-success" [hidden]="!formulation.executionMode==\'auto\'">Load EMS Data</button>\r\n        <button  class="btn btn-info">Save</button>\r\n        <button  class="btn btn-info" (click)="formulation.switchToStability()">Save and Continue</button>\r\n    </div>\r\n    <div id="print-area">\r\n        <div id="normal-print-area" [hidden]="formulation.formulationData.isDoseResponse">\r\n            <h2>Formulation design</h2>\r\n            <div id="process-formulation-table"></div>\r\n        </div>\r\n\r\n        <div id="dose-response-print-area" [hidden]="!formulation.formulationData.isDoseResponse">\r\n            <h2>Dose response formulation design</h2>\r\n            <div id="main-batch-formulation-table"></div>\r\n\r\n            <h2>Individual formulations</h2>\r\n            <div id="hole-fill-formulation-table"></div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="pad-top">\r\n        <button class="btn btn-info" (click)="formulation.getPDF()">\r\n            Print\r\n        </button>\r\n        <button class="btn btn-info" (click)="formulation.copyPlannedToActual()">\r\n            Copy planned to actual\r\n        </button>\r\n        <button class="btn btn-info" (click)="formulation.clearActual()">\r\n            Clear actual\r\n        </button>\r\n        <button class="btn btn-info" (click)="formulation.saveData()">\r\n            Save data to Experiment\r\n        </button>\r\n    </div>\r\n</div>\r\n<div id="process-formulation-plot" ng-show="showPlots"></div>'},748:function(e,t){e.exports='<title>Lab Automation</title>\r\n\r\n<div style="position:absolute;right:0;">\r\n    <button  class="btn btn-info btn-sm" ng-click="logout()">{{userName}} Logout</button>\r\n    <button  class="btn btn-info btn-sm" ng-click="hideHeader()">Show/Hide</button>\r\n    <button  class="btn btn-info btn-sm" ng-click="duplicateView()">New Tab</button>   \r\n    \r\n</div>\r\n\r\n<h2 align="center">{{app.header}}{{workFlowType}}</h2>\r\n\r\n<form class="form-inline">\r\n        <label for="project">Project</label>\r\n        <select class="form-control" id="project"\r\n            required\r\n            [(ngModel)]="app.selection.project_name" \r\n            name="project_name"\r\n            #project="ngModel">  \r\n\r\n            <option myHighlight *ngFor="let d of (app.CPanelData \r\n            | unique:\'project_name\')" \r\n            [value]="d.project_name">{{d.project_name}}\r\n            </option>\r\n\r\n        </select>\r\n\r\n        <label for="subproject">Subproject</label>\r\n        <select class="form-control" id="subproject"\r\n            required\r\n            [(ngModel)]="app.selection.subproject_name" \r\n            name="subproject_name"\r\n            #project="ngModel">   \r\n\r\n            <option *ngFor="let d of (app.CPanelData \r\n            | unique:\'subproject_name\' \r\n            | contain: \'project_name\' : app.selection.project_name)"  \r\n            [value]="d.subproject_name">{{d.subproject_name}}\r\n            </option>\r\n\r\n        </select>\r\n\r\n        <label for="subproject">Experiment</label>\r\n        <select class="form-control" id="trial" (change)="app.changeTrial()"\r\n            required\r\n            [(ngModel)]="app.selection.trial_name" \r\n            name="trial_name"\r\n            #project="ngModel">  \r\n\r\n            <option *ngFor="let d of (app.CPanelData \r\n            | unique:\'trial_name\'\r\n            | contain:\'project_name\':app.selection.project_name \r\n            | contain:\'subproject_name\':app.selection.subproject_name)" \r\n            [value]="d.trial_name">{{d.trial_name}}</option>\r\n\r\n        </select>\r\n\r\n    <button type="button" class="btn btn-info btn-sm" [disabled]="!project.valid" (click)="app.changeTrial()" id="load">Load Experiment</button>\r\n    \r\n\r\n    <button type="button" class="btn btn-info btn-sm" [disabled]="!project.valid" (click)="app.launchExperiment()" id="launch">Launch Experiment</button>   \r\n</form>\r\n<br>\r\n             \r\n\r\n\r\n            \r\n \r\n        \r\n\r\n';
},749:function(e,t){e.exports='<div>\r\n    <div>\r\n        <div class="pad-bottom">\r\n            <button type="button" class="btn btn-info" (click)="stability.printGrid()">\r\n                Print\r\n            </button>\r\n            <button type="button" class="btn btn-info" (click)="stability.showhidePlots()">\r\n                {{stability.showPlotsState}}\r\n            </button>\r\n            <button type="button" class="btn btn-info" (click)="stability.loadStabilityPlots()">\r\n                Refresh Plots\r\n            </button>\r\n            <button type="button" class="btn btn-info" (click)="stability.saveDataToEKB()">\r\n                Save data\r\n            </button>\r\n            <div id="process-formulation-plot"></div>\r\n        </div>\r\n    </div>\r\n    \r\n    <div [hidden]="!stability.changesMade"><p class="changes-warning">Please ensure you save your changes.</p></div>\r\n    \r\n    <div>\r\n        <button class="btn btn-warning" *ngIf="stability.executionMode == \'manual\'" (click)="stability.changeMode()">Manual</button>\r\n        <button class="btn btn-success" *ngIf="stability.executionMode == \'auto\'" (click)="stability.changeMode()">High Throughput</button>\r\n        \r\n        <button  class="btn btn-success" *ngIf="stability.executionMode == \'auto\'">Load EMS Data</button>\r\n        <button  class="btn btn-info">Save</button>\r\n        <button  class="btn btn-info"  (click)="stability.saveToNotebook()">Open Notebook</button>\r\n    </div>\r\n\r\n    <form class="form-inline pad-top" name="name1">\r\n        <label for="week">Select Test Time:</label>\r\n        <select class="form-control" id="week" name="week" [(ngModel)]="stability.selection.testWeek">\r\n            <option *ngFor="let week of stability.options.testWeeks">\r\n                {{week}}\r\n            </option>\r\n        </select>\r\n\r\n        <button (click)="stability.MoveDateTime(-1)" class="btn btn-info" >Back</button>\r\n        <button (click)="stability.MoveDateTime(1)" class="btn btn-info" >Next</button>\r\n        <button (click)="stability.NewTestWeek()" class="btn btn-info" >New</button>\r\n        <input type="number" id="newWeek" class="form-control" name="name2" [(ngModel)]="stability.newTestWeek"/>\r\n        <label for="newWeek">week</label>\r\n    </form>\r\n    <br/>\r\n    <div id="stability-grid" ></div>\r\n    \r\n    <div class="form-inline pad-top">\r\n        <label for="plot-type">Select plot style</label>\r\n        <select class="form-control" id="plot-type" [(ngModel)]="stability.plotStyle" (change)="stability.loadStabilityPlots()">\r\n            <option *ngFor="let plotStyle of stability.options.plotStyles">{{plotStyle}}\r\n            </option>\r\n        </select>\r\n    </div>\r\n    <div [hidden]="!stability.showPlots">\r\n        <div [hidden]="stability.plotStyle!=\'Selected week\'">\r\n            <div>\r\n                <div id="stability-plots-this-pH" class="col-sm-6" ></div>\r\n                <div id="stability-plots-this-visc2" class="col-sm-6"></div>\r\n            </div>\r\n            <div>\r\n                <div id="stability-plots-this-visc21" class="col-sm-6"></div>\r\n                <div id="stability-plots-this-visc106" class="col-sm-6"></div>\r\n            </div>\r\n        </div>\r\n        <div [hidden]="stability.plotStyle!=\'All weeks\'">\r\n            <div>\r\n                <div id="stability-plots-all-pH" class="col-sm-6" ></div>\r\n                <div id="stability-plots-all-visc2" class="col-sm-6"></div>\r\n            </div>\r\n            <div>\r\n                <div id="stability-plots-all-visc21" class="col-sm-6"></div>\r\n                <div id="stability-plots-all-visc106" class="col-sm-6"></div>\r\n            </div>\r\n        </div>\r\n        \r\n        <div id="stability-plots-all"></div>\r\n      </div>  \r\n    \r\n    \r\n</div>\r\n\r\n'},750:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),a=n(96),i=n(115),o=n(421),s=n(422),l=n(423),c=n(199);n.d(t,"AbstractComponent",function(){return c.a}),n.d(t,"DataTransferEffect",function(){return a.a}),n.d(t,"DragImage",function(){return a.b}),n.d(t,"DragDropConfig",function(){return a.c}),n.d(t,"DragDropData",function(){return i.a}),n.d(t,"dragDropServiceFactory",function(){return i.b}),n.d(t,"DragDropService",function(){return i.c}),n.d(t,"dragDropSortableServiceFactory",function(){return i.d}),n.d(t,"DragDropSortableService",function(){return i.e}),n.d(t,"DraggableComponent",function(){return o.a}),n.d(t,"DroppableComponent",function(){return s.a}),n.d(t,"SortableContainer",function(){return l.a}),n.d(t,"SortableComponent",function(){return l.b}),n.d(t,"providers",function(){return u}),n.d(t,"DndModule",function(){return p});var u=[a.c,{provide:i.c,useFactory:i.b},{provide:i.e,useFactory:i.d,deps:[a.c]}],p=function(){function DndModule(){}return DndModule.forRoot=function(){return{ngModule:DndModule,providers:u}},DndModule.decorators=[{type:r.NgModule,args:[{declarations:[o.a,s.a,l.a,l.b],exports:[o.a,s.a,l.a,l.b]}]}],DndModule.ctorParameters=function(){return[]},DndModule}()},751:function(e,t){e.exports=".btn-group .button {\r\n    /*background-color: #4CAF50; /* Green */\r\n    /*border: 1px solid green; */\r\n    color: black;\r\n    padding: 15px 1px;\r\n    text-align: left;\r\n    text-decoration: none;\r\n    display: inline-block;\r\n    font-size: 16px;\r\n    cursor: pointer;\r\n    width: 100%;\r\n    display: block;\r\n    background-color: white;\r\n}\r\n\r\n.btn-group .button:not(:last-child) {\r\n    border-bottom: none; /* Prevent double borders */\r\n}\r\n\r\n.btn-group .button:hover {\r\n    background-color: white;\r\n    color: red;\r\n}\r\n.btn-group .button:disabled {\r\n    background-color: white;\r\n    color: black;\r\n    cursor: not-allowed;\r\n}\r\nbutton {\r\n  font-family: Arial;\r\n  background-color: #eee;\r\n  border: none;\r\n  padding: 5px 10px;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  cursor: hand;\r\n}\r\nbutton:hover {\r\n  background-color: #cfd8dc;\r\n}\r\n.btn[disabled],\r\nhtml input[disabled] {\r\n    cursor: not-allowed !important;\r\n background-color: #eee;\r\n border-color: #ddd;\r\n color: #ddd;\r\n}"},90:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(1),o=n(27),s=n(107),l=n(55),c=n(91),u=n(108),p=n(74),d=n(32),f=n(32),h=function(){function AppService(e,t,n,r,a,i){this.state=e,this.stateParams=t,this.ppService=n,this.configService=r,this.trialService=a,this.designData=i,this.selected=new f.CPanelData,this.selection=new d.Selection,this.header=this.configService.appTitle}return AppService.prototype.launchExperiment=function(){var e=this.trialService.getExperimentURL();window.open(e,"experiment")},AppService.prototype.inIframe=function(){try{return window.self!==window.top||"create"==this.state.current.name}catch(e){return!0}},AppService.prototype.duplicateView=function(){window.open(window.location.href,"_blank")},AppService.prototype.hideHeader=function(){this.showHeader=!this.showHeader},AppService.prototype.trialIsNotSelected=function(){return!this.trialService.gotAllData},AppService.prototype.linkClass=function(e){return this.state.current.name==e?"btn active":"btn"},AppService.prototype.changeTrial=function(){console.log("changeTrial"),this.loadTrial()},AppService.prototype.forceSSL=function(){"https:"!==window.location.protocol&&(window.location.href="https://"+this.ppService.ppServer+":"+this.ppService.sslPort+"/LabAutomation/")},AppService.prototype.getPPUser=function(){this.userName="pnekhaichuk",this.loadTrialData()},AppService.prototype.logout=function(){window.location.replace("https://"+window.location.hostname+":9943/security/sessions/logout?&redir="+window.location.href)},AppService.prototype.loadTrialData=function(){var e=this;this.ppService.runProtocolGet0("LabAutomation/LaundryLiquids/design/ControlPanel").subscribe(function(t){var n=t;e.CPanelData=n,null!=e.stateParams.trialname?(e.setSelection(e.stateParams.trialname),e.loadTrial()):(e.setSelection(e.stateParams.trialname),e.loadTrial()),e.showHeader=!e.inIframe(),e.experimentName=e.stateParams.trialname},function(t){window.location.replace("https://"+e.ppService.ppServer+":"+e.ppService.sslPort+"/platform/authorize?state=lalogin&redirect_uri="+window.location.href)})},AppService.prototype.setSelection=function(e){if(""==this.selection.trial_name)for(var t=0;t<this.CPanelData.length;t++)this.CPanelData[t].trial_name==e&&(this.selection.project_name=this.CPanelData[t].project_name,this.selection.subproject_name=this.CPanelData[t].subproject_name,this.selection.trial_name=this.CPanelData[t].trial_name);else for(var t=0;t<this.CPanelData.length;t++)this.CPanelData[t].trial_name==this.selection.trial_name&&(this.selection.project_name=this.CPanelData[t].project_name,this.selection.subproject_name=this.CPanelData[t].subproject_name,this.selection.trial_name=this.CPanelData[t].trial_name)},AppService.prototype.loadTrial=function(){for(var e=0;e<this.CPanelData.length;e++)this.CPanelData[e].trial_name==this.selection.trial_name&&(this.trialService.trialConfig=this.CPanelData[e]);null!=this.trialService.trialConfig.trial_name&&this.trialService.loadAllData(this.state.current.name)},AppService.prototype.printDiv=function(e){if(console.log("printDiv"),"undefined"!=typeof e){var t=document.getElementById(e).innerHTML,n=(document.body.innerHTML,window.open("","_blank","width=600,height=600,scrollbars=no,menubar=no,toolbar=no,location=no,status=no,titlebar=no"));if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1)n.window.focus(),n.document.write('<!DOCTYPE html><html><head><link rel="stylesheet" href="../app/handsontable.full.min.css" /><link rel="stylesheet" href="../app/laStyles.css" /><link rel="stylesheet" href="../app/bootstrap.css"/><link rel="stylesheet" href="../app/angular-ui-tree.min.css"/></head><body onload="window.print()"><div>'+t+"</div></html>"),n.onbeforeunload=function(e){return n.close(),".\n"},n.onabort=function(e){n.document.close(),n.close()};else{var r=window.open("","_blank","width=800,height=600");r.document.open(),r.document.write('<html><head><link rel="stylesheet" href="../app/handsontable.full.min.css" /><link rel="stylesheet" href="../app/laStyles.css" /><link rel="stylesheet" href="../app//bootstrap.css"/><link rel="stylesheet" href="../app/angular-ui-tree.min.css"/></head><body onload="window.print()">'+t+"</html>"),r.document.close()}return n.document.close(),!0}},AppService=r([i.Injectable(),a("design:paramtypes",[o.StateService,s.StateParamsService,l.HTTPService,c.ConfigService,u.TrialService,p.DesignDataService])],AppService)}();t.AppService=h},91:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var a,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=n(1),o=function(){function ConfigService(){this.controlPanelProtocol="LabAutomation/ControlPanel",this.experimentCreationProtocol="LabAutomation/CreateExperiment",this.experimentTypesProtocol="LabAutomation/LaundryLiquids/Design/ExperimentTypes",this.parentFormulationProtocol="LabAutomation/LaundryLiquids/Design/ParentFormulationFromExcel",this.calculateAllFormulationsProtocol="LabAutomation/LaundryLiquids/Design/CalculateAllFormulations",this.processParametersProtocol="LabAutomation/LaundryLiquids/Design/ProcessParameters",this.testScheduleProtocol="LabAutomation/LaundryLiquids/Design/TestSchedule",this.availableTestsProtocol="LabAutomation/LaundryLiquids/Design/GetAvailableTests",this.formulationDataProtocol="LabAutomation/LaundryLiquids/Formulation/FormulationData",this.stabilitySetupProtocol="LabAutomation/LaundryLiquids/Stability/StabilityInputGridData",this.saveToExperimentProtocol="LabAutomation/LaundryLiquids/Design/UploadExperimentDesign",this.experiment2JSON="LabAutomation/LaundryLiquids/Design/Experiment2JSON",this.findFlowMaterial="LabAutomation/LaundryLiquids/Design/FindFlowMaterial",this.saveFormulationData="LabAutomation/LaundryLiquids/Formulation/SaveFormulation",this.createStabilitySteps="LabAutomation/LaundryLiquids/Design/SaveAnalyticalSubsteps",this.saveStabilityToExperimentProtocol="LabAutomation/LaundryLiquids/Stability/StabOutput",this.getEnteredStabilityDaya="LabAutomation/LaundryLiquids/Stability/StabOutputToJSON",this.pdfBatchSheet="LabAutomation/LaundryLiquids/Formulation/GeneratePDFBatchSheet",this.designProtocol="LabAutomation/FormulationDesign",this.formulationProtocol="LabAutomation/FormulationResults",this.stabilityProtocol="LabAutomation/StabilityData",this.appTitle="Structured Data Capture",this.newTestWeek="LabAutomation/LaundryLiquids/Stability/AddNewTestWeek"}return ConfigService=r([i.Injectable(),a("design:paramtypes",[])],ConfigService)}();t.ConfigService=o},96:function(e,t,n){"use strict";var r=n(285);n.d(t,"a",function(){return a}),n.d(t,"b",function(){return i}),n.d(t,"c",function(){return o});var a=function(){function DataTransferEffect(e){this.name=e}return DataTransferEffect.COPY=new DataTransferEffect("copy"),DataTransferEffect.LINK=new DataTransferEffect("link"),DataTransferEffect.MOVE=new DataTransferEffect("move"),DataTransferEffect.NONE=new DataTransferEffect("none"),DataTransferEffect}(),i=function(){function DragImage(e,t,a){if(void 0===t&&(t=0),void 0===a&&(a=0),this.imageElement=e,this.x_offset=t,this.y_offset=a,n.i(r.b)(this.imageElement)){var i=this.imageElement;this.imageElement=new HTMLImageElement,this.imageElement.src=i}}return DragImage}(),o=function(){function DragDropConfig(){this.onDragStartClass="dnd-drag-start",this.onDragEnterClass="dnd-drag-enter",this.onDragOverClass="dnd-drag-over",this.onSortableDragClass="dnd-sortable-drag",this.dragEffect=a.MOVE,this.dropEffect=a.MOVE,this.dragCursor="move"}return DragDropConfig}()}},[1015]);